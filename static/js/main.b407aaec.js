/*! For license information please see main.b407aaec.js.LICENSE.txt */
(()=>{"use strict";var e={122:e=>{e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!==i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var R,F=Object.assign;function V(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case I:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Na){return e.body}}function W(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,ke=null;function Ie(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function xe(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var De=!1;function Ne(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==Ee||null!==ke)&&(Ae(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Pe=!1}function Me(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Re=!1,Fe=null,Ve=!1,ze=null,Ue={onError:function(e){Re=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,u){Re=!1,Fe=null,Me.apply(Ue,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(je(e)!==e)throw Error(s(188))}function Ke(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,We=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ut|0)|0},at=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,kt,It,xt=!1,Tt=[],Ct=null,At=null,Dt=null,Nt=new Map,Ot=new Map,Pt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Rt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Vt(e)&&n.delete(t)}function Ut(){xt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),null!==Dt&&Vt(Dt)&&(Dt=null),Nt.forEach(zt),Ot.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function jt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Dt&&Bt(Dt,e),Nt.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=w.ReactCurrentBatchConfig,$t=!0;function Kt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Ht(e,t,n,r)}finally{bt=i,qt.transition=s}}function Gt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Ht(e,t,n,r)}finally{bt=i,qt.transition=s}}function Ht(e,t,n,r){if($t){var i=Wt(e,t,n,r);if(null===i)$r(e,t,r,Qt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Rt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Rt(At,e,t,n,r,i),!0;case"mouseover":return Dt=Rt(Dt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nt.set(s,Rt(Nt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Rt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&_t(s),null===(s=Wt(e,t,n,r))&&$r(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Qt=null;function Wt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,an=e.screenY-un.screenY):an=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function In(){return kn}var xn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(xn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Dn=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Nn),Pn=[9,13,27,32],Ln=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Rn=c&&"TextEvent"in window&&!Mn,Fn=c&&(!Ln||Mn&&8<Mn&&11>=Mn),Vn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){xe(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Vr(e,0)}function Wn(e){if(H(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Wn(Hn)){var t=[];Kn(t,Hn,e,_e(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wn(Hn)}function sr(e,t){if("click"===e)return Wn(t)}function or(e,t){if("input"===e||"change"===e)return Wn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},kr={};function Ir(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var xr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Ar=Ir("transitionend"),Dr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Dr.set(e,t),u(t,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Lr=Nr[Pr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(xr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,u,l){if(Be.apply(this,arguments),Re){if(!Re)throw Error(s(198));var c=Fe;Re=!1,Fe=null,Ve||(Ve=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=u}else for(o=0;o<r.length;o++){if(u=(a=r[o]).instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=u}}}if(Ve)throw e=ze,Ve=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Rr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(u=o.tag)||6===u){r=s=o;continue e}a=a.parentNode}}r=r.return}Ne((function(){var r=s,i=_e(n),o=[];e:{var a=Dr.get(e);if(void 0!==a){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case xr:case Tr:case Cr:u=yn;break;case Ar:u=Dn;break;case"scroll":u=dn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Oe(p,d))&&c.push(Kr(p,g,f)))),h)break;p=p.return}0<c.length&&(a=new u(a,l,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[pi])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(h=je(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?a:wi(u),f=null==l?a:wi(l),(a=new c(g,p+"leave",u,n,i)).target=h,a.relatedTarget=f,g=null,vi(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=f,c.relatedTarget=h,g=c),h=g,u&&l)e:{for(d=l,p=0,f=c=u;f;f=Hr(f))p++;for(f=0,g=d;g;g=Hr(g))f++;for(;0<p-f;)c=Hr(c),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Hr(c),d=Hr(d)}c=null}else c=null;null!==u&&Qr(o,a,u,c,!1),null!==l&&null!==h&&Qr(o,h,l,c,!0)}if("select"===(u=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var m=Yn;else if($n(a))if(Jn)m=or;else{m=ir;var y=rr}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,jn=!0)),0<(y=Gr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Rn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Ln&&Un(e,t)?(e=en(),Zt=Xt=Jt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Vr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(u=Oe(n,s))&&o.unshift(Kr(n,u,a)):i||null!=(u=Oe(n,s))&&o.push(Kr(n,u,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Wr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Wr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function ki(e){return{current:e}}function Ii(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function xi(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ti={},Ci=ki(Ti),Ai=ki(!1),Di=Ti;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ii(Ai),Ii(Ci)}function Li(e,t,n){if(Ci.current!==Ti)throw Error(s(168));xi(Ci,t),xi(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Di=Ci.current,xi(Ci,e),xi(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ai),Ii(Ci),xi(Ci,e)):Ii(Ai),xi(Ai,n)}var Vi=null,zi=!1,Ui=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function ji(){if(!Ui&&null!==Vi){Ui=!0;var e=0,t=bt;try{var n=Vi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,zi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,ji),i}finally{bt=t,Ui=!1}}return null}var qi=[],$i=0,Ki=null,Gi=0,Hi=[],Qi=0,Wi=null,Yi=1,Ji="";function Xi(e,t){qi[$i++]=Gi,qi[$i++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=Wi,Wi=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--$i],qi[$i]=null,Gi=qi[--$i],qi[$i]=null;for(;e===Wi;)Wi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ll(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Wi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ll(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(us(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(us(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&vs(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Fl(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Vl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Fl(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case S:return(t=Bl(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Vl(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function g(i,s,a,u){for(var l=null,c=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,g),null===c?l=y:c.sibling=y,c=y,h=m}if(g===a.length)return n(i,h),is&&Xi(i,g),l;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],u))&&(s=o(h,s,g),null===c?l=h:c.sibling=h,c=h);return is&&Xi(i,g),l}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,g),l}function m(i,a,u,l){var c=M(u);if("function"!==typeof c)throw Error(s(150));if(null==(u=c.call(u)))throw Error(s(151));for(var h=c=null,g=a,m=a=0,y=null,v=u.next();null!==g&&!v.done;m++,v=u.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,l);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),a=o(b,a,m),null===h?c=b:h.sibling=b,h=b,g=y}if(v.done)return n(i,g),is&&Xi(i,m),c;if(null===g){for(;!v.done;m++,v=u.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,m),null===h?c=v:h.sibling=v,h=v);return is&&Xi(i,m),c}for(g=r(i,g);!v.done;m++,v=u.next())null!==(v=p(g,i,m,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?c=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}return function e(r,s,o,u){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,c=s;null!==c;){if(c.key===l){if((l=o.type)===E){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&vs(l)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=ms(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===E?((s=Vl(o.props.children,r.mode,u,o.key)).return=r,r=s):((u=Fl(o.type,o.key,o.props,null,r.mode,u)).ref=ms(r,s,o),u.return=r,r=u)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Bl(o,r.mode,u)).return=r,r=s}return a(r);case O:return e(r,s,(c=o._init)(o._payload),u)}if(te(o))return g(r,s,o,u);if(M(o))return m(r,s,o,u);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,u)).return=r,r=s),a(r)):n(r,s)}}var ws=bs(!0),_s=bs(!1),Ss=ki(null),Es=null,ks=null,Is=null;function xs(){Is=ks=Es=null}function Ts(e){var t=Ss.current;Ii(Ss),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Es=e,Is=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Es)throw Error(s(308));ks=e,Es.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Ns=null;function Os(e){null===Ns?Ns=[e]:Ns.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ls(e,r)}function Ls(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Du)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ls(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ls(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var u=a,l=u.next;u.next=null,null===o?s=l:o.next=l,o=u;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(null!==s){var h=i.baseState;for(o=0,c=l=u=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ms=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Vu|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var $s={},Ks=ki($s),Gs=ki($s),Hs=ki($s);function Qs(e){if(e===$s)throw Error(s(174));return e}function Ws(e,t){switch(xi(Hs,t),xi(Gs,e),xi(Ks,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Ks),xi(Ks,t)}function Ys(){Ii(Ks),Ii(Gs),Ii(Hs)}function Js(e){Qs(Hs.current);var t=Qs(Ks.current),n=ue(t,e.type);t!==n&&(xi(Gs,e),xi(Ks,n))}function Xs(e){Gs.current===e&&(Ii(Ks),Ii(Gs))}var Zs=ki(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,uo=null,lo=!1,co=!1,ho=0,fo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),co){o=0;do{if(co=!1,ho=0,25<=o)throw Error(s(301));o+=1,uo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(co)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,uo=ao=oo=null,lo=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===uo?oo.memoizedState=uo=e:uo=uo.next=e,uo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===uo?oo.memoizedState:uo.next;if(null!==t)uo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===uo?oo.memoizedState=uo=e:uo=uo.next=e}return uo}function wo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=a=null,l=null,c=o;do{var h=c.lane;if((so&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,a=r):l=l.next=d,oo.lanes|=h,Vu|=h}c=c.next}while(null!==c&&c!==o);null===l?a=r:l.next=u,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Vu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function ko(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ro(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==uo&&1&uo.memoizedState.tag){if(n.flags|=2048,No(9,xo.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(s(349));0!==(30&so)||Io(n,t,i)}return i}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xo(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Ao(e)}function To(e,t,n){return n((function(){Co(t)&&Ao(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=Ls(e,1);null!==t&&sl(t,e,1,-1)}function Do(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function No(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return bo().memoizedState}function Po(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=No(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=No(t,n,s,r))}oo.flags|=e,i.memoizedState=No(1|t,n,s,r)}function Mo(e,t){return Po(8390656,8,e,t)}function Ro(e,t){return Lo(2048,8,e,t)}function Fo(e,t){return Lo(4,2,e,t)}function Vo(e,t){return Lo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,zo.bind(null,t,e),n)}function Bo(){}function jo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),oo.lanes|=n,Vu|=n,e.baseState=!0),t)}function Ko(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Go(){return bo().memoizedState}function Ho(e,t,n){var r=il(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wo(e))Yo(t,n);else if(null!==(n=Ps(e,t,n,r))){sl(n,e,r,rl()),Jo(n,t,r)}}function Qo(e,t,n){var r=il(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var u=t.interleaved;return null===u?(i.next=i,Os(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ps(e,t,i,r))&&(sl(n,e,r,i=rl()),Jo(n,t,r))}}function Wo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){co=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:Ds,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ds,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ho.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Do,useDebugValue:Bo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Ko.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nu)throw Error(s(349));0!==(30&so)||Io(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Mo(To.bind(null,r,o,e),[e]),r.flags|=2048,No(9,xo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Nu.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ds,useCallback:jo,useContext:Ds,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:qo,useReducer:_o,useRef:Oo,useState:function(){return _o(wo)},useDebugValue:Bo,useDeferredValue:function(e){return $o(bo(),ao.memoizedState,e)},useTransition:function(){return[_o(wo)[0],bo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:ko,useId:Go,unstable_isNewReconciler:!1},ta={readContext:Ds,useCallback:jo,useContext:Ds,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:qo,useReducer:So,useRef:Oo,useState:function(){return So(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:$o(t,ao.memoizedState,e)},useTransition:function(){return[So(wo)[0],bo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:ko,useId:Go,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rl(),i=il(e),s=Vs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(sl(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rl(),i=il(e),s=Vs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(sl(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rl(),r=il(e),i=Vs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zs(e,i,r))&&(sl(t,e,r,n),Us(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,s))}function oa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(i=Oi(t)?Di:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function ua(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ds(s):(s=Oi(t)?Di:Ci.current,i.context=Ni(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),js(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function la(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Hu=r),ha(0,t)},n}function pa(e,t,n){(n=Vs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Qu?Qu=new Set([this]):Qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?_s(t,null,n,r):ws(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=mo(e,t,n,r,s,i),n=yo(),null===e||ba?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ml(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Rl(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return xa(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Mu,Lu),Lu|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Mu,Lu),Lu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,xi(Mu,Lu),Lu|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,xi(Mu,Lu),Lu|=r;return wa(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var s=Oi(n)?Di:Ci.current;return s=Ni(t,s),As(t,i),n=mo(e,t,n,r,s,i),r=yo(),null===e||ba?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ta(e,t,n,r,i){if(Oi(n)){var s=!0;Ri(t)}else s=!1;if(As(t,i),null===t.stateNode)$a(e,t),oa(t,n,r),ua(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ds(l):l=Ni(t,l=Oi(n)?Di:Ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||u!==l)&&aa(t,o,r,l),Ms=!1;var d=t.memoizedState;o.state=d,js(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Ai.current||Ms?("function"===typeof c&&(ra(t,n,c,r),u=t.memoizedState),(a=Ms||sa(t,n,a,r,d,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:na(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ds(u):u=Ni(t,u=Oi(n)?Di:Ci.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==u)&&aa(t,o,r,u),Ms=!1,d=t.memoizedState,o.state=d,js(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ms?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(l=Ms||sa(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,s,i)}function Ca(e,t,n,r,i,s){Ia(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),Ws(e,t.containerInfo)}function Da(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Oa,Pa,La,Ma,Ra={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(Zs,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,a?(i=t.mode,a=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=u):a=zl(u,i,0,null),e=Vl(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ra,e):za(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ca(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=zl({mode:"visible",children:r.children},i,0,null),(o=Vl(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ra,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Ua(e,t,a,r=ca(o=Error(s(419)),r,void 0))}if(u=0!==(a&e.childLanes),ba||u){if(null!==(r=Nu)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ls(e,i),sl(r,e,i,-1))}return vl(),Ua(e,t,a,r=ca(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Dl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=Wi,Yi=e.id,Ji=e.overflow,Wi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(a){a=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Rl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Rl(r,a):(a=Vl(a,u,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=null===(u=e.child.memoizedState)?Fa(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Rl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=zl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Ha(t),null;case 3:return r=t.stateNode,Ys(),Ii(Ai),Ii(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ll(ss),ss=null))),Pa(e,t),Ha(t),null;case 5:Xs(t);var i=Qs(Hs.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=Qs(Ks.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var u in ve(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=W(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ve(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Hs.current),Qs(Ks.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ii(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(ll(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ru&&(Ru=3):vl())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return Ys(),Pa(e,t),null===e&&jr(t.stateNode.containerInfo),Ha(t),null;case 10:return Ts(t.type._context),Ha(t),null;case 19:if(Ii(Zs),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ga(o,!1);else{if(0!==Ru||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=eo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>$u&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>$u&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zs.current,xi(Zs,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return pl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Lu)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Wa(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ii(Ai),Ii(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Ii(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(Zs),null;case 4:return Ys(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return pl(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ks.current);var s,o=null;switch(n){case"input":i=W(e,i),r=W(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tu(t,n,s)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function su(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var hu=null,du=!1;function fu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||eu(n,t);case 6:var r=hu,i=du;hu=null,fu(e,t,n),du=i,null!==(hu=r)&&(du?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(du?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),jt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=du,hu=n.stateNode.containerInfo,du=!0,fu(e,t,n),hu=r,du=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ja&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fu(e,t,n),Ja=r):fu(e,t,n);break;default:fu(e,t,n)}}function gu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,u=a;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,du=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===hu)throw Error(s(160));pu(o,a,i),hu=null,du=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Tl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),vu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Tl(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Tl(e,e.return,m)}}break;case 1:mu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Tl(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),be(u,a);var c=be(u,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(u){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Tl(e,e.return,m)}}break;case 6:if(mu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tl(e,e.return,m)}}break;case 3:if(mu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(m){Tl(e,e.return,m)}break;case 4:default:mu(t,e),vu(e);break;case 13:mu(t,e),vu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=Je())),4&r&&gu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(c=Ja)||h,mu(t,e),Ja=c):mu(t,e),vu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:eu(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Tl(r,n,m)}}break;case 5:eu(f,f.return);break;case 22:if(null!==f.memoizedState){Eu(d);continue}}null!==p?(p.return=f,Za=p):Eu(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ge("display",a))}catch(m){Tl(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Tl(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(t,e),vu(e),4&r&&gu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lu(e,uu(e),o);break;default:throw Error(s(161))}}catch(Yu){Tl(e,e.return,Yu)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wu(e,t,n){Za=e,_u(e,t,n)}function _u(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,u=null!==a&&null!==a.memoizedState||Ja;a=Ya;var l=Ja;if(Ya=o,(Ja=u)&&!l)for(Za=i;null!==Za;)u=(o=Za).child,22===o.tag&&null!==o.memoizedState?ku(i):null!==u?(u.return=o,Za=u):ku(i);for(;null!==s;)Za=s,_u(s,t,n),s=s.sibling;Za=i,Ya=a,Ja=l}Su(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):Su(e)}}function Su(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&su(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Eu(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function ku(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(Yu){Tl(t,n,Yu)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Yu){Tl(t,i,Yu)}}var s=t.return;try{su(t)}catch(Yu){Tl(t,s,Yu)}break;case 5:var o=t.return;try{su(t)}catch(Yu){Tl(t,o,Yu)}}}catch(Yu){Tl(t,t.return,Yu)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Iu,xu=Math.ceil,Tu=w.ReactCurrentDispatcher,Cu=w.ReactCurrentOwner,Au=w.ReactCurrentBatchConfig,Du=0,Nu=null,Ou=null,Pu=0,Lu=0,Mu=ki(0),Ru=0,Fu=null,Vu=0,zu=0,Uu=0,Bu=null,ju=null,qu=0,$u=1/0,Ku=null,Gu=!1,Hu=null,Qu=null,Wu=!1,Ju=null,Xu=0,Zu=0,el=null,tl=-1,nl=0;function rl(){return 0!==(6&Du)?Je():-1!==tl?tl:tl=Je()}function il(e){return 0===(1&e.mode)?1:0!==(2&Du)&&0!==Pu?Pu&-Pu:null!==gs.transition?(0===nl&&(nl=gt()),nl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function sl(e,t,n,r){if(50<Zu)throw Zu=0,el=null,Error(s(185));yt(e,n,r),0!==(2&Du)&&e===Nu||(e===Nu&&(0===(2&Du)&&(zu|=n),4===Ru&&cl(e,Pu)),ol(e,r),1===n&&0===Du&&0===(1&t.mode)&&($u=Je()+500,zi&&ji()))}function ol(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,u=i[o];-1===u?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nu?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(hl.bind(null,e)):Bi(hl.bind(null,e)),oi((function(){0===(6&Du)&&ji()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ol(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(tl=-1,nl=0,0!==(6&Du))throw Error(s(327));var n=e.callbackNode;if(Il()&&e.callbackNode!==n)return null;var r=dt(e,e===Nu?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=bl(e,r);else{t=r;var i=Du;Du|=2;var o=yl();for(Nu===e&&Pu===t||(Ku=null,$u=Je()+500,gl(e,t));;)try{_l();break}catch(u){ml(e,u)}xs(),Tu.current=o,Du=i,null!==Ou?t=0:(Nu=null,Pu=0,t=Ru)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ul(e,i))),1===t)throw n=Fu,gl(e,0),cl(e,r),ol(e,Je()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=bl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ul(e,o))),1===t))throw n=Fu,gl(e,0),cl(e,r),ol(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:kl(e,ju,Ku);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=qu+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){rl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kl.bind(null,e,ju,Ku),t);break}kl(e,ju,Ku);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xu(r/1960))-r)){e.timeoutHandle=ri(kl.bind(null,e,ju,Ku),r);break}kl(e,ju,Ku);break;default:throw Error(s(329))}}}return ol(e,Je()),e.callbackNode===n?al.bind(null,e):null}function ul(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(gl(e,t).flags|=256),2!==(e=bl(e,t))&&(t=ju,ju=n,null!==t&&ll(t)),e}function ll(e){null===ju?ju=e:ju.push.apply(ju,e)}function cl(e,t){for(t&=~Uu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function hl(e){if(0!==(6&Du))throw Error(s(327));Il();var t=dt(e,0);if(0===(1&t))return ol(e,Je()),null;var n=bl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ul(e,r))}if(1===n)throw n=Fu,gl(e,0),cl(e,t),ol(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,ju,Ku),ol(e,Je()),null}function dl(e,t){var n=Du;Du|=1;try{return e(t)}finally{0===(Du=n)&&($u=Je()+500,zi&&ji())}}function fl(e){null!==Ju&&0===Ju.tag&&0===(6&Du)&&Il();var t=Du;Du|=1;var n=Au.transition,r=bt;try{if(Au.transition=null,bt=1,e)return e()}finally{bt=r,Au.transition=n,0===(6&(Du=t))&&ji()}}function pl(){Lu=Mu.current,Ii(Mu)}function gl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Ys(),Ii(Ai),Ii(Ci),no();break;case 5:Xs(r);break;case 4:Ys();break;case 13:case 19:Ii(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:pl()}n=n.return}if(Nu=e,Ou=e=Rl(e.current,null),Pu=Lu=t,Ru=0,Fu=null,Uu=zu=Vu=0,ju=Bu=null,null!==Ns){for(t=0;t<Ns.length;t++)if(null!==(r=(n=Ns[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ns=null}return e}function ml(e,t){for(;;){var n=Ou;try{if(xs(),ro.current=Xo,lo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(so=0,uo=ao=oo=null,co=!1,ho=0,Cu.current=null,null===n||null===n.return){Ru=1,Fu=t,Ou=null;break}e:{var o=e,a=n.return,u=n,l=t;if(t=Pu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,ya(p,a,u,0,t),1&p.mode&&ga(o,c,t),l=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}if(0===(1&t)){ga(o,c,t),vl();break e}l=Error(s(426))}else if(is&&1&u.mode){var y=ma(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,u,0,t),ps(la(l,u));break e}}o=l=la(l,u),4!==Ru&&(Ru=2),null===Bu?Bu=[o]:Bu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,fa(0,l,t));break e;case 1:u=l;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Qu||!Qu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,pa(o,u,t));break e}}o=o.return}while(null!==o)}El(n)}catch(w){t=w,Ou===n&&null!==n&&(Ou=n=n.return);continue}break}}function yl(){var e=Tu.current;return Tu.current=Xo,null===e?Xo:e}function vl(){0!==Ru&&3!==Ru&&2!==Ru||(Ru=4),null===Nu||0===(268435455&Vu)&&0===(268435455&zu)||cl(Nu,Pu)}function bl(e,t){var n=Du;Du|=2;var r=yl();for(Nu===e&&Pu===t||(Ku=null,gl(e,t));;)try{wl();break}catch(i){ml(e,i)}if(xs(),Du=n,Tu.current=r,null!==Ou)throw Error(s(261));return Nu=null,Pu=0,Ru}function wl(){for(;null!==Ou;)Sl(Ou)}function _l(){for(;null!==Ou&&!We();)Sl(Ou)}function Sl(e){var t=Iu(e.alternate,e,Lu);e.memoizedProps=e.pendingProps,null===t?El(e):Ou=t,Cu.current=null}function El(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Lu)))return void(Ou=n)}else{if(null!==(n=Wa(n,t)))return n.flags&=32767,void(Ou=n);if(null===e)return Ru=6,void(Ou=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ou=t);Ou=t=e}while(null!==t);0===Ru&&(Ru=5)}function kl(e,t,n){var r=bt,i=Au.transition;try{Au.transition=null,bt=1,function(e,t,n,r){do{Il()}while(null!==Ju);if(0!==(6&Du))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nu&&(Ou=Nu=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wu||(Wu=!0,Ol(tt,(function(){return Il(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Au.transition,Au.transition=null;var a=bt;bt=1;var u=Du;Du|=4,Cu.current=null,function(e,t){if(ei=$t,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(bu){n=null;break e}var a=0,u=-1,l=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(u=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(bu){Tl(t,t.return,bu)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nu,nu=!1}(e,n),yu(n,e),pr(ti),$t=!!ei,ti=ei=null,e.current=n,wu(n,e,i),Ye(),Du=u,bt=a,Au.transition=o}else e.current=n;if(Wu&&(Wu=!1,Ju=e,Xu=i),o=e.pendingLanes,0===o&&(Qu=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ol(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,e=Hu,Hu=null,e;0!==(1&Xu)&&0!==e.tag&&Il(),o=e.pendingLanes,0!==(1&o)?e===el?Zu++:(Zu=0,el=e):Zu=0,ji()}(e,t,n,r)}finally{Au.transition=i,bt=r}return null}function Il(){if(null!==Ju){var e=wt(Xu),t=Au.transition,n=bt;try{if(Au.transition=null,bt=16>e?16:e,null===Ju)var r=!1;else{if(e=Ju,Ju=null,Xu=0,0!==(6&Du))throw Error(s(331));var i=Du;for(Du|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ou(h),h===c){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(0!==(2048&(u=Za).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(S){Tl(u,u.return,S)}if(u===a){Za=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Za=_;break e}Za=u.return}}if(Du=i,ji(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Au.transition=t}}return!1}function xl(e,t,n){e=zs(e,t=fa(0,t=la(n,t),1),1),t=rl(),null!==e&&(yt(e,1,t),ol(e,t))}function Tl(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qu||!Qu.has(r))){t=zs(t,e=pa(t,e=la(n,e),1),1),e=rl(),null!==t&&(yt(t,1,e),ol(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rl(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Pu&n)===n&&(4===Ru||3===Ru&&(130023424&Pu)===Pu&&500>Je()-qu?gl(e,0):Uu|=n),ol(e,t)}function Al(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=rl();null!==(e=Ls(e,t))&&(yt(e,t,n),ol(e,n))}function Dl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Al(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Al(e,n)}function Ol(e,t){return He(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,n,r){return new Pl(e,t,n,r)}function Ml(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var n=e.alternate;return null===n?((n=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fl(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ml(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Vl(n.children,i,o,t);case k:a=8,i|=8;break;case I:return(e=Ll(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=Ll(13,n,t,i)).elementType=A,e.lanes=o,e;case D:return(e=Ll(19,n,t,i)).elementType=D,e.lanes=o,e;case P:return zl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case T:a=9;break e;case C:a=11;break e;case N:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ll(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vl(e,t,n,r){return(e=Ll(7,e,r,t)).lanes=n,e}function zl(e,t,n,r){return(e=Ll(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Ll(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ql(e,t,n,r,i,s,o,a,u){return e=new jl(e,t,n,a,u),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ll(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function $l(e){if(!e)return Ti;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Mi(e,n,t)}return t}function Kl(e,t,n,r,i,s,o,a,u){return(e=ql(n,r,!0,e,0,s,0,a,u)).context=$l(null),n=e.current,(s=Vs(r=rl(),i=il(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,i),e.current.lanes=i,yt(e,i,r),ol(e,r),e}function Gl(e,t,n,r){var i=t.current,s=rl(),o=il(i);return n=$l(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,o))&&(sl(e,i,o,s),Us(e,i,o)),o}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Ql(e,t),(e=e.alternate)&&Ql(e,t)}Iu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:Js(t);break;case 1:Oi(t.type)&&Ri(t);break;case 4:Ws(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(xi(Zs,1&Zs.current),null!==(e=Ka(e,t,n))?e.sibling:null);xi(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Ka(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);As(t,n),i=mo(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,ua(t,r,e,n),t=Ca(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ml(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=na(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),js(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=la(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=la(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ia(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Va(e,t,n);case 4:return Ws(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,xi(Ss,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){a=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Vs(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ds(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Sa(e,t,r,i=na(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),$a(e,t),t.tag=1,Oi(r)?(e=!0,Ri(t)):e=!1,As(t,n),oa(t,r,i),ua(t,r,i,n),Ca(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ec(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tc(){}function nc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hl(o);a.call(e)}}Gl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hl(o);s.call(e)}}var o=Kl(t,r,e,0,null,!1,0,"",tc);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),fl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hl(u);a.call(e)}}var u=ql(e,0,!1,null,0,!1,0,"",tc);return e._reactRootContainer=u,e[pi]=u.current,jr(8===e.nodeType?e.parentNode:e),fl((function(){Gl(t,u,n,r)})),u}(n,t,e,i,r);return Hl(o)}Xl.prototype.render=Jl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gl(e,t,null,null)},Xl.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fl((function(){Gl(null,e,null,null)})),t[pi]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ol(t,Je()),0===(6&Du)&&($u=Je()+500,ji()))}break;case 13:fl((function(){var t=Ls(e,1);if(null!==t){var n=rl();sl(t,e,1,n)}})),Wl(e,1)}},St=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)sl(t,e,134217728,rl());Wl(e,134217728)}},Et=function(e){if(13===e.tag){var t=il(e),n=Ls(e,t);if(null!==n)sl(n,e,t,rl());Wl(e,t)}},kt=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=dl,Ae=fl;var rc={usingClientEntryPoint:!1,Events:[bi,wi,_i,xe,Te,dl]},ic={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sc={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{it=oc.inject(sc),st=oc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zl(e))throw Error(s(299));var n=!1,r="",i=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ql(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Jl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fl(e)},t.hydrate=function(e,t,n){if(!ec(t))throw Error(s(200));return nc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Kl(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xl(t)},t.render=function(e,t,n){if(!ec(t))throw Error(s(200));return nc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ec(e))throw Error(s(40));return!!e._reactRootContainer&&(fl((function(){nc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=dl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ec(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return nc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:s,_owner:a.current}}t.jsx=l,t.jsxs=l},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var u=arguments.length-2;if(1===u)s.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===s[i]&&(s[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===s?"."+C(u,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var c=s+C(a=e[l],l);u+=A(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(a=e.next()).done;)u+=A(a=a.value,t,i,c=s+C(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function D(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)S.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,u=e[a],l=a+1,c=e[l];if(0>s(u,n))l<i&&0>s(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[a]=n,r=a);else{if(!(l<i&&0>s(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var l=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function _(e){if(m=!1,w(e),!g)if(null!==r(l))g=!0,P(S);else{var t=r(c);null!==t&&L(_,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,v(x),x=-1),p=!0;var s=f;try{for(w(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),w(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&L(_,h.startTime-n),u=!1}return u}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,I=null,x=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function D(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?E():(k=!1,I=null)}}else k=!1}if("function"===typeof b)E=function(){b(D)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,O=N.port2;N.port1.onmessage=D,E=function(){O.postMessage(null)}}else E=function(){y(D,0)};function P(e){I=e,k||(k=!0,E())}function L(e,n){x=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(l)&&e===r(c)&&(m?(v(x),x=-1):m=!0,L(_,s-o))):(e.sortIndex=a,n(l,e),g||p||(g=!0,P(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)},956:(e,t,n)=>{var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return a((function(){i.value=n,i.getSnapshot=t,l(i)&&c({inst:i})}),[e,n,t]),o((function(){return l(i)&&c({inst:i}),e((function(){l(i)&&c({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},461:(e,t,n)=>{e.exports=n(956)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".31c40ded.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="visomap:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,u;if(void 0!==s)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(u=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),u&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/visiomap/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],u=r[2],l=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)s=o[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkvisomap=self.webpackChunkvisomap||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{FirebaseError:()=>ys,SDK_VERSION:()=>Ho,_DEFAULT_ENTRY_NAME:()=>No,_addComponent:()=>Ro,_addOrOverwriteComponent:()=>Fo,_apps:()=>Po,_clearComponents:()=>qo,_components:()=>Mo,_getProvider:()=>zo,_isFirebaseApp:()=>Bo,_isFirebaseServerApp:()=>jo,_registerComponent:()=>Vo,_removeServiceInstance:()=>Uo,_serverApps:()=>Lo,deleteApp:()=>Xo,getApp:()=>Yo,getApps:()=>Jo,initializeApp:()=>Qo,initializeServerApp:()=>Wo,onLog:()=>ea,registerVersion:()=>Zo,setLogLevel:()=>ta});var i=n(43),s=n(391);function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"===typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var a={};function u(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:a}var l=Object.assign,c=Object.getOwnPropertyDescriptor,h=Object.defineProperty,d=Object.prototype,f=[];Object.freeze(f);var p={};Object.freeze(p);var g="undefined"!==typeof Proxy,m=Object.toString();function y(){g||o("Proxy not available")}function v(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var b=function(){};function w(e){return"function"===typeof e}function _(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function S(e){return null!==e&&"object"===typeof e}function E(e){if(!S(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"===typeof n&&n.toString()===m}function k(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function I(e,t,n){h(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function x(e,t,n){h(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function T(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return S(e)&&!0===e[n]}}function C(e){return null!=e&&"[object Map]"===Object.prototype.toString.call(e)}function A(e){return null!=e&&"[object Set]"===Object.prototype.toString.call(e)}var D="undefined"!==typeof Object.getOwnPropertySymbols;var N="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:D?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function O(e){return null===e?null:"object"===typeof e?""+e:e}function P(e,t){return d.hasOwnProperty.call(e,t)}var L=Object.getOwnPropertyDescriptors||function(e){var t={};return N(e).forEach((function(n){t[n]=c(e,n)})),t};function M(e,t){return!!(e&t)}function R(e,t,n){return n?e|=t:e&=~t,e}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function z(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(null,arguments)}function j(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,q(e,t)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function $(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var K=Symbol("mobx-stored-annotations");function G(e){return Object.assign((function(t,n){if(Q(n))return e.decorate_20223_(t,n);H(t,n,e)}),e)}function H(e,t,n){P(e,K)||I(e,K,B({},e[K])),function(e){return e.annotationType_===ne}(n)||(e[K][t]=n)}function Q(e){return"object"==typeof e&&"string"==typeof e.kind}var W=Symbol("mobx administration"),Y=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=Ze.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Et(this)},t.reportChanged=function(){_t(),kt(this),St()},t.toString=function(){return this.name_},z(e,[{key:"isBeingObserved",get:function(){return M(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=R(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return M(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=R(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return M(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=R(this.flags_,e.diffValueMask_,1===t)}}])}();Y.isBeingObservedMask_=1,Y.isPendingUnobservationMask_=2,Y.diffValueMask_=4;var J=T("Atom",Y);function X(e,t,n){void 0===t&&(t=b),void 0===n&&(n=b);var r,i=new Y(e);return t!==b&&Qt(Kt,i,t,r),n!==b&&Ht(i,n),i}var Z={identity:function(e,t){return e===t},structural:function(e,t){return fr(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e===1/t:e!==e&&t!==t},shallow:function(e,t){return fr(e,t,1)}};function ee(e,t,n){return hn(e)?e:Array.isArray(e)?Ve.array(e,{name:n}):E(e)?Ve.object(e,void 0,{name:n}):C(e)?Ve.map(e,{name:n}):A(e)?Ve.set(e,{name:n}):"function"!==typeof e||Bt(e)||ln(e)?e:k(e)?an(e):Ut(n,e)}function te(e){return e}var ne="override";function re(e,t){return{annotationType_:e,options_:t,make_:ie,extend_:se,decorate_20223_:oe}}function ie(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Bt(n.value))return 1;var s=ae(e,this,t,n,!1);return h(r,t,s),2}function se(e,t,n,r){var i=ae(e,this,t,n);return e.defineProperty_(t,i,r)}function oe(e,t){var n=t.kind,r=t.name,i=t.addInitializer,s=this;if("field"!=n){var a;if("method"==n)return Bt(e)||(e=function(e){var t,n,i,o;return He(null!=(t=null==(n=s.options_)?void 0:n.name)?t:r.toString(),e,null!=(i=null==(o=s.options_)?void 0:o.autoAction)&&i)}(e)),null!=(a=this.options_)&&a.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e;o("Cannot apply '"+s.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+s.annotationType_+"' can only be used on properties with a function value.")}else i((function(){H(this,r,s)}))}function ae(e,t,n,r,i){var s,o,a,u,l,c,h,d;void 0===i&&(i=yt.safeDescriptors),d=r,t.annotationType_,d.value;var f,p=r.value;null!=(s=t.options_)&&s.bound&&(p=p.bind(null!=(f=e.proxy_)?f:e.target_));return{value:He(null!=(o=null==(a=t.options_)?void 0:a.name)?o:n.toString(),p,null!=(u=null==(l=t.options_)?void 0:l.autoAction)&&u,null!=(c=t.options_)&&c.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ue(e,t){return{annotationType_:e,options_:t,make_:le,extend_:ce,decorate_20223_:he}}function le(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!P(e.target_,t)||!ln(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(ln(n.value))return 1;var s=de(e,this,t,n,!1,!1);return h(r,t,s),2}function ce(e,t,n,r){var i,s=de(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,s,r)}function he(e,t){var n;var r=t.name,i=t.addInitializer;return ln(e)||(e=an(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function de(e,t,n,r,i,s){var o;void 0===s&&(s=yt.safeDescriptors),o=r,t.annotationType_,o.value;var a,u=r.value;(ln(u)||(u=an(u)),i)&&((u=u.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:u,configurable:!s||e.isPlainObject_,enumerable:!1,writable:!s}}function fe(e,t){return{annotationType_:e,options_:t,make_:pe,extend_:ge,decorate_20223_:me}}function pe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ge(e,t,n,r){return function(e,t,n,r){t.annotationType_,r.get;0}(0,this,0,n),e.defineComputedProperty_(t,B({},this.options_,{get:n.get,set:n.set}),r)}function me(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=Kn(this)[W],i=B({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new Xe(i))})),function(){return this[W].getObservablePropValue_(r)}}function ye(e,t){return{annotationType_:e,options_:t,make_:ve,extend_:be,decorate_20223_:we}}function ve(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function be(e,t,n,r){var i,s;return function(e,t){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,n.value,null!=(i=null==(s=this.options_)?void 0:s.enhancer)?i:ee,r)}function we(e,t){var n=this,r=t.kind,i=t.name,s=new WeakSet;function o(e,t){var r,o,a=Kn(e)[W],u=new Je(t,null!=(r=null==(o=n.options_)?void 0:o.enhancer)?r:ee,"ObservableObject."+i.toString(),!1);a.values_.set(i,u),s.add(e)}if("accessor"==r)return{get:function(){return s.has(this)||o(this,e.get.call(this)),this[W].getObservablePropValue_(i)},set:function(e){return s.has(this)||o(this,e),this[W].setObservablePropValue_(i,e)},init:function(e){return s.has(this)||o(this,e),e}}}var _e="true",Se=Ee();function Ee(e){return{annotationType_:_e,options_:e,make_:ke,extend_:Ie,decorate_20223_:xe}}function ke(e,t,n,r){var i,s,o,a;if(n.get)return je.make_(e,t,n,r);if(n.set){var u=He(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!yt.safeDescriptors||e.isPlainObject_,set:u})?0:2:(h(r,t,{configurable:!0,set:u}),2)}if(r!==e.target_&&"function"===typeof n.value)return k(n.value)?(null!=(a=this.options_)&&a.autoBind?an.bound:an).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?Ut.bound:Ut).make_(e,t,n,r);var l,c=!1===(null==(i=this.options_)?void 0:i.deep)?Ve.ref:Ve;"function"===typeof n.value&&null!=(s=this.options_)&&s.autoBind&&(n.value=n.value.bind(null!=(l=e.proxy_)?l:e.target_));return c.make_(e,t,n,r)}function Ie(e,t,n,r){var i,s,o;if(n.get)return je.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!yt.safeDescriptors||e.isPlainObject_,set:He(t.toString(),n.set)},r);"function"===typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_));return(!1===(null==(s=this.options_)?void 0:s.deep)?Ve.ref:Ve).extend_(e,t,n,r)}function xe(e,t){o("'"+this.annotationType_+"' cannot be used as a decorator")}var Te={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ce(e){return e||Te}Object.freeze(Te);var Ae=ye("observable"),De=ye("observable.ref",{enhancer:te}),Ne=ye("observable.shallow",{enhancer:function(e,t,n){return void 0===e||null===e||Qn(e)||Pn(e)||Vn(e)||Bn(e)?e:Array.isArray(e)?Ve.array(e,{name:n,deep:!1}):E(e)?Ve.object(e,void 0,{name:n,deep:!1}):C(e)?Ve.map(e,{name:n,deep:!1}):A(e)?Ve.set(e,{name:n,deep:!1}):void 0}}),Oe=ye("observable.struct",{enhancer:function(e,t){return fr(e,t)?t:e}}),Pe=G(Ae);function Le(e){return!0===e.deep?ee:!1===e.deep?te:function(e){var t,n;return e&&null!=(t=null==(n=e.options_)?void 0:n.enhancer)?t:ee}(e.defaultDecorator)}function Me(e,t,n){return Q(t)?Ae.decorate_20223_(e,t):_(t)?void H(e,t,Ae):hn(e)?e:E(e)?Ve.object(e,t,n):Array.isArray(e)?Ve.array(e,t):C(e)?Ve.map(e,t):A(e)?Ve.set(e,t):"object"===typeof e&&null!==e?e:Ve.box(e,t)}l(Me,Pe);var Re,Fe,Ve=l(Me,{box:function(e,t){var n=Ce(t);return new Je(e,Le(n),n.name,!0,n.equals)},array:function(e,t){var n=Ce(t);return(!1===yt.useProxies||!1===n.proxy?ar:xn)(e,Le(n),n.name)},map:function(e,t){var n=Ce(t);return new Fn(e,Le(n),n.name)},set:function(e,t){var n=Ce(t);return new Un(e,Le(n),n.name)},object:function(e,t,n){return hr((function(){return Zt(!1===yt.useProxies||!1===(null==n?void 0:n.proxy)?Kn({},n):function(e,t){var n,r;return y(),e=Kn(e,t),null!=(r=(n=e[W]).proxy_)?r:n.proxy_=new Proxy(e,pn)}({},n),e,t)}))},ref:G(De),shallow:G(Ne),deep:Pe,struct:G(Oe)}),ze="computed",Ue=fe(ze),Be=fe("computed.struct",{equals:Z.structural}),je=function(e,t){if(Q(t))return Ue.decorate_20223_(e,t);if(_(t))return H(e,t,Ue);if(E(e))return G(fe(ze,e));var n=E(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Xe(n)};Object.assign(je,Ue),je.struct=G(Be);var qe=0,$e=1,Ke=null!=(Re=null==(Fe=c((function(){}),"name"))?void 0:Fe.configurable)&&Re,Ge={value:"action",configurable:!0,writable:!1,enumerable:!1};function He(e,t,n,r){function i(){return Qe(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},Ke&&(Ge.value=e,h(i,"name",Ge)),i}function Qe(e,t,n,r,i){var s=function(e,t){var n=!1,r=0;0;var i=yt.trackingDerivation,s=!t||!i;_t();var o=yt.allowStateChanges;s&&(lt(),o=We(!0));var a=ht(!0),u={runAsAction_:s,prevDerivation_:i,prevAllowStateChanges_:o,prevAllowStateReads_:a,notifySpy_:n,startTime_:r,actionId_:$e++,parentActionId_:qe};return qe=u.actionId_,u}(0,t);try{return n.apply(r,i)}catch(a){throw s.error_=a,a}finally{!function(e){qe!==e.actionId_&&o(30);qe=e.parentActionId_,void 0!==e.error_&&(yt.suppressReactionErrors=!0);Ye(e.prevAllowStateChanges_),dt(e.prevAllowStateReads_),St(),e.runAsAction_&&ct(e.prevDerivation_);0;yt.suppressReactionErrors=!1}(s)}}function We(e){var t=yt.allowStateChanges;return yt.allowStateChanges=e,t}function Ye(e){yt.allowStateChanges=e}var Je=function(e){function t(t,n,r,i,s){var o;return void 0===r&&(r="ObservableValue"),void 0===i&&(i=!0),void 0===s&&(s=Z.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=s,o.value_=n(t,void 0,r),o}j(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==yt.UNCHANGED){0,this.setNewValue_(e)}},n.prepareNewValue_=function(e){if(st(this),gn(this)){var t=yn(this,{object:this,type:En,newValue:e});if(!t)return yt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?yt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),vn(this)&&wn(this,{type:En,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return mn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:En,newValue:this.value_,oldValue:void 0}),bn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return O(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Y),Xe=function(){function e(e){this.dependenciesState_=Ze.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ze.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new nt(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=et.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||o(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=He("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Z.structural:Z.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Ze.UP_TO_DATE_)return;e.lowestObserverState_=Ze.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ze.UP_TO_DATE_&&(e.dependenciesState_=Ze.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing&&o(32,this.name_,this.derivation),0!==yt.inBatch||0!==this.observers_.size||this.keepAlive_){if(Et(this),it(this)){var e=yt.trackingContext;this.keepAlive_&&!e&&(yt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Ze.STALE_)return;e.lowestObserverState_=Ze.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Ze.POSSIBLY_STALE_?t.dependenciesState_=Ze.STALE_:t.dependenciesState_===Ze.UP_TO_DATE_&&(e.lowestObserverState_=Ze.UP_TO_DATE_)}))}(this),yt.trackingContext=e}}else it(this)&&(this.warnAboutUntrackedRead_(),_t(),this.value_=this.computeValue_(!1),St());var t=this.value_;if(rt(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter&&o(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter=!1}}else o(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Ze.NOT_TRACKING_,n=this.computeValue_(!0),r=t||rt(e)||rt(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing=!0;var t,n=We(!1);if(e)t=ot(this,this.derivation,this.scope_);else if(!0===yt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(r){t=new nt(r)}return Ye(n),this.isComputing=!1,t},t.suspend_=function(){this.keepAlive_||(at(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return jt((function(){var s=n.get();if(!r||t){var o=lt();e({observableKind:"computed",debugObjectName:n.name_,type:En,object:n,newValue:s,oldValue:i}),ct(o)}r=!1,i=s}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return O(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},z(e,[{key:"isComputing",get:function(){return M(this.flags_,e.isComputingMask_)},set:function(t){this.flags_=R(this.flags_,e.isComputingMask_,t)}},{key:"isRunningSetter",get:function(){return M(this.flags_,e.isRunningSetterMask_)},set:function(t){this.flags_=R(this.flags_,e.isRunningSetterMask_,t)}},{key:"isBeingObserved",get:function(){return M(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=R(this.flags_,e.isBeingObservedMask_,t)}},{key:"isPendingUnobservation",get:function(){return M(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=R(this.flags_,e.isPendingUnobservationMask_,t)}},{key:"diffValue",get:function(){return M(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=R(this.flags_,e.diffValueMask_,1===t)}}])}();Xe.isComputingMask_=1,Xe.isRunningSetterMask_=2,Xe.isBeingObservedMask_=4,Xe.isPendingUnobservationMask_=8,Xe.diffValueMask_=16;var Ze,et,tt=T("ComputedValue",Xe);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Ze||(Ze={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(et||(et={}));var nt=function(e){this.cause=void 0,this.cause=e};function rt(e){return e instanceof nt}function it(e){switch(e.dependenciesState_){case Ze.UP_TO_DATE_:return!1;case Ze.NOT_TRACKING_:case Ze.STALE_:return!0;case Ze.POSSIBLY_STALE_:for(var t=ht(!0),n=lt(),r=e.observing_,i=r.length,s=0;s<i;s++){var o=r[s];if(tt(o)){if(yt.disableErrorBoundaries)o.get();else try{o.get()}catch(a){return ct(n),dt(t),!0}if(e.dependenciesState_===Ze.STALE_)return ct(n),dt(t),!0}}return ft(e),ct(n),dt(t),!1}}function st(e){}function ot(e,t,n){var r=ht(!0);ft(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++yt.runId;var i,s=yt.trackingDerivation;if(yt.trackingDerivation=e,yt.inBatch++,!0===yt.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(o){i=new nt(o)}return yt.inBatch--,yt.trackingDerivation=s,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Ze.UP_TO_DATE_,i=0,s=e.unboundDepsCount_,o=0;o<s;o++){var a=n[o];0===a.diffValue&&(a.diffValue=1,i!==o&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=i,e.newObserving_=null,s=t.length;for(;s--;){var u=t[s];0===u.diffValue&&bt(u,e),u.diffValue=0}for(;i--;){var l=n[i];1===l.diffValue&&(l.diffValue=0,vt(l,e))}r!==Ze.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),dt(r),i}function at(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)bt(t[n],e);e.dependenciesState_=Ze.NOT_TRACKING_}function ut(e){var t=lt();try{return e()}finally{ct(t)}}function lt(){var e=yt.trackingDerivation;return yt.trackingDerivation=null,e}function ct(e){yt.trackingDerivation=e}function ht(e){var t=yt.allowStateReads;return yt.allowStateReads=e,t}function dt(e){yt.allowStateReads=e}function ft(e){if(e.dependenciesState_!==Ze.UP_TO_DATE_){e.dependenciesState_=Ze.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Ze.UP_TO_DATE_}}var pt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},gt=!0,mt=!1,yt=function(){var e=u();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(gt=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new pt).version&&(gt=!1),gt?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new pt):(setTimeout((function(){mt||o(35)}),1),new pt)}();function vt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function bt(e,t){e.observers_.delete(t),0===e.observers_.size&&wt(e)}function wt(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,yt.pendingUnobservations.push(e))}function _t(){yt.inBatch++}function St(){if(0===--yt.inBatch){Ct();for(var e=yt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers_.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof Xe&&n.suspend_())}yt.pendingUnobservations=[]}}function Et(e){var t=yt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&yt.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(0===e.observers_.size&&yt.inBatch>0&&wt(e),!1)}function kt(e){e.lowestObserverState_!==Ze.STALE_&&(e.lowestObserverState_=Ze.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ze.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ze.STALE_})))}var It=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ze.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=et.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,yt.pendingReactions.push(this),Ct())},t.runReaction_=function(){if(!this.isDisposed){_t(),this.isScheduled=!1;var e=yt.trackingContext;if(yt.trackingContext=this,it(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}yt.trackingContext=e,St()}},t.track=function(e){if(!this.isDisposed){_t();0,this.isRunning=!0;var t=yt.trackingContext;yt.trackingContext=this;var n=ot(this,e,void 0);yt.trackingContext=t,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&at(this),rt(n)&&this.reportExceptionInDerivation_(n.cause),St()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(yt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";yt.suppressReactionErrors||console.error(n,e),yt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(_t(),at(this),St()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[W]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1)},z(e,[{key:"isDisposed",get:function(){return M(this.flags_,e.isDisposedMask_)},set:function(t){this.flags_=R(this.flags_,e.isDisposedMask_,t)}},{key:"isScheduled",get:function(){return M(this.flags_,e.isScheduledMask_)},set:function(t){this.flags_=R(this.flags_,e.isScheduledMask_,t)}},{key:"isTrackPending",get:function(){return M(this.flags_,e.isTrackPendingMask_)},set:function(t){this.flags_=R(this.flags_,e.isTrackPendingMask_,t)}},{key:"isRunning",get:function(){return M(this.flags_,e.isRunningMask_)},set:function(t){this.flags_=R(this.flags_,e.isRunningMask_,t)}},{key:"diffValue",get:function(){return M(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=R(this.flags_,e.diffValueMask_,1===t)}}])}();It.isDisposedMask_=1,It.isScheduledMask_=2,It.isTrackPendingMask_=4,It.isRunningMask_=8,It.diffValueMask_=16;var xt=100,Tt=function(e){return e()};function Ct(){yt.inBatch>0||yt.isRunningReactions||Tt(At)}function At(){yt.isRunningReactions=!0;for(var e=yt.pendingReactions,t=0;e.length>0;){++t===xt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}yt.isRunningReactions=!1}var Dt=T("Reaction",It);var Nt="action",Ot="autoAction",Pt="<unnamed action>",Lt=re(Nt),Mt=re("action.bound",{bound:!0}),Rt=re(Ot,{autoAction:!0}),Ft=re("autoAction.bound",{autoAction:!0,bound:!0});function Vt(e){return function(t,n){return w(t)?He(t.name||Pt,t,e):w(n)?He(t,n,e):Q(n)?(e?Rt:Lt).decorate_20223_(t,n):_(n)?H(t,n,e?Rt:Lt):_(t)?G(re(e?Ot:Nt,{name:t,autoAction:e})):void 0}}var zt=Vt(!1);Object.assign(zt,Lt);var Ut=Vt(!0);function Bt(e){return w(e)&&!0===e.isMobxAction}function jt(e,t){var n,r,i,s;void 0===t&&(t=p);var o,a=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)o=new It(a,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var u=$t(t),l=!1;o=new It(a,(function(){l||(l=!0,u((function(){l=!1,o.isDisposed||o.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(o)}return null!=(i=t)&&null!=(i=i.signal)&&i.aborted||o.schedule_(),o.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(Ut,Rt),zt.bound=G(Mt),Ut.bound=G(Ft);var qt=function(e){return e()};function $t(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:qt}var Kt="onBO",Gt="onBUO";function Ht(e,t,n){return Qt(Gt,e,t,n)}function Qt(e,t,n,r){var i="function"===typeof r?ur(t,n):ur(t),s=w(r)?r:n,o=e+"L";return i[o]?i[o].add(s):i[o]=new Set([s]),function(){var e=i[o];e&&(e.delete(s),0===e.size&&delete i[o])}}var Wt="never",Yt="always",Jt="observed";function Xt(e){!0===e.isolateGlobalState&&function(){if((yt.pendingReactions.length||yt.inBatch||yt.isRunningReactions)&&o(36),mt=!0,gt){var e=u();0===--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),yt=new pt}}();var t=e.useProxies,n=e.enforceActions;if(void 0!==t&&(yt.useProxies=t===Yt||t!==Wt&&"undefined"!==typeof Proxy),"ifavailable"===t&&(yt.verifyProxies=!0),void 0!==n){var r=n===Yt?Yt:n===Jt;yt.enforceActions=r,yt.allowStateChanges=!0!==r&&r!==Yt}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(yt[t]=!!e[t])})),yt.allowStateReads=!yt.observableRequiresReaction,e.reactionScheduler&&function(e){var t=Tt;Tt=function(n){return e((function(){return t(n)}))}}(e.reactionScheduler)}function Zt(e,t,n,r){var i=L(t);return hr((function(){var t=Kn(e,r)[W];N(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}function en(e,t){return tn(ur(e,t))}function tn(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(tn)),n}var nn=0;function rn(){this.message="FLOW_CANCELLED"}rn.prototype=Object.create(Error.prototype);var sn=ue("flow"),on=ue("flow.bound",{bound:!0}),an=Object.assign((function(e,t){if(Q(t))return sn.decorate_20223_(e,t);if(_(t))return H(e,t,sn);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++nn,s=zt(r+" - runid: "+i+" - init",n).apply(this,t),o=void 0,a=new Promise((function(t,n){var a=0;function u(e){var t;o=void 0;try{t=zt(r+" - runid: "+i+" - yield "+a++,s.next).call(s,e)}catch(u){return n(u)}c(t)}function l(e){var t;o=void 0;try{t=zt(r+" - runid: "+i+" - yield "+a++,s.throw).call(s,e)}catch(u){return n(u)}c(t)}function c(e){if(!w(null==e?void 0:e.then))return e.done?t(e.value):(o=Promise.resolve(e.value)).then(u,l);e.then(c,n)}e=n,u(void 0)}));return a.cancel=zt(r+" - runid: "+i+" - cancel",(function(){try{o&&un(o);var t=s.return(void 0),n=Promise.resolve(t.value);n.then(b,b),un(n),e(new rn)}catch(r){e(r)}})),a};return i.isMobXFlow=!0,i}),sn);function un(e){w(e.cancel)&&e.cancel()}function ln(e){return!0===(null==e?void 0:e.isMobXFlow)}function cn(e,t){return!!e&&(void 0!==t?!!Qn(e)&&e[W].values_.has(t):Qn(e)||!!e[W]||J(e)||Dt(e)||tt(e))}function hn(e){return cn(e)}function dn(e,t){void 0===t&&(t=void 0),_t();try{return e.apply(t)}finally{St()}}function fn(e){return e[W]}an.bound=G(on);var pn={has:function(e,t){return fn(e).has_(t)},get:function(e,t){return fn(e).get_(t)},set:function(e,t,n){var r;return!!_(t)&&(null==(r=fn(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!_(t)&&(null==(n=fn(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=fn(e).defineProperty_(t,n))||r},ownKeys:function(e){return fn(e).ownKeys_()},preventExtensions:function(e){o(13)}};function gn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function mn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function yn(e,t){var n=lt();try{for(var r=[].concat(e.interceptors_||[]),i=0,s=r.length;i<s&&((t=r[i](t))&&!t.type&&o(14),t);i++);return t}finally{ct(n)}}function vn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function bn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function wn(e,t){var n=lt(),r=e.changeListeners_;if(r){for(var i=0,s=(r=r.slice()).length;i<s;i++)r[i](t);ct(n)}}var _n=Symbol("mobx-keys");var Sn="splice",En="update",kn={get:function(e,t){var n=e[W];return t===W?n:"length"===t?n.getArrayLength_():"string"!==typeof t||isNaN(t)?P(Tn,t)?Tn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[W];return"length"===t&&r.setArrayLength_(n),"symbol"===typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){o(15)}},In=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new Y(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return mn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),bn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!==typeof e||isNaN(e)||e<0)&&o("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&o(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&or(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:void 0===t||null===t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=f),gn(this)){var s=yn(this,{object:this.proxy_,type:Sn,index:e,removedCount:t,added:n});if(!s)return f;t=s.removedCount,n=s.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(i,o)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),s=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var a=0;a<s.length;a++)this.values_[e+n.length+a]=s[a];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=vn(this),s=i||r?{observableKind:"array",object:this.proxy_,type:En,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&wn(this,s)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=vn(this),s=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Sn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&wn(this,s)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&o(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(gn(this)){var i=yn(this,{type:En,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var s=new Array(e+1-n.length),a=0;a<s.length-1;a++)s[a]=void 0;s[s.length-1]=t,this.spliceWithArray_(n.length,0,s)}},e}();function xn(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),y(),hr((function(){var i=new In(n,t,r,!1);x(i.values_,W,i);var s=new Proxy(i.values_,kn);return i.proxy_=s,e&&e.length&&i.spliceWithArray_(0,0,e),s}))}var Tn={clear:function(){return this.splice(0)},replace:function(e){var t=this[W];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=this[W];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray_(e);case 2:return s.spliceWithArray_(e,t)}return s.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[W].spliceWithArray_(e,t,n)},push:function(){for(var e=this[W],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[W].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[W],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return yt.trackingDerivation&&o(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){yt.trackingDerivation&&o(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[W],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Cn(e,t){"function"===typeof Array.prototype[e]&&(Tn[e]=t(e))}function An(e){return function(){var t=this[W];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Dn(e){return function(t,n){var r=this,i=this[W];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function Nn(e){return function(){var t=this,n=this[W];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}Cn("at",An),Cn("concat",An),Cn("flat",An),Cn("includes",An),Cn("indexOf",An),Cn("join",An),Cn("lastIndexOf",An),Cn("slice",An),Cn("toString",An),Cn("toLocaleString",An),Cn("toSorted",An),Cn("toSpliced",An),Cn("with",An),Cn("every",Dn),Cn("filter",Dn),Cn("find",Dn),Cn("findIndex",Dn),Cn("findLast",Dn),Cn("findLastIndex",Dn),Cn("flatMap",Dn),Cn("forEach",Dn),Cn("map",Dn),Cn("some",Dn),Cn("toReversed",Dn),Cn("reduce",Nn),Cn("reduceRight",Nn);var On=T("ObservableArrayAdministration",In);function Pn(e){return S(e)&&On(e[W])}var Ln={},Mn="add",Rn="delete",Fn=function(){function e(e,t,n){var r=this;void 0===t&&(t=ee),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[W]=Ln,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,w(Map)||o(18),hr((function(){r.keysAtom_=X("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!yt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Je(this.has_(e),te,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Ht(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(gn(this)){var r=yn(this,{type:n?En:Mn,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,gn(this))&&!yn(this,{type:Rn,object:this,name:e}))return!1;if(this.has_(e)){var n=vn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Rn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return dn((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&wn(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==yt.UNCHANGED){var r=vn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:En,object:this,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),r&&wn(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,dn((function(){var r,i=new Je(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=vn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Mn,object:this,name:e,newValue:t}:null;r&&wn(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return mr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return mr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=U(this);!(n=r()).done;){var i=n.value,s=i[0],o=i[1];e.call(t,o,s,this)}},t.merge=function(e){var t=this;return Vn(e)&&(e=new Map(e)),dn((function(){E(e)?function(e){var t=Object.keys(e);if(!D)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return d.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):C(e)?(function(e){var t=Object.getPrototypeOf(e),n=Object.getPrototypeOf(t);return null===Object.getPrototypeOf(n)}(e)||o(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!==e&&void 0!==e&&o(20,e)})),this},t.clear=function(){var e=this;dn((function(){ut((function(){for(var t,n=U(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return dn((function(){for(var n,r=function(e){if(C(e)||Vn(e))return e;if(Array.isArray(e))return new Map(e);if(E(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return o(21,e)}(e),i=new Map,s=!1,a=U(t.data_.keys());!(n=a()).done;){var u=n.value;if(!r.has(u))if(t.delete(u))s=!0;else{var l=t.data_.get(u);i.set(u,l)}}for(var c,h=U(r.entries());!(c=h()).done;){var d=c.value,f=d[0],p=d[1],g=t.data_.has(f);if(t.set(f,p),t.data_.has(f)){var m=t.data_.get(f);i.set(f,m),g||(s=!0)}}if(!s)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var y=t.data_.keys(),v=i.keys(),b=y.next(),w=v.next();!b.done;){if(b.value!==w.value){t.keysAtom_.reportChanged();break}b=y.next(),w=v.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return bn(this,e)},t.intercept_=function(e){return mn(this,e)},z(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Vn=T("ObservableMap",Fn);var zn={},Un=function(){function e(e,t,n){var r=this;void 0===t&&(t=ee),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[W]=zn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,w(Set)||o(22),this.enhancer_=function(e,r){return t(e,r,n)},hr((function(){r.atom_=X(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;dn((function(){ut((function(){for(var t,n=U(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=U(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,gn(this))&&!yn(this,{type:Mn,object:this,newValue:e}))return this;if(!this.has(e)){dn((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=!1,r=vn(this),i=r?{observableKind:"set",debugObjectName:this.name_,type:Mn,object:this,newValue:e}:null;n,r&&wn(this,i)}return this},t.delete=function(e){var t=this;if(gn(this)&&!yn(this,{type:Rn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=vn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Rn,object:this,oldValue:e}:null;return dn((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&wn(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return mr({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return mr({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.intersection=function(e){return A(e)?e.intersection(this):new Set(this).intersection(e)},t.union=function(e){return A(e)?e.union(this):new Set(this).union(e)},t.difference=function(e){return new Set(this).difference(e)},t.symmetricDifference=function(e){return A(e)?e.symmetricDifference(this):new Set(this).symmetricDifference(e)},t.isSubsetOf=function(e){return new Set(this).isSubsetOf(e)},t.isSupersetOf=function(e){return new Set(this).isSupersetOf(e)},t.isDisjointFrom=function(e){return A(e)?e.isDisjointFrom(this):new Set(this).isDisjointFrom(e)},t.replace=function(e){var t=this;return Bn(e)&&(e=new Set(e)),dn((function(){Array.isArray(e)||A(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!==e&&void 0!==e&&o("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return bn(this,e)},t.intercept_=function(e){return mn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},z(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Bn=T("ObservableSet",Un),jn=Object.create(null),qn="remove",$n=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=Se),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new Y("ObservableObject.keys"),this.isPlainObject_=E(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Xe)return n.set(t),!0;if(gn(this)){var r=yn(this,{type:En,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==yt.UNCHANGED){var i=vn(this),s=i?{type:En,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),i&&wn(this,s)}return!0},t.get_=function(e){return yt.trackingDerivation&&!P(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),P(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!yt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Je(e in this.target_,te,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(Yn(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[K])&&n[e])return;o(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==d;){var i=c(r,e);if(i){var s=t.make_(this,e,i,r);if(0===s)return;if(1===s)break}r=Object.getPrototypeOf(r)}Wn(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);Yn(this,n,e);var i=n.extend_(this,e,t,r);return i&&Wn(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{_t();var r=this.delete_(e);if(!r)return r;if(gn(this)){var i=yn(this,{object:this.proxy_||this.target_,name:e,type:Mn,newValue:t.value});if(!i)return null;var s=i.newValue;t.value!==s&&(t=B({},t,{value:s}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else h(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{St()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{_t();var i=this.delete_(e);if(!i)return i;if(gn(this)){var s=yn(this,{object:this.proxy_||this.target_,name:e,type:Mn,newValue:t});if(!s)return null;t=s.newValue}var o=Hn(e),a={configurable:!yt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else h(this.target_,e,a);var u=new Je(t,n,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{St()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{_t();var r=this.delete_(e);if(!r)return r;if(gn(this))if(!yn(this,{object:this.proxy_||this.target_,name:e,type:Mn,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=Hn(e),s={configurable:!yt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,s))return!1}else h(this.target_,e,s);this.values_.set(e,new Xe(t)),this.notifyPropertyAddition_(e,void 0)}finally{St()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!P(this.target_,e))return!0;if(gn(this)&&!yn(this,{object:this.proxy_||this.target_,name:e,type:qn}))return null;try{var n;_t();var r,i=vn(this),s=this.values_.get(e),o=void 0;if(!s&&i)o=null==(r=c(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof Je&&(o=s.value_),kt(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(n=n.get(e))||n.set(e in this.target_),i){var a={type:qn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:o,name:e};0,i&&wn(this,a)}}finally{St()}return!0},t.observe_=function(e,t){return bn(this,e)},t.intercept_=function(e){return mn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r=vn(this);if(r){var i=r?{type:Mn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,r&&wn(this,i)}null==(n=this.pendingKeys_)||null==(n=n.get(e))||n.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),N(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Kn(e,t){var n;if(P(e,W))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new $n(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Ee(e):void 0}(t));return I(e,W,i),e}var Gn=T("ObservableObjectAdministration",$n);function Hn(e){return jn[e]||(jn[e]={get:function(){return this[W].getObservablePropValue_(e)},set:function(t){return this[W].setObservablePropValue_(e,t)}})}function Qn(e){return!!S(e)&&Gn(e[W])}function Wn(e,t,n){var r;null==(r=e.target_[K])||delete r[n]}function Yn(e,t,n){}var Jn,Xn,Zn=ir(0),er=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),tr=0,nr=function(){};Jn=nr,Xn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Jn.prototype,Xn):void 0!==Jn.prototype.__proto__?Jn.prototype.__proto__=Xn:Jn.prototype=Xn;var rr=function(e){function t(t,n,r,i){var s;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),s=e.call(this)||this,hr((function(){var e=new In(r,n,i,!0);e.proxy_=s,x(s,W,e),t&&t.length&&s.spliceWithArray(0,0,t),er&&Object.defineProperty(s,"0",Zn)})),s}j(t,e);var n=t.prototype;return n.concat=function(){this[W].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Pn(e)?e.slice():e})))},n[Symbol.iterator]=function(){var e=this,t=0;return mr({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},z(t,[{key:"length",get:function(){return this[W].getArrayLength_()},set:function(e){this[W].setArrayLength_(e)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(nr);function ir(e){return{enumerable:!1,configurable:!0,get:function(){return this[W].get_(e)},set:function(t){this[W].set_(e,t)}}}function sr(e){h(rr.prototype,""+e,ir(e))}function or(e){if(e>tr){for(var t=tr;t<e+100;t++)sr(t);tr=e}}function ar(e,t,n){return new rr(e,t,n)}function ur(e,t){if("object"===typeof e&&null!==e){if(Pn(e))return void 0!==t&&o(23),e[W].atom_;if(Bn(e))return e.atom_;if(Vn(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||o(25,t,cr(e)),n}if(Qn(e)){if(!t)return o(26);var r=e[W].values_.get(t);return r||o(27,t,cr(e)),r}if(J(e)||tt(e)||Dt(e))return e}else if(w(e)&&Dt(e[W]))return e[W];o(28)}function lr(e,t){return e||o(29),void 0!==t?lr(ur(e,t)):J(e)||tt(e)||Dt(e)||Vn(e)||Bn(e)?e:e[W]?e[W]:void o(24,e)}function cr(e,t){var n;if(void 0!==t)n=ur(e,t);else{if(Bt(e))return e.name;n=Qn(e)||Vn(e)||Bn(e)?lr(e):ur(e)}return n.name_}function hr(e){var t=lt(),n=We(!0);_t();try{return e()}finally{St(),Ye(n),ct(t)}}Object.entries(Tn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&I(rr.prototype,t,n)})),or(1e3);var dr=d.toString;function fr(e,t,n){return void 0===n&&(n=-1),pr(e,t,n)}function pr(e,t,n,r,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var s=typeof e;if("function"!==s&&"object"!==s&&"object"!=typeof t)return!1;var o=dr.call(e);if(o!==dr.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=gr(e),t=gr(t);var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,l=t.constructor;if(u!==l&&!(w(u)&&u instanceof u&&w(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!pr(e[c],t[c],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!P(t,h=d[c])||!pr(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function gr(e){return Pn(e)?e.slice():C(e)||Vn(e)||A(e)||Bn(e)?Array.from(e.entries()):e}function mr(e){return e[Symbol.iterator]=yr,e}function yr(){return this}if(["Symbol","Map","Set"].forEach((function(e){"undefined"===typeof u()[e]&&o("MobX requires global '"+e+"' to be available or polyfilled")})),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:cr},$mobx:W}),!i.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!function(e,t,n){return hr((function(){var r=Kn(e,n)[W];null!=t||(t=function(e){return P(e,K)||I(e,K,B({},e[K])),e[K]}(e)),N(t).forEach((function(e){return r.make_(e,t[e])}))})),e})throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var vr=n(950);function br(e){e()}function wr(e){return en(e)}var _r=!1;function Sr(){return _r}var Er,kr,Ir=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(r,i){n-r.registeredAt>=e&&(t.finalize(r.value),t.registrations.delete(i))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),xr=new("undefined"!==typeof FinalizationRegistry?FinalizationRegistry:Ir)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null})),Tr=n(461);function Cr(e){e.reaction=new It("observer".concat(e.name),(function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)}))}function Ar(e,t){if(void 0===t&&(t="observed"),Sr())return e();var n=i.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(e){return xr.unregister(r),r.onStoreChange=e,r.reaction||(Cr(r),r.stateVersion=Symbol()),function(){var e;r.onStoreChange=null,null===(e=r.reaction)||void 0===e||e.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var s,o,a=n.current;if(a.reaction||(Cr(a),xr.register(n,a,a)),i.useDebugValue(a.reaction,wr),(0,Tr.useSyncExternalStore)(a.subscribe,a.getSnapshot,a.getSnapshot),a.reaction.track((function(){try{s=e()}catch(t){o=t}})),o)throw o;return s}var Dr="function"===typeof Symbol&&Symbol.for,Nr=null!==(kr=null===(Er=Object.getOwnPropertyDescriptor((function(){}),"name"))||void 0===Er?void 0:Er.configurable)&&void 0!==kr&&kr,Or=Dr?Symbol.for("react.forward_ref"):"function"===typeof i.forwardRef&&(0,i.forwardRef)((function(e){return null})).$$typeof,Pr=Dr?Symbol.for("react.memo"):"function"===typeof i.memo&&(0,i.memo)((function(e){return null})).$$typeof;function Lr(e,t){var n;if(Pr&&e.$$typeof===Pr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(Sr())return e;var r=null!==(n=null===t||void 0===t?void 0:t.forwardRef)&&void 0!==n&&n,s=e,o=e.displayName||e.name;if(Or&&e.$$typeof===Or&&(r=!0,"function"!==typeof(s=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,u,l=function(e,t){return Ar((function(){return s(e,t)}),o)};return l.displayName=e.displayName,Nr&&Object.defineProperty(l,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(l.contextTypes=e.contextTypes),r&&(l=(0,i.forwardRef)(l)),l=(0,i.memo)(l),a=e,u=l,Object.keys(a).forEach((function(e){Rr[e]||Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(a,e))})),l}var Mr,Rr={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};(function(e){e||(e=br),Xt({reactionScheduler:e})})(vr.unstable_batchedUpdates);Mr=xr.finalizeAllImmediately;var Fr=n(122),Vr=n.n(Fr);function zr(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ur.apply(this,arguments)}function Br(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}const jr={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"};class qr{static async load(e,t){var n;const r=e.libraries?e.libraries.split(","):[],i=this.serializeParams(e);this.listeners.push(t),null!=(n=window.google)&&null!=(n=n.maps)&&n.importLibrary?(this.serializedApiParams||(this.loadingStatus=jr.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=i,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==i&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const s=["maps",...r];await Promise.all(s.map((e=>google.maps.importLibrary(e))))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary)return void console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");let t=null;const n=()=>t||(t=new Promise(((t,n)=>{var r;const i=document.createElement("script"),s=new URLSearchParams;for(const[o,a]of Object.entries(e)){const e=o.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase()));s.set(e,a)}s.set("loading","async"),s.set("callback","__googleMapsCallback__"),i.async=!0,i.src="https://maps.googleapis.com/maps/api/js?"+s.toString(),i.nonce=(null==(r=document.querySelector("script[nonce]"))?void 0:r.nonce)||"",i.onerror=()=>{this.loadingStatus=jr.FAILED,this.notifyLoadingStatusListeners(),n(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=jr.LOADED,this.notifyLoadingStatusListeners(),t()},window.gm_authFailure=()=>{this.loadingStatus=jr.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=jr.LOADING,this.notifyLoadingStatusListeners(),document.head.append(i)})),t);google.maps.importLibrary=e=>n().then((()=>google.maps.importLibrary(e)))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}qr.loadingStatus=jr.NOT_LOADED,qr.serializedApiParams=void 0,qr.listeners=[];const $r=["onLoad","apiKey","version","libraries"],Kr=["children"],Gr=i.createContext(null);const Hr=e=>{const{children:t}=e,n=Br(e,Kr),{mapInstances:r,addMapInstance:s,removeMapInstance:o,clearMapInstances:a}=function(){const[e,t]=(0,i.useState)({});return{mapInstances:e,addMapInstance:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";t((t=>Ur({},t,{[n]:e})))},removeMapInstance:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";t((t=>Br(t,[e].map(zr))))},clearMapInstances:()=>{t({})}}}(),{status:u,loadedLibraries:l,importLibrary:c}=function(e){const{onLoad:t,apiKey:n,version:r,libraries:s=[]}=e,o=Br(e,$r),[a,u]=(0,i.useState)(qr.loadingStatus),[l,c]=(0,i.useReducer)(((e,t)=>Ur({},e,{[t.name]:t.value})),{}),h=(0,i.useMemo)((()=>null==s?void 0:s.join(",")),[s]),d=(0,i.useMemo)((()=>JSON.stringify(Ur({apiKey:n,version:r},o))),[n,r,o]),f=(0,i.useCallback)((async e=>{var t;if(l[e])return l[e];if(null==(t=google)||null==(t=t.maps)||!t.importLibrary)throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const n=await window.google.maps.importLibrary(e);return c({name:e,value:n}),n}),[l]);return(0,i.useEffect)((()=>{(async()=>{try{const e=Ur({key:n},o);r&&(e.v=r),(null==h?void 0:h.length)>0&&(e.libraries=h),void 0===e.solutionChannel?e.solutionChannel="GMP_visgl_rgmlibrary_v1_default":""===e.solutionChannel&&delete e.solutionChannel,await qr.load(e,(e=>u(e)));for(const t of["core","maps",...s])await f(t);t&&t()}catch(e){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",e)}})()}),[n,h,d]),{status:a,loadedLibraries:l,importLibrary:f}}(n),h=(0,i.useMemo)((()=>({mapInstances:r,addMapInstance:s,removeMapInstance:o,clearMapInstances:a,status:u,loadedLibraries:l,importLibrary:c})),[r,s,o,a,u,l,c]);return i.createElement(Gr.Provider,{value:h},t)};function Qr(e,t,n){const r={type:e,map:t,detail:{},stoppable:!1,stop:()=>{}};if(Yr.includes(e)){const e=r,n=t.getCenter(),i=t.getZoom(),s=t.getHeading()||0,o=t.getTilt()||0,a=t.getBounds();return n&&a&&Number.isFinite(i)||console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),e.detail={center:(null==n?void 0:n.toJSON())||{lat:0,lng:0},zoom:i||0,heading:s,tilt:o,bounds:(null==a?void 0:a.toJSON())||{north:90,east:180,south:-90,west:-180}},e}if(Jr.includes(e)){var i;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const e=r;return e.domEvent=n.domEvent,e.stoppable=!0,e.stop=()=>n.stop(),e.detail={latLng:(null==(i=n.latLng)?void 0:i.toJSON())||null,placeId:n.placeId},e}return r}const Wr={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Yr=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Jr=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Xr=Object.keys(Wr);function Zr(e,t){const n=(0,i.useRef)(void 0);n.current&&Fr(t,n.current)||(n.current=t),(0,i.useEffect)(e,n.current)}const ei=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","zoomControl","zoomControlOptions"]);function ti(){var e;return(null==(e=(0,i.useContext)(Gr))?void 0:e.status)||jr.NOT_LOADED}function ni(e){return function(e){return!(!e||"object"!==typeof e)&&"lat"in e&&"lng"in e&&Number.isFinite(e.lat)&&Number.isFinite(e.lng)}(e)?e:e.toJSON()}const ri=()=>i.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"}},i.createElement("h2",null,"Error: AuthFailure"),i.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",i.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."));function ii(){return ti()===jr.LOADED}function si(e){const t=function(){const[,e]=(0,i.useReducer)((e=>e+1),0);return e}(),n=(0,i.useRef)({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return(0,i.useEffect)((()=>{if(!e)return;const r=google.maps.event.addListener(e,"bounds_changed",(()=>{!function(e,t){const n=e.getCenter(),r=e.getZoom(),i=e.getHeading()||0,s=e.getTilt()||0,o=e.getBounds();n&&o&&Number.isFinite(r)||console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(t.current,{center:(null==n?void 0:n.toJSON())||{lat:0,lng:0},zoom:r||0,heading:i,tilt:s})}(e,n),t()}));return()=>r.remove()}),[e,t]),n}const oi=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps"],ai=["padding"];class ui{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,t){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(t)}}function li(e,t){const n=ii(),[r,s]=(0,i.useState)(null),[o,a]=function(){const[e,t]=(0,i.useState)(null);return[e,(0,i.useCallback)((e=>t(e)),[t])]}(),u=si(r),{id:l,defaultBounds:c,defaultCenter:h,defaultZoom:d,defaultHeading:f,defaultTilt:p,reuseMaps:g}=e,m=Br(e,oi),y=void 0!==e.zoom||void 0!==e.defaultZoom,v=void 0!==e.center||void 0!==e.defaultCenter;c||y&&v||console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!m.center&&h&&(m.center=h),!m.zoom&&Number.isFinite(d)&&(m.zoom=d),!m.heading&&Number.isFinite(f)&&(m.heading=f),!m.tilt&&Number.isFinite(p)&&(m.tilt=p);for(const i of Object.keys(m))void 0===m[i]&&delete m[i];const b=(0,i.useRef)();return(0,i.useEffect)((()=>{if(!o||!n)return;const{addMapInstance:r,removeMapInstance:i}=t,a=e.mapId,h=a||"default";let d,f;if(g&&ui.has(h)?(f=ui.pop(h),d=f.getDiv(),o.appendChild(d),f.setOptions(m),setTimeout((()=>f.setCenter(f.getCenter())),0)):(d=document.createElement("div"),d.style.height="100%",o.appendChild(d),f=new google.maps.Map(d,m)),s(f),r(f,l),c){const{padding:e}=c,t=Br(c,ai);f.fitBounds(t,e)}else y&&v||f.fitBounds({east:180,west:-180,south:-90,north:90});if(b.current){const{mapId:e,cameraState:t}=b.current;e!==a&&f.setOptions(t)}return()=>{b.current={mapId:a,cameraState:u.current},d.remove(),g?ui.push(h,f):google.maps.event.clearInstanceListeners(f),s(null),i(l)}}),[o,n,l,e.mapId]),[r,a,u]}ui.entries={};const ci=i.createContext(null),hi=e=>{const{children:t,id:n,className:r,style:s}=e,o=(0,i.useContext)(Gr),a=ti();if(!o)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[u,l,c]=li(e,o);!function(e,t,n){const r=n.center?ni(n.center):null;let s=null,o=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(s=r.lat,o=r.lng);const a=Number.isFinite(n.zoom)?n.zoom:null,u=Number.isFinite(n.heading)?n.heading:null,l=Number.isFinite(n.tilt)?n.tilt:null;(0,i.useLayoutEffect)((()=>{if(!e)return;const n={};let r=!1;null===s||null===o||t.current.center.lat===s&&t.current.center.lng===o||(n.center={lat:s,lng:o},r=!0),null!==a&&t.current.zoom!==a&&(n.zoom=a,r=!0),null!==u&&t.current.heading!==u&&(n.heading=u,r=!0),null!==l&&t.current.tilt!==l&&(n.tilt=l,r=!0),r&&e.moveCamera(n)}))}(u,c,e),function(e,t){for(const n of Xr){const r=t[n],s=Wr[n];(0,i.useEffect)((()=>{if(!e)return;if(!r)return;const t=google.maps.event.addListener(e,s,(t=>{r(Qr(s,e,t))}));return()=>t.remove()}),[e,s,r])}}(u,e),function(e,t){const n={},r=Object.keys(t);for(const i of r)ei.has(i)&&(n[i]=t[i]);Zr((()=>{e&&e.setOptions(n)}),[n])}(u,e);const h=function(e,t){const{viewport:n,viewState:r}=t,s=!!n;return(0,i.useLayoutEffect)((()=>{if(!e||!r)return;const{latitude:t,longitude:n,bearing:i,pitch:s,zoom:o}=r;e.moveCamera({center:{lat:t,lng:n},heading:i,tilt:s,zoom:o+1})}),[e,r]),s}(u,e),d=!!e.controlled;(0,i.useEffect)((()=>{if(u)return h&&u.setOptions({disableDefaultUI:!0}),(h||d)&&u.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{u.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}}),[u,h,d,e.gestureHandling,e.keyboardShortcuts]);const f=e.center?ni(e.center):null;let p=null,g=null;f&&Number.isFinite(f.lat)&&Number.isFinite(f.lng)&&(p=f.lat,g=f.lng);const m=(0,i.useMemo)((()=>{var t,n,r,i,s;return{center:{lat:null!=(t=p)?t:0,lng:null!=(n=g)?n:0},zoom:null!=(r=e.zoom)?r:0,heading:null!=(i=e.heading)?i:0,tilt:null!=(s=e.tilt)?s:0}}),[p,g,e.zoom,e.heading,e.tilt]);(0,i.useLayoutEffect)((()=>{if(!u||!d)return;u.moveCamera(m);const e=u.addListener("bounds_changed",(()=>{u.moveCamera(m)}));return()=>e.remove()}),[u,d,m]);const y=(0,i.useMemo)((()=>Ur({width:"100%",height:"100%",position:"relative",zIndex:h?-1:0},s)),[s,h]),v=(0,i.useMemo)((()=>({map:u})),[u]);return a===jr.AUTH_FAILURE?i.createElement("div",{style:Ur({position:"relative"},r?{}:y),className:r},i.createElement(ri,null)):i.createElement("div",Ur({ref:l,"data-testid":"map",style:r?void 0:y,className:r},n?{id:n}:{}),u?i.createElement(ci.Provider,{value:v},t):null)};hi.deckGLViewProps=!0;const di=new Set;function fi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=JSON.stringify(t);di.has(r)||(di.add(r),console.error(...t))}const pi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=(0,i.useContext)(Gr),{map:n}=(0,i.useContext)(ci)||{};if(null===t)return fi("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=t;return null!==e?r[e]||null:n||(r.default||null)};function gi(e){const t=ii(),n=(0,i.useContext)(Gr);return(0,i.useEffect)((()=>{t&&n&&n.importLibrary(e)}),[t,n,e]),(null==n?void 0:n.loadedLibraries[e])||null}function mi(e,t,n){if(null!=t&&"object"!==typeof t)throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const r=e.style;if(null!=n){for(const e in n)if(n.hasOwnProperty(e)&&(null==t||!t.hasOwnProperty(e))){0===e.indexOf("--")?r.setProperty(e,""):"float"===e?r.cssFloat="":r[e]=""}if(null!=t)for(const e in t){const i=t[e];t.hasOwnProperty(e)&&n[e]!==i&&yi(r,e,i)}}else{if(null==t)return;for(const e in t)t.hasOwnProperty(e)&&yi(r,e,t[e])}}function yi(e,t,n){const r=0===t.indexOf("--");var i;null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||(i=t,vi.has(i))?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}const vi=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function bi(e,t,n){(0,i.useEffect)((()=>{if(!e||!t||!n)return;const r=google.maps.event.addListener(e,t,n);return()=>r.remove()}),[e,t,n])}function wi(e,t,n){(0,i.useEffect)((()=>{e&&(e[t]=n)}),[e,t,n])}const _i=i.createContext(null);(0,i.forwardRef)(((e,t)=>{const{children:n}=e,[r,s]=function(e){const[t,n]=(0,i.useState)(null),[r,s]=(0,i.useState)(null),o=(0,i.useRef)(null),a=pi(),u=gi("marker"),{children:l,className:c,style:h,onClick:d,onDrag:f,onDragStart:p,onDragEnd:g,collisionBehavior:m,clickable:y,draggable:v,position:b,title:w,zIndex:_}=e,S=i.Children.count(l);return(0,i.useEffect)((()=>{if(!a||!u)return;const e=new u.AdvancedMarkerElement;e.map=a,n(e);let t=null;return S>0&&(t=document.createElement("div"),e.content=t,s(t)),()=>{var r;e.map=null,null==(r=t)||r.remove(),n(null),s(null)}}),[a,u,S]),(0,i.useEffect)((()=>{t&&t.content&&(t.content.className=c||"")}),[t,c]),wi(r,"className",null!=c?c:""),(0,i.useEffect)((()=>{r&&(mi(r,h||null,o.current),o.current=h||null)}),[r,c,h]),wi(t,"position",b),wi(t,"title",null!=w?w:""),wi(t,"zIndex",_),wi(t,"collisionBehavior",m),(0,i.useEffect)((()=>{t&&(t.gmpDraggable=void 0!==v?v:!!(f||p||g))}),[t,v,f,g,p]),(0,i.useEffect)((()=>{t&&(t.gmpClickable=void 0!==y?y:!!d)}),[t,y,d]),bi(t,"click",d),bi(t,"drag",f),bi(t,"dragstart",p),bi(t,"dragend",g),[t,r]}(e),o=(0,i.useMemo)((()=>r?{marker:r}:null),[r]);return(0,i.useImperativeHandle)(t,(()=>r),[r]),s?i.createElement(_i.Provider,{value:o},(0,vr.createPortal)(n,s)):null}));const Si=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];(0,i.forwardRef)(((e,t)=>{const n=function(e){const[t,n]=(0,i.useState)(null),r=pi(),{onClick:s,onDrag:o,onDragStart:a,onDragEnd:u,onMouseOver:l,onMouseOut:c}=e,h=Br(e,Si),{position:d,draggable:f}=h;return(0,i.useEffect)((()=>{if(!r)return void(void 0===r&&console.error("<Marker> has to be inside a Map component."));const e=new google.maps.Marker(h);return e.setMap(r),n(e),()=>{e.setMap(null),n(null)}}),[r]),(0,i.useEffect)((()=>{if(!t)return;const e=t,n=google.maps.event;return s&&n.addListener(e,"click",s),o&&n.addListener(e,"drag",o),a&&n.addListener(e,"dragstart",a),u&&n.addListener(e,"dragend",u),l&&n.addListener(e,"mouseover",l),c&&n.addListener(e,"mouseout",c),t.setDraggable(Boolean(f)),()=>{n.clearInstanceListeners(e)}}),[t,f,s,o,a,u,l,c]),(0,i.useEffect)((()=>{t&&h&&t.setOptions(h)}),[t,h]),(0,i.useEffect)((()=>{!f&&d&&t&&t.setPosition(d)}),[f,d,t]),t}(e);return(0,i.useImperativeHandle)(t,(()=>n),[n]),i.createElement(i.Fragment,null)}));const Ei=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ki{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=Ei[15&n];if(!i)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new ki(o,s,i,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=Ei.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-o%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+o+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Ii(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:o}=this,a=[0,i.length-1,0],u=[];for(;a.length;){const l=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=o){for(let o=h;o<=c;o++){const a=s[2*o],l=s[2*o+1];a>=e&&a<=n&&l>=t&&l<=r&&u.push(i[o])}continue}const d=h+c>>1,f=s[2*d],p=s[2*d+1];f>=e&&f<=n&&p>=t&&p<=r&&u.push(i[d]),(0===l?e<=f:t<=p)&&(a.push(h),a.push(d-1),a.push(1-l)),(0===l?n>=f:r>=p)&&(a.push(d+1),a.push(c),a.push(1-l))}return u}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:s}=this,o=[0,r.length-1,0],a=[],u=n*n;for(;o.length;){const l=o.pop()||0,c=o.pop()||0,h=o.pop()||0;if(c-h<=s){for(let n=h;n<=c;n++)Ai(i[2*n],i[2*n+1],e,t)<=u&&a.push(r[n]);continue}const d=h+c>>1,f=i[2*d],p=i[2*d+1];Ai(f,p,e,t)<=u&&a.push(r[d]),(0===l?e-n<=f:t-n<=p)&&(o.push(h),o.push(d-1),o.push(1-l)),(0===l?e+n>=f:t+n>=p)&&(o.push(d+1),o.push(c),o.push(1-l))}return a}}function Ii(e,t,n,r,i,s){if(i-r<=n)return;const o=r+i>>1;xi(e,t,o,r,i,s),Ii(e,t,n,r,o-1,1-s),Ii(e,t,n,o+1,i,1-s)}function xi(e,t,n,r,i,s){for(;i>r;){if(i-r>600){const o=i-r+1,a=n-r+1,u=Math.log(o),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(o-l)/o)*(a-o/2<0?-1:1);xi(e,t,n,Math.max(r,Math.floor(n-a*l/o+c)),Math.min(i,Math.floor(n+(o-a)*l/o+c)),s)}const o=t[2*n+s];let a=r,u=i;for(Ti(e,t,r,n),t[2*i+s]>o&&Ti(e,t,r,i);a<u;){for(Ti(e,t,a,u),a++,u--;t[2*a+s]<o;)a++;for(;t[2*u+s]>o;)u--}t[2*r+s]===o?Ti(e,t,r,u):(u++,Ti(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function Ti(e,t,n,r){Ci(e,n,r),Ci(t,2*n,2*r),Ci(t,2*n+1,2*r+1)}function Ci(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ai(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}const Di={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},Ni=Math.fround||(Oi=new Float32Array(1),e=>(Oi[0]=+e,Oi[0]));var Oi;const Pi=3,Li=5,Mi=6;class Ri{constructor(e){this.options=Object.assign(Object.create(Di),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const s=[];for(let a=0;a<e.length;a++){const t=e[a];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=Ni(zi(n)),o=Ni(Ui(r));s.push(i,o,1/0,a,-1,1),this.options.reduce&&s.push(0)}let o=this.trees[r+1]=this._createTree(s);t&&console.timeEnd(i);for(let a=r;a>=n;a--){const e=+Date.now();o=this.trees[a]=this._createTree(this._cluster(o,a)),t&&console.log("z%d: %d clusters in %dms",a,o.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,s],t),o=this.getClusters([-180,r,i,s],t);return e.concat(o)}const o=this.trees[this._limitZoom(t)],a=o.range(zi(n),Ui(s),zi(i),Ui(r)),u=o.data,l=[];for(const c of a){const e=this.stride*c;l.push(u[e+Li]>1?Fi(u,e,this.clusterProps):this.points[u[e+Pi]])}return l}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const s=i.data;if(t*this.stride>=s.length)throw new Error(r);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=s[t*this.stride],u=s[t*this.stride+1],l=i.within(a,u,o),c=[];for(const h of l){const t=h*this.stride;s[t+4]===e&&c.push(s[t+Li]>1?Fi(s,t,this.clusterProps):this.points[s[t+Pi]])}if(0===c.length)throw new Error(r);return c}getLeaves(e,t,n){t=t||10,n=n||0;const r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:s,radius:o}=this.options,a=o/s,u=(n-a)/i,l=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((t-a)/i,u,(t+1+a)/i,l),r.data,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-a/i,u,1,l),r.data,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,a/i,l),r.data,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const s=this.getChildren(t);for(const o of s){const t=o.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(o),e.length===n)break}return i}_createTree(e){const t=new ki(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,i,s){for(const o of e){const e=o*this.stride,a=t[e+Li]>1;let u,l,c;if(a)u=Vi(t,e,this.clusterProps),l=t[e],c=t[e+1];else{const n=this.points[t[e+Pi]];u=n.properties;const[r,i]=n.geometry.coordinates;l=zi(r),c=Ui(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(l*i-n)),Math.round(this.options.extent*(c*i-r))]],tags:u};let d;d=a||this.options.generateId?t[e+Pi]:this.points[t[e+Pi]].id,void 0!==d&&(h.id=d),s.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:s}=this.options,o=n/(r*Math.pow(2,t)),a=e.data,u=[],l=this.stride;for(let c=0;c<a.length;c+=l){if(a[c+2]<=t)continue;a[c+2]=t;const n=a[c],r=a[c+1],h=e.within(a[c],a[c+1],o),d=a[c+Li];let f=d;for(const e of h){const n=e*l;a[n+2]>t&&(f+=a[n+Li])}if(f>d&&f>=s){let e,s=n*d,o=r*d,p=-1;const g=(c/l<<5)+(t+1)+this.points.length;for(const n of h){const r=n*l;if(a[r+2]<=t)continue;a[r+2]=t;const u=a[r+Li];s+=a[r]*u,o+=a[r+1]*u,a[r+4]=g,i&&(e||(e=this._map(a,c,!0),p=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,r)))}a[c+4]=g,u.push(s/f,o/f,1/0,g,-1,f),i&&u.push(p)}else{for(let e=0;e<l;e++)u.push(a[c+e]);if(f>1)for(const e of h){const n=e*l;if(!(a[n+2]<=t)){a[n+2]=t;for(let e=0;e<l;e++)u.push(a[n+e])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+Li]>1){const r=this.clusterProps[e[t+Mi]];return n?Object.assign({},r):r}const r=this.points[e[t+Pi]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function Fi(e,t,n){return{type:"Feature",id:e[t+Pi],properties:Vi(e,t,n),geometry:{type:"Point",coordinates:[Bi(e[t]),ji(e[t+1])]}}}function Vi(e,t,n){const r=e[t+Li],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,s=e[t+Mi],o=-1===s?{}:Object.assign({},n[s]);return Object.assign(o,{cluster:!0,cluster_id:e[t+Pi],point_count:r,point_count_abbreviated:i})}function zi(e){return e/360+.5}function Ui(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Bi(e){return 360*(e-.5)}function ji(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function qi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}class $i{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class Ki{constructor(e){let{markers:t,position:n}=e;this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(0===this.markers.length&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend($i.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>$i.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&($i.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Gi{constructor(e){let{maxZoom:t=16}=e;this.maxZoom=t}noop(e){let{markers:t}=e;return Hi(t)}}const Hi=e=>e.map((e=>new Ki({position:$i.getPosition(e),markers:[e]})));class Qi extends Gi{constructor(e){var{maxZoom:t,radius:n=60}=e,r=qi(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new Ri(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!Vr()(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const n=this.markers.map((e=>{const t=$i.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(n)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!Vr()(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){let{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){let{geometry:{coordinates:[t,n]},properties:r}=e;if(r.cluster)return new Ki({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:n,lng:t}});const i=r.marker;return new Ki({markers:[i],position:$i.getPosition(i)})}}class Wi{constructor(e,t){this.markers={sum:e.length};const n=t.map((e=>e.count)),r=n.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class Yi{render(e,t,n){let{count:r,position:i}=e;const s=`<svg fill="${r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${r}</text>\n</svg>`,o=`Cluster of ${r} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+r;if($i.isAdvancedMarkerAvailable(n)){const e=(new DOMParser).parseFromString(s,"image/svg+xml").documentElement;e.setAttribute("transform","translate(0 25)");const t={map:n,position:i,zIndex:a,title:o,content:e};return new google.maps.marker.AdvancedMarkerElement(t)}const u={position:i,zIndex:a,title:o,icon:{url:`data:image/svg+xml;base64,${btoa(s)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class Ji{constructor(){!function(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}(Ji,google.maps.OverlayView)}}var Xi;!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(Xi||(Xi={}));const Zi=(e,t,n)=>{n.fitBounds(t.bounds)};class es extends Ji{constructor(e){let{map:t,markers:n=[],algorithmOptions:r={},algorithm:i=new Qi(r),renderer:s=new Yi,onClusterClick:o=Zi}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=i,this.renderer=s,this.onClusterClick=o,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return-1!==n&&($i.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach((e=>{n=this.removeMarker(e,!0)||n})),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Xi.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||void 0==n){const e=new Set;for(const r of t)1==r.markers.length&&e.add(r.markers[0]);const n=[];for(const t of this.clusters)null!=t.marker&&(1==t.markers.length?e.has(t.marker)||$i.setMap(t.marker,null):n.push(t.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>n.forEach((e=>$i.setMap(e,null)))))}google.maps.event.trigger(this,Xi.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>$i.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){const e=new Wi(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach((e=>$i.setMap(e,null))),this.onClusterClick&&n.marker.addListener("click",(e=>{google.maps.event.trigger(this,Xi.CLUSTER_CLICK,n),this.onClusterClick(e,n,t)}))),$i.setMap(n.marker,t)}))}}const ts=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ns={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0,l=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|u>>6,d=63&u;a||(d=64,s||(h=64)),r.push(n[l],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ts(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new rs;const u=t<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const is=function(e){return function(e){const t=ts(e);return ns.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ss=function(e){try{return ns.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function os(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=os(e[n],t[n]));return e}const as=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,us=()=>{try{return as()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/visiomap",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&ss(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},ls=e=>{const t=(e=>{var t,n;return null===(n=null===(t=us())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},cs=()=>{var e;return null===(e=us())||void 0===e?void 0:e.config};class hs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ds(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function fs(){return"undefined"!==typeof window||ps()}function ps(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function gs(){return!function(){var e;const t=null===(e=us())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ms(){try{return"object"===typeof indexedDB}catch(e){return!1}}class ys extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vs.prototype.create)}}class vs{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(bs,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new ys(n,s,t)}}const bs=/\{\$([^}]+)}/g;function ws(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _s(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ss(n)&&Ss(s)){if(!_s(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ss(e){return null!==e&&"object"===typeof e}function Es(e,t){const n=new ks(e,t);return n.subscribe.bind(n)}class ks{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Is),void 0===r.error&&(r.error=Is),void 0===r.complete&&(r.complete=Is);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Is(){}function xs(e){return e&&e._delegate?e._delegate:e}class Ts{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cs="[DEFAULT]";class As{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new hs;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Er){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Cs?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Er){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs;return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ds{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new As(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ns=[];var Os;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Os||(Os={}));const Ps={debug:Os.DEBUG,verbose:Os.VERBOSE,info:Os.INFO,warn:Os.WARN,error:Os.ERROR,silent:Os.SILENT},Ls=Os.INFO,Ms={[Os.DEBUG]:"log",[Os.VERBOSE]:"log",[Os.INFO]:"info",[Os.WARN]:"warn",[Os.ERROR]:"error"},Rs=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ms[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Fs{constructor(e){this.name=e,this._logLevel=Ls,this._logHandler=Rs,this._userLogHandler=null,Ns.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Os))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ps[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.DEBUG,...t),this._logHandler(this,Os.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.VERBOSE,...t),this._logHandler(this,Os.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.INFO,...t),this._logHandler(this,Os.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.WARN,...t),this._logHandler(this,Os.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Os.ERROR,...t),this._logHandler(this,Os.ERROR,...t)}}const Vs=(e,t)=>t.some((t=>e instanceof t));let zs,Us;const Bs=new WeakMap,js=new WeakMap,qs=new WeakMap,$s=new WeakMap,Ks=new WeakMap;let Gs={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return js.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Hs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Us||(Us=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ys(this),n),Ws(Bs.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ws(e.apply(Ys(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ys(this),t,...r);return qs.set(s,t.sort?t.sort():[t]),Ws(s)}}function Qs(e){return"function"===typeof e?Hs(e):(e instanceof IDBTransaction&&function(e){if(js.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));js.set(e,t)}(e),Vs(e,zs||(zs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Gs):e)}function Ws(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ws(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Bs.set(t,e)})).catch((()=>{})),Ks.set(t,e),t}(e);if($s.has(e))return $s.get(e);const t=Qs(e);return t!==e&&($s.set(e,t),Ks.set(t,e)),t}const Ys=e=>Ks.get(e);const Js=["get","getKey","getAll","getAllKeys","count"],Xs=["put","add","delete","clear"],Zs=new Map;function eo(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Zs.get(t))return Zs.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Xs.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Js.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Zs.set(t,s),s}Gs=(e=>({...e,get:(t,n,r)=>eo(t,n)||e.get(t,n,r),has:(t,n)=>!!eo(t,n)||e.has(t,n)}))(Gs);class to{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const no="@firebase/app",ro="0.10.8",io=new Fs("@firebase/app"),so="@firebase/app-compat",oo="@firebase/analytics-compat",ao="@firebase/analytics",uo="@firebase/app-check-compat",lo="@firebase/app-check",co="@firebase/auth",ho="@firebase/auth-compat",fo="@firebase/database",po="@firebase/database-compat",go="@firebase/functions",mo="@firebase/functions-compat",yo="@firebase/installations",vo="@firebase/installations-compat",bo="@firebase/messaging",wo="@firebase/messaging-compat",_o="@firebase/performance",So="@firebase/performance-compat",Eo="@firebase/remote-config",ko="@firebase/remote-config-compat",Io="@firebase/storage",xo="@firebase/storage-compat",To="@firebase/firestore",Co="@firebase/vertexai-preview",Ao="@firebase/firestore-compat",Do="firebase",No="[DEFAULT]",Oo={[no]:"fire-core",[so]:"fire-core-compat",[ao]:"fire-analytics",[oo]:"fire-analytics-compat",[lo]:"fire-app-check",[uo]:"fire-app-check-compat",[co]:"fire-auth",[ho]:"fire-auth-compat",[fo]:"fire-rtdb",[po]:"fire-rtdb-compat",[go]:"fire-fn",[mo]:"fire-fn-compat",[yo]:"fire-iid",[vo]:"fire-iid-compat",[bo]:"fire-fcm",[wo]:"fire-fcm-compat",[_o]:"fire-perf",[So]:"fire-perf-compat",[Eo]:"fire-rc",[ko]:"fire-rc-compat",[Io]:"fire-gcs",[xo]:"fire-gcs-compat",[To]:"fire-fst",[Ao]:"fire-fst-compat",[Co]:"fire-vertex","fire-js":"fire-js",[Do]:"fire-js-all"},Po=new Map,Lo=new Map,Mo=new Map;function Ro(e,t){try{e.container.addComponent(t)}catch(n){io.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Fo(e,t){e.container.addOrOverwriteComponent(t)}function Vo(e){const t=e.name;if(Mo.has(t))return io.debug(`There were multiple attempts to register component ${t}.`),!1;Mo.set(t,e);for(const n of Po.values())Ro(n,e);for(const n of Lo.values())Ro(n,e);return!0}function zo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Uo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:No;zo(e,t).clearInstance(n)}function Bo(e){return void 0!==e.options}function jo(e){return void 0!==e.settings}function qo(){Mo.clear()}const $o=new vs("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ko{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ts("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $o.create("app-deleted",{appName:this._name})}}class Go extends Ko{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Zo(no,ro,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Xo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $o.create("server-app-deleted")}}const Ho="10.12.5";function Qo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:No,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $o.create("bad-app-name",{appName:String(i)});if(n||(n=cs()),!n)throw $o.create("no-options");const s=Po.get(i);if(s){if(_s(n,s.options)&&_s(r,s.config))return s;throw $o.create("duplicate-app",{appName:i})}const o=new Ds(i);for(const u of Mo.values())o.addComponent(u);const a=new Ko(n,r,o);return Po.set(i,a),a}function Wo(e,t){if(fs()&&!ps())throw $o.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Bo(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw $o.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Lo.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new Ds(i);for(const l of Mo.values())a.addComponent(l);const u=new Go(n,t,i,a);return Lo.set(i,u),u}function Yo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:No;const t=Po.get(e);if(!t&&e===No&&cs())return Qo();if(!t)throw $o.create("no-app",{appName:e});return t}function Jo(){return Array.from(Po.values())}async function Xo(e){let t=!1;const n=e.name;if(Po.has(n))t=!0,Po.delete(n);else if(Lo.has(n)){e.decRefCount()<=0&&(Lo.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Zo(e,t,n){var r;let i=null!==(r=Oo[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void io.warn(e.join(" "))}Vo(new Ts(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function ea(e,t){if(null!==e&&"function"!==typeof e)throw $o.create("invalid-log-argument");!function(e,t){for(const n of Ns){let r=null;t&&t.level&&(r=Ps[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Os[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function ta(e){var t;t=e,Ns.forEach((e=>{e.setLogLevel(t)}))}const na="firebase-heartbeat-database",ra=1,ia="firebase-heartbeat-store";let sa=null;function oa(){return sa||(sa=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ws(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ws(o.result),e.oldVersion,e.newVersion,Ws(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(na,ra,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ia)}catch(n){console.warn(n)}}}).catch((e=>{throw $o.create("idb-open",{originalErrorMessage:e.message})}))),sa}async function aa(e,t){try{const n=(await oa()).transaction(ia,"readwrite"),r=n.objectStore(ia);await r.put(t,ua(e)),await n.done}catch(n){if(n instanceof ys)io.warn(n.message);else{const e=$o.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});io.warn(e.message)}}}function ua(e){return`${e.name}!${e.options.appId}`}class la{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ha(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ca();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ca(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),da(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),da(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=is(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ca(){return(new Date).toISOString().substring(0,10)}class ha{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ms()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await oa()).transaction(ia),n=await t.objectStore(ia).get(ua(e));return await t.done,n}catch(t){if(t instanceof ys)io.warn(t.message);else{const e=$o.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});io.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return aa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return aa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function da(e){return is(JSON.stringify({version:2,heartbeats:e})).length}var fa;fa="",Vo(new Ts("platform-logger",(e=>new to(e)),"PRIVATE")),Vo(new Ts("heartbeat",(e=>new la(e)),"PRIVATE")),Zo(no,ro,fa),Zo(no,ro,"esm2017"),Zo("fire-js","");var pa,ga,ma="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ya={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),u=s(1),l=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(u)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var l=s.add(r);0>=l.l(e)&&(i=i.add(n),s=l),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(s=o(n)).j(t);h(l)||0<l.l(e);)l=(s=o(n-=r)).j(t);c(s)&&(s=u),i=i.add(s),e=f(e,l)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var u=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=u*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=u*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ga=ya.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var u=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+u),n);8>u?(u=o(Math.pow(n,u)),i=i.j(u).add(o(l))):i=(i=i.j(r)).add(o(l))}return i},pa=ya.Integer=r}).apply("undefined"!==typeof ma?ma:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var va,ba,wa,_a,Sa,Ea,ka,Ia,xa,Ta="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ca={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ta&&Ta];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function u(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:u).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function k(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new x),(e=>e.reset()));class x{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(N)}};var N=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){E(n)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function O(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:R[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,P);var R={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),V=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++V,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function j(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new z(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),K={};function G(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):H(e,t,n,!1,r,i)}function H(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,u=Z(e);if(u||(e[$]=u=new B(e)),(n=u.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):H(e,t,n,!0,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])j(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(j(n,e),0==n.h&&(n.src=null,t[$]=null)):U(e)}}}function J(e){return e in K?K[e]:K[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;_(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.fa&&j(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,O),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ue(e){O.call(this),this.h=e,this.g={}}h(ue,O);var le=[];function ce(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}ue.prototype.N=function(){ue.aa.N.call(this),ce(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function be(){P.call(this,"c")}h(ve,P),h(be,P);var we={},_e=null;function Se(){return _e=_e||new ne}function Ee(e){P.call(this,we.La,e)}function ke(e){const t=Se();re(t,new Ee(t))}function Ie(e,t){P.call(this,we.STAT_EVENT,e),this.stat=t}function xe(e){const t=Se();re(t,new Ie(t,e))}function Te(e,t){P.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function De(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Ee,P),we.STAT_EVENT="statevent",h(Ie,P),we.Ma="timingevent",h(Te,P),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Ne,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ue(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}h(Le,pe),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},Ne=new Le;var Fe={},Ve={};function ze(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Re,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(le[0]=i.toString()),i=le);for(var s=0;s<i.length;s++){var o=G(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ve:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ve:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(l(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||un(e.j,e)}function He(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),xe(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(l(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=l[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=l[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,u=r.L;u&&(a.I=u),a.B&&(Ke(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=l[0]&&"close"!=l[0]||cn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?cn(n,7):Wt(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}ke()}catch(c){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Kt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=Kt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=d||7==t||ke(),Ke(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Gt(this.g);e="";var s=r.length,o=4==Kt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){He(this),Ge(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(u)){var c=u;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,xe(12),He(this),Ge(this);break e}De(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=je(this,a),e==Ve){4==d&&(this.s=4,xe(14),n=!1),De(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,xe(15),De(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}De(this.i,this.l,e,null),Qe(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,xe(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,xe(11))}}else De(this.i,this.l,a,"[Invalid Chunked Response]"),He(this),Ge(this)}else De(this.i,this.l,a,null),Qe(this,a);4==d&&He(this),this.o&&!this.J&&(4==d?un(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Kt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),He(this),Ge(this)}}}catch(d){}},Me.prototype.cancel=function(){this.J=!0,He(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(ke(),xe(17)),He(this),this.s=2,Ge(this)):$e(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,ut(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lt(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ut(this,t[4]),this.l=dt(t[5]||"",!0),lt(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ut(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function lt(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),It(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new _t(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ht(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){St(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return St(e),t=xt(e,t),e.g.has(t)}function It(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Dt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Lt(e)}function Lt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){St(this),this.i=null,e=xt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(xt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,kt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Dt,pe),Dt.prototype.g=function(){return new Nt(this.l,this.j)},Dt.prototype.i=(gt={},function(){return gt}),h(Nt,ne),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Lt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Lt(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var Vt=/^https?$/i,zt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),qt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Kt(e)||2!=e.Z()))if(e.u&&4==Kt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Kt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Vt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Kt(e)?e.g.statusText:""}catch(u){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){$t(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Kt(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Na){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||D(),C||(T(),C=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&Rt(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ct(t,n,e)})),e.l&&rt({},(function(e,n){ct(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const u=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{At(u,e,"req"+n+"_")}catch(s){r&&r(u)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||D(),C||(T(),C=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(l(e.Fa,e),ln(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Rt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function un(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Te(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(l(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=c(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else xe(2);e.G=0,e.l&&e.l.sa(t),hn(e),Jt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ut(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&ut(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Dt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?ge(this.o):ge(Ne),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(zt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?jt(this):this.bb())},e.bb=function(){jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){xe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Rt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,ze(i,n,null)):ze(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),xe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Wt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Xt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,mn.aa.N.call(this)},h(yn,ve),h(vn,be),h(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,xa=Ca.createWebChannelTransport=function(){return new gn},Ia=Ca.getStatEventTarget=function(){return Se()},ka=Ca.Event=we,Ea=Ca.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,Sa=Ca.ErrorCode=Oe,Pe.COMPLETE="complete",_a=Ca.EventType=Pe,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,wa=Ca.WebChannel=me,ba=Ca.FetchXmlHttpFactory=Dt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,va=Ca.XhrIo=Ft}).apply("undefined"!==typeof Ta?Ta:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Aa="@firebase/firestore";class Da{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Da.UNAUTHENTICATED=new Da(null),Da.GOOGLE_CREDENTIALS=new Da("google-credentials-uid"),Da.FIRST_PARTY=new Da("first-party-uid"),Da.MOCK_USER=new Da("mock-user");let Na="10.12.5";const Oa=new Fs("@firebase/firestore");function Pa(){return Oa.logLevel}function La(e){if(Oa.logLevel<=Os.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fa);Oa.debug(`Firestore (${Na}): ${e}`,...i)}}function Ma(e){if(Oa.logLevel<=Os.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fa);Oa.error(`Firestore (${Na}): ${e}`,...i)}}function Ra(e){if(Oa.logLevel<=Os.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Fa);Oa.warn(`Firestore (${Na}): ${e}`,...i)}}function Fa(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Va(){const e=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Ma(e),new Error(e)}function za(e,t){e||Va()}function Ua(e,t){return e}const Ba={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ja extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $a{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ka{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Da.UNAUTHENTICATED)))}shutdown(){}}class Ga{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ha{constructor(e){this.t=e,this.currentUser=Da.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new qa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qa,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{La("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(La("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qa)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(La("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(za("string"==typeof t.accessToken),new $a(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return za(null===e||"string"==typeof e),new Da(e)}}class Qa{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Da.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Wa{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Qa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Da.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ya{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ja{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&La("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,La("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{La("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):La("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(za("string"==typeof e.token),this.R=e.token,new Ya(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Xa(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Za{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Xa(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function eu(e,t){return e<t?-1:e>t?1:0}function tu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function nu(e){return e+"\0"}class ru{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ja(Ba.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ja(Ba.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ja(Ba.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ja(Ba.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ru.fromMillis(Date.now())}static fromDate(e){return ru.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ru(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?eu(this.nanoseconds,e.nanoseconds):eu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class iu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new iu(e)}static min(){return new iu(new ru(0,0))}static max(){return new iu(new ru(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class su{constructor(e,t,n){void 0===t?t=0:t>e.length&&Va(),void 0===n?n=e.length-t:n>e.length-t&&Va(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===su.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof su?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ou extends su{construct(e,t,n){return new ou(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ja(Ba.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new ou(e)}static emptyPath(){return new ou([])}}const au=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class uu extends su{construct(e,t,n){return new uu(e,t,n)}static isValidIdentifier(e){return au.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),uu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new uu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ja(Ba.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ja(Ba.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ja(Ba.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ja(Ba.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new uu(t)}static emptyPath(){return new uu([])}}class lu{constructor(e){this.path=e}static fromPath(e){return new lu(ou.fromString(e))}static fromName(e){return new lu(ou.fromString(e).popFirst(5))}static empty(){return new lu(ou.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ou.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ou.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lu(new ou(e.slice()))}}class cu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function hu(e){return e.fields.find((e=>2===e.kind))}function du(e){return e.fields.filter((e=>2!==e.kind))}cu.UNKNOWN_ID=-1;class fu{constructor(e,t){this.fieldPath=e,this.kind=t}}class pu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pu(0,yu.min())}}function gu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=iu.fromTimestamp(1e9===r?new ru(n+1,0):new ru(n,r));return new yu(i,lu.empty(),t)}function mu(e){return new yu(e.readTime,e.key,-1)}class yu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new yu(iu.min(),lu.empty(),-1)}static max(){return new yu(iu.max(),lu.empty(),-1)}}function vu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=lu.comparator(e.documentKey,t.documentKey),0!==n?n:eu(e.largestBatchId,t.largestBatchId))}const bu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _u(e){if(e.code!==Ba.FAILED_PRECONDITION||e.message!==bu)throw e;La("LocalStore","Unexpectedly lost primary lease")}class Su{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Va(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Su(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Su?t:Su.resolve(t)}catch(e){return Su.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Su.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Su.reject(t)}static resolve(e){return new Su(((t,n)=>{t(e)}))}static reject(e){return new Su(((t,n)=>{n(e)}))}static waitFor(e){return new Su(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Su.resolve(!1);for(const n of e)t=t.next((e=>e?Su.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Su(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const u=a;t(e[u]).next((e=>{s[u]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Su(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Eu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new qa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Tu(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ou(t.target.error);this.V.reject(new Tu(e,n))}}static open(e,t,n,r){try{return new Eu(t,e.transaction(r,n))}catch(e){throw new Tu(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(La("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Au(t)}}class ku{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===ku.S(ds())&&Ma("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return La("SimpleDb","Removing database:",e),Du(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ms())return!1;if(ku.C())return!0;const e=ds(),t=ku.S(e),n=0<t&&t<10,r=Iu(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(La("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Tu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ja(Ba.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ja(Ba.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Tu(e,r))},r.onupgradeneeded=e=>{La("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{La("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=Eu.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Su.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(La("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Iu(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class xu{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Du(this.B.delete())}}class Tu extends ja{constructor(e,t){super(Ba.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cu(e){return"IndexedDbTransactionError"===e.name}class Au{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(La("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(La("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Du(n)}add(e){return La("SimpleDb","ADD",this.store.name,e,e),Du(this.store.add(e))}get(e){return Du(this.store.get(e)).next((t=>(void 0===t&&(t=null),La("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return La("SimpleDb","DELETE",this.store.name,e),Du(this.store.delete(e))}count(){return La("SimpleDb","COUNT",this.store.name),Du(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Su(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Su(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){La("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Su(((n,r)=>{t.onerror=e=>{const t=Ou(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Su(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new xu(i),o=t(i.primaryKey,i.value,s);if(o instanceof Su){const e=o.catch((e=>(s.done(),Su.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Su.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Du(e){return new Su(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ou(e.target.error);n(t)}}))}let Nu=!1;function Ou(e){const t=ku.S(ds());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ja("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nu||(Nu=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Pu{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){La("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{La("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){Cu(e)?La("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await _u(e)}await this.X(6e4)}))}}class Lu{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Su.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return La("IndexBackfiller",`Processing collection: ${t}`),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(La("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=mu(t);vu(r,n)>0&&(n=r)})),new yu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Mu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ru(e){return null==e}function Fu(e){return 0===e&&1/e==-1/0}function Vu(e){return"number"==typeof e&&Number.isInteger(e)&&!Fu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function zu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Bu(t)),t=Uu(e.get(n),t);return Bu(t)}function Uu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Bu(e){return e+"\x01\x01"}function ju(e){const t=e.length;if(za(t>=2),2===t)return za("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ou.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Va(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Va()}s=t+2}return new ou(r)}Mu.oe=-1;const qu=["userId","batchId"];function $u(e,t){return[e,zu(t)]}function Ku(e,t,n){return[e,zu(t),n]}const Gu={},Hu=["prefixPath","collectionGroup","readTime","documentId"],Qu=["prefixPath","collectionGroup","documentId"],Wu=["collectionGroup","readTime","prefixPath","documentId"],Yu=["canonicalId","targetId"],Ju=["targetId","path"],Xu=["path","targetId"],Zu=["collectionId","parent"],el=["indexId","uid"],tl=["uid","sequenceNumber"],nl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rl=["indexId","uid","orderedDocumentKey"],il=["userId","collectionPath","documentId"],sl=["userId","collectionPath","largestBatchId"],ol=["userId","collectionGroup","largestBatchId"],al=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ul=[...al,"documentOverlays"],ll=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cl=ll,hl=[...cl,"indexConfiguration","indexState","indexEntries"],dl=hl,fl=[...hl,"globals"];class pl extends wu{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function gl(e,t){const n=Ua(e);return ku.F(n._e,t)}function ml(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function vl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class bl{constructor(e,t){this.comparator=e,this.root=t||_l.EMPTY}insert(e,t){return new bl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_l.BLACK,null,null))}remove(e){return new bl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_l.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _l{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:_l.RED,this.left=null!=r?r:_l.EMPTY,this.right=null!=i?i:_l.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new _l(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _l.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return _l.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_l.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Va();if(this.right.isRed())throw Va();const e=this.left.check();if(e!==this.right.check())throw Va();return e+(this.isRed()?0:1)}}_l.EMPTY=null,_l.RED=!0,_l.BLACK=!1,_l.EMPTY=new class{constructor(){this.size=0}get key(){throw Va()}get value(){throw Va()}get color(){throw Va()}get left(){throw Va()}get right(){throw Va()}copy(e,t,n,r,i){return this}insert(e,t,n){return new _l(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sl{constructor(e){this.comparator=e,this.data=new bl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new El(this.data.getIterator())}getIteratorFrom(e){return new El(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Sl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Sl(this.comparator);return t.data=e,t}}class El{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kl(e){return e.hasNext()?e.getNext():void 0}class Il{constructor(e){this.fields=e,e.sort(uu.comparator)}static empty(){return new Il([])}unionWith(e){let t=new Sl(uu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Il(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class xl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new xl("Invalid base64 string: "+e):e}}(e);return new Tl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Tl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return eu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tl.EMPTY_BYTE_STRING=new Tl("");const Cl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Al(e){if(za(!!e),"string"==typeof e){let t=0;const n=Cl.exec(e);if(za(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Dl(e.seconds),nanos:Dl(e.nanos)}}function Dl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nl(e){return"string"==typeof e?Tl.fromBase64String(e):Tl.fromUint8Array(e)}function Ol(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pl(e){const t=e.mapValue.fields.__previous_value__;return Ol(t)?Pl(t):t}function Ll(e){const t=Al(e.mapValue.fields.__local_write_time__.timestampValue);return new ru(t.seconds,t.nanos)}class Ml{constructor(e,t,n,r,i,s,o,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=u}}class Rl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Rl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Rl&&e.projectId===this.projectId&&e.database===this.database}}const Fl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vl={nullValue:"NULL_VALUE"};function zl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ol(e)?4:Zl(e)?9007199254740991:10:Va()}function Ul(e,t){if(e===t)return!0;const n=zl(e);if(n!==zl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ll(e).isEqual(Ll(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Al(e.timestampValue),r=Al(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Nl(e.bytesValue).isEqual(Nl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dl(e.geoPointValue.latitude)===Dl(t.geoPointValue.latitude)&&Dl(e.geoPointValue.longitude)===Dl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dl(e.integerValue)===Dl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Dl(e.doubleValue),r=Dl(t.doubleValue);return n===r?Fu(n)===Fu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return tu(e.arrayValue.values||[],t.arrayValue.values||[],Ul);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ml(n)!==ml(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ul(n[i],r[i])))return!1;return!0}(e,t);default:return Va()}}function Bl(e,t){return void 0!==(e.values||[]).find((e=>Ul(e,t)))}function jl(e,t){if(e===t)return 0;const n=zl(e),r=zl(t);if(n!==r)return eu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return eu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Dl(e.integerValue||e.doubleValue),r=Dl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ql(e.timestampValue,t.timestampValue);case 4:return ql(Ll(e),Ll(t));case 5:return eu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Nl(e),r=Nl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=eu(n[i],r[i]);if(0!==e)return e}return eu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=eu(Dl(e.latitude),Dl(t.latitude));return 0!==n?n:eu(Dl(e.longitude),Dl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=jl(n[i],r[i]);if(e)return e}return eu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Fl.mapValue&&t===Fl.mapValue)return 0;if(e===Fl.mapValue)return 1;if(t===Fl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=eu(r[o],s[o]);if(0!==e)return e;const t=jl(n[r[o]],i[s[o]]);if(0!==t)return t}return eu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Va()}}function ql(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return eu(e,t);const n=Al(e),r=Al(t),i=eu(n.seconds,r.seconds);return 0!==i?i:eu(n.nanos,r.nanos)}function $l(e){return Kl(e)}function Kl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Al(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Nl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return lu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Kl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Kl(e.fields[i])}`;return n+"}"}(e.mapValue):Va()}function Gl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Hl(e){return!!e&&"integerValue"in e}function Ql(e){return!!e&&"arrayValue"in e}function Wl(e){return!!e&&"nullValue"in e}function Yl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jl(e){return!!e&&"mapValue"in e}function Xl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return yl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Xl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Xl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Zl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ec(e){return"nullValue"in e?Vl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Gl(Rl.empty(),lu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Va()}function tc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Gl(Rl.empty(),lu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Fl:Va()}function nc(e,t){const n=jl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function rc(e,t){const n=jl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ic{constructor(e){this.value=e}static empty(){return new ic({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(t)}setAll(e){let t=uu.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Xl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Jl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ul(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){yl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ic(Xl(this.value))}}function sc(e){const t=[];return yl(e.fields,((e,n)=>{const r=new uu([e]);if(Jl(n)){const e=sc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Il(t)}class oc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new oc(e,0,iu.min(),iu.min(),iu.min(),ic.empty(),0)}static newFoundDocument(e,t,n,r){return new oc(e,1,t,iu.min(),n,r,0)}static newNoDocument(e,t){return new oc(e,2,t,iu.min(),iu.min(),ic.empty(),0)}static newUnknownDocument(e,t){return new oc(e,3,t,iu.min(),iu.min(),ic.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(iu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ic.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ic.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=iu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof oc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ac{constructor(e,t){this.position=e,this.inclusive=t}}function uc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?lu.comparator(lu.fromName(o.referenceValue),n.key):jl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function lc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ul(e.position[n],t.position[n]))return!1;return!0}class cc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function hc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dc{}class fc extends dc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ec(e,t,n):"array-contains"===t?new Tc(e,n):"in"===t?new Cc(e,n):"not-in"===t?new Ac(e,n):"array-contains-any"===t?new Dc(e,n):new fc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new kc(e,n):new Ic(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(jl(t,this.value)):null!==t&&zl(this.value)===zl(t)&&this.matchesComparison(jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Va()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pc extends dc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new pc(e,t)}matches(e){return gc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function gc(e){return"and"===e.op}function mc(e){return"or"===e.op}function yc(e){return vc(e)&&gc(e)}function vc(e){for(const t of e.filters)if(t instanceof pc)return!1;return!0}function bc(e){if(e instanceof fc)return e.field.canonicalString()+e.op.toString()+$l(e.value);if(yc(e))return e.filters.map((e=>bc(e))).join(",");{const t=e.filters.map((e=>bc(e))).join(",");return`${e.op}(${t})`}}function wc(e,t){return e instanceof fc?function(e,t){return t instanceof fc&&e.op===t.op&&e.field.isEqual(t.field)&&Ul(e.value,t.value)}(e,t):e instanceof pc?function(e,t){return t instanceof pc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&wc(n,t.filters[r])),!0)}(e,t):void Va()}function _c(e,t){const n=e.filters.concat(t);return pc.create(n,e.op)}function Sc(e){return e instanceof fc?function(e){return`${e.field.canonicalString()} ${e.op} ${$l(e.value)}`}(e):e instanceof pc?function(e){return e.op.toString()+" {"+e.getFilters().map(Sc).join(" ,")+"}"}(e):"Filter"}class Ec extends fc{constructor(e,t,n){super(e,t,n),this.key=lu.fromName(n.referenceValue)}matches(e){const t=lu.comparator(e.key,this.key);return this.matchesComparison(t)}}class kc extends fc{constructor(e,t){super(e,"in",t),this.keys=xc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ic extends fc{constructor(e,t){super(e,"not-in",t),this.keys=xc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>lu.fromName(e.referenceValue)))}class Tc extends fc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ql(t)&&Bl(t.arrayValue,this.value)}}class Cc extends fc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bl(this.value.arrayValue,t)}}class Ac extends fc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bl(this.value.arrayValue,t)}}class Dc extends fc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ql(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Bl(this.value.arrayValue,e)))}}class Nc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Oc(e){return new Nc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pc(e){const t=Ua(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>bc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ru(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>$l(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>$l(e))).join(",")),t.ue=e}return t.ue}function Lc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lc(e.startAt,t.startAt)&&lc(e.endAt,t.endAt)}function Mc(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Rc(e,t){return e.filters.filter((e=>e instanceof fc&&e.field.isEqual(t)))}function Fc(e,t,n){let r=Vl,i=!0;for(const s of Rc(e,t)){let e=Vl,t=!0;switch(s.op){case"<":case"<=":e=ec(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Vl}nc({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];nc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Vc(e,t,n){let r=Fl,i=!0;for(const s of Rc(e,t)){let e=Fl,t=!0;switch(s.op){case">=":case">":e=tc(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Fl}rc({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];rc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class zc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Uc(e,t,n,r,i,s,o,a){return new zc(e,t,n,r,i,s,o,a)}function Bc(e){return new zc(e)}function jc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qc(e){return null!==e.collectionGroup}function $c(e){const t=Ua(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Sl(uu.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new cc(r,n))})),e.has(uu.keyField().canonicalString())||t.ce.push(new cc(uu.keyField(),n))}return t.ce}function Kc(e){const t=Ua(e);return t.le||(t.le=Gc(t,$c(e))),t.le}function Gc(e,t){if("F"===e.limitType)return Oc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new cc(e.field,t)}));const n=e.endAt?new ac(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ac(e.startAt.position,e.startAt.inclusive):null;return Oc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Hc(e,t){const n=e.filters.concat([t]);return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Qc(e,t,n){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wc(e,t){return Lc(Kc(e),Kc(t))&&e.limitType===t.limitType}function Yc(e){return`${Pc(Kc(e))}|lt:${e.limitType}`}function Jc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Sc(e))).join(", ")}]`),Ru(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>$l(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>$l(e))).join(",")),`Target(${t})`}(Kc(e))}; limitType=${e.limitType})`}function Xc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):lu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of $c(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=uc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$c(e),t))&&!(e.endAt&&!function(e,t,n){const r=uc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$c(e),t))}(e,t)}function Zc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function eh(e){return(t,n)=>{let r=!1;for(const i of $c(e)){const e=th(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function th(e,t,n){const r=e.field.isKeyField()?lu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jl(r,i):Va()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Va()}}class nh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){yl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return vl(this.inner)}size(){return this.innerSize}}const rh=new bl(lu.comparator);function ih(){return rh}const sh=new bl(lu.comparator);function oh(){let e=sh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ah(e){let t=sh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function uh(){return ch()}function lh(){return ch()}function ch(){return new nh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const hh=new bl(lu.comparator),dh=new Sl(lu.comparator);function fh(){let e=dh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ph=new Sl(eu);function gh(){return ph}function mh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(t)?"-0":t}}function yh(e){return{integerValue:""+e}}function vh(e,t){return Vu(t)?yh(t):mh(e,t)}class bh{constructor(){this._=void 0}}function wh(e,t,n){return e instanceof Eh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ol(t)&&(t=Pl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof kh?Ih(e,t):e instanceof xh?Th(e,t):function(e,t){const n=Sh(e,t),r=Ah(n)+Ah(e.Pe);return Hl(n)&&Hl(e.Pe)?yh(r):mh(e.serializer,r)}(e,t)}function _h(e,t,n){return e instanceof kh?Ih(e,t):e instanceof xh?Th(e,t):n}function Sh(e,t){return e instanceof Ch?function(e){return Hl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Eh extends bh{}class kh extends bh{constructor(e){super(),this.elements=e}}function Ih(e,t){const n=Dh(t);for(const r of e.elements)n.some((e=>Ul(e,r)))||n.push(r);return{arrayValue:{values:n}}}class xh extends bh{constructor(e){super(),this.elements=e}}function Th(e,t){let n=Dh(t);for(const r of e.elements)n=n.filter((e=>!Ul(e,r)));return{arrayValue:{values:n}}}class Ch extends bh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ah(e){return Dl(e.integerValue||e.doubleValue)}function Dh(e){return Ql(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Nh{constructor(e,t){this.field=e,this.transform=t}}class Oh{constructor(e,t){this.version=e,this.transformResults=t}}class Ph{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ph}static exists(e){return new Ph(void 0,e)}static updateTime(e){return new Ph(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mh{}function Rh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gh(e.key,Ph.none()):new Bh(e.key,e.data,Ph.none());{const n=e.data,r=ic.empty();let i=new Sl(uu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new jh(e.key,r,new Il(i.toArray()),Ph.none())}}function Fh(e,t,n){e instanceof Bh?function(e,t,n){const r=e.value.clone(),i=$h(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof jh?function(e,t,n){if(!Lh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$h(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(qh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vh(e,t,n,r){return e instanceof Bh?function(e,t,n,r){if(!Lh(e.precondition,t))return n;const i=e.value.clone(),s=Kh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof jh?function(e,t,n,r){if(!Lh(e.precondition,t))return n;const i=Kh(e.fieldTransforms,r,t),s=t.data;return s.setAll(qh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Lh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Sh(r.transform,e||null);null!=i&&(null===n&&(n=ic.empty()),n.set(r.field,i))}return n||null}function Uh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&tu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof kh&&t instanceof kh||e instanceof xh&&t instanceof xh?tu(e.elements,t.elements,Ul):e instanceof Ch&&t instanceof Ch?Ul(e.Pe,t.Pe):e instanceof Eh&&t instanceof Eh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bh extends Mh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jh extends Mh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function $h(e,t,n){const r=new Map;za(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,_h(o,a,n[i]))}return r}function Kh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,wh(e,s,t))}return r}class Gh extends Mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hh extends Mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Fh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=lh();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Rh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(iu.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),fh())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,((e,t)=>Uh(e,t)))&&tu(this.baseMutations,e.baseMutations,((e,t)=>Uh(e,t)))}}class Wh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){za(e.mutations.length===n.length);let r=hh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Wh(e,t,n,r)}}class Yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Xh,Zh;function ed(e){switch(e){default:return Va();case Ba.CANCELLED:case Ba.UNKNOWN:case Ba.DEADLINE_EXCEEDED:case Ba.RESOURCE_EXHAUSTED:case Ba.INTERNAL:case Ba.UNAVAILABLE:case Ba.UNAUTHENTICATED:return!1;case Ba.INVALID_ARGUMENT:case Ba.NOT_FOUND:case Ba.ALREADY_EXISTS:case Ba.PERMISSION_DENIED:case Ba.FAILED_PRECONDITION:case Ba.ABORTED:case Ba.OUT_OF_RANGE:case Ba.UNIMPLEMENTED:case Ba.DATA_LOSS:return!0}}function td(e){if(void 0===e)return Ma("GRPC error has no .code"),Ba.UNKNOWN;switch(e){case Xh.OK:return Ba.OK;case Xh.CANCELLED:return Ba.CANCELLED;case Xh.UNKNOWN:return Ba.UNKNOWN;case Xh.DEADLINE_EXCEEDED:return Ba.DEADLINE_EXCEEDED;case Xh.RESOURCE_EXHAUSTED:return Ba.RESOURCE_EXHAUSTED;case Xh.INTERNAL:return Ba.INTERNAL;case Xh.UNAVAILABLE:return Ba.UNAVAILABLE;case Xh.UNAUTHENTICATED:return Ba.UNAUTHENTICATED;case Xh.INVALID_ARGUMENT:return Ba.INVALID_ARGUMENT;case Xh.NOT_FOUND:return Ba.NOT_FOUND;case Xh.ALREADY_EXISTS:return Ba.ALREADY_EXISTS;case Xh.PERMISSION_DENIED:return Ba.PERMISSION_DENIED;case Xh.FAILED_PRECONDITION:return Ba.FAILED_PRECONDITION;case Xh.ABORTED:return Ba.ABORTED;case Xh.OUT_OF_RANGE:return Ba.OUT_OF_RANGE;case Xh.UNIMPLEMENTED:return Ba.UNIMPLEMENTED;case Xh.DATA_LOSS:return Ba.DATA_LOSS;default:return Va()}}(Zh=Xh||(Xh={}))[Zh.OK=0]="OK",Zh[Zh.CANCELLED=1]="CANCELLED",Zh[Zh.UNKNOWN=2]="UNKNOWN",Zh[Zh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zh[Zh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zh[Zh.NOT_FOUND=5]="NOT_FOUND",Zh[Zh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zh[Zh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zh[Zh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zh[Zh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zh[Zh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zh[Zh.ABORTED=10]="ABORTED",Zh[Zh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zh[Zh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zh[Zh.INTERNAL=13]="INTERNAL",Zh[Zh.UNAVAILABLE=14]="UNAVAILABLE",Zh[Zh.DATA_LOSS=15]="DATA_LOSS";let nd=null;function rd(){return new TextEncoder}const id=new pa([4294967295,4294967295],0);function sd(e){const t=rd().encode(e),n=new ga;return n.update(t),new Uint8Array(n.digest())}function od(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new pa([n,r],0),new pa([i,s],0)]}class ad{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ud(`Invalid padding: ${t}`);if(n<0)throw new ud(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ud(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ud(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=pa.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(pa.fromNumber(n)));return 1===r.compare(id)&&(r=new pa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=sd(e),[n,r]=od(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ad(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=sd(e),[n,r]=od(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ld{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ld(iu.min(),r,new bl(eu),ih(),fh())}}class cd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new cd(n,t,fh(),fh(),fh())}}class hd{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class dd{constructor(e,t){this.targetId=e,this.me=t}}class fd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class pd{constructor(){this.fe=0,this.ge=yd(),this.pe=Tl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=fh(),t=fh(),n=fh();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Va()}})),new cd(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=yd()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,za(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gd{constructor(e){this.Le=e,this.Be=new Map,this.ke=ih(),this.qe=md(),this.Qe=new bl(eu)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Va()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Mc(i))if(0===n){const e=new lu(i.path);this.Ue(t,e,oc.newNoDocument(e,iu.min()))}else za(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==nd||nd.et(function(e,t,n,r,i){var s,o,a,u,l,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(u=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==u?u:0,padding:null!==(c=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Nl(n).toUint8Array()}catch(e){if(e instanceof xl)return Ra("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ad(s,r,i)}catch(e){return Ra(e instanceof ud?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Mc(i.target)){const t=new lu(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,oc.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=fh();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new ld(e,t,this.Qe,this.ke,n);return this.ke=ih(),this.qe=md(),this.Qe=new bl(eu),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new pd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Sl(eu),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||La("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pd),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function md(){return new bl(lu.comparator)}function yd(){return new bl(lu.comparator)}const vd={asc:"ASCENDING",desc:"DESCENDING"},bd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wd={and:"AND",or:"OR"};class _d{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sd(e,t){return e.useProto3Json||Ru(t)?t:{value:t}}function Ed(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Id(e,t){return Ed(e,t.toTimestamp())}function xd(e){return za(!!e),iu.fromTimestamp(function(e){const t=Al(e);return new ru(t.seconds,t.nanos)}(e))}function Td(e,t){return Cd(e,t).canonicalString()}function Cd(e,t){const n=function(e){return new ou(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ad(e){const t=ou.fromString(e);return za(Jd(t)),t}function Dd(e,t){return Td(e.databaseId,t.path)}function Nd(e,t){const n=Ad(t);if(n.get(1)!==e.databaseId.projectId)throw new ja(Ba.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ja(Ba.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new lu(Md(n))}function Od(e,t){return Td(e.databaseId,t)}function Pd(e){const t=Ad(e);return 4===t.length?ou.emptyPath():Md(t)}function Ld(e){return new ou(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Md(e){return za(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rd(e,t,n){return{name:Dd(e,t),fields:n.value.mapValue.fields}}function Fd(e,t,n){const r=Nd(e,t.name),i=xd(t.updateTime),s=t.createTime?xd(t.createTime):iu.min(),o=new ic({mapValue:{fields:t.fields}}),a=oc.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Vd(e,t){let n;if(t instanceof Bh)n={update:Rd(e,t.key,t.value)};else if(t instanceof Gh)n={delete:Dd(e,t.key)};else if(t instanceof jh)n={update:Rd(e,t.key,t.data),updateMask:Yd(t.fieldMask)};else{if(!(t instanceof Hh))return Va();n={verify:Dd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Eh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ch)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Va()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Id(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Va()}(e,t.precondition)),n}function zd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ph.updateTime(xd(e.updateTime)):void 0!==e.exists?Ph.exists(e.exists):Ph.none()}(t.currentDocument):Ph.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)za("REQUEST_TIME"===t.setToServerValue),n=new Eh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new kh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new xh(e)}else"increment"in t?n=new Ch(e,t.increment):Va();const r=uu.fromServerFormat(t.fieldPath);return new Nh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Nd(e,t.update.name),s=new ic({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Il(t.map((e=>uu.fromServerFormat(e))))}(t.updateMask);return new jh(i,s,e,n,r)}return new Bh(i,s,n,r)}if(t.delete){const r=Nd(e,t.delete);return new Gh(r,n)}if(t.verify){const r=Nd(e,t.verify);return new Hh(r,n)}return Va()}function Ud(e,t){return{documents:[Od(e,t.path)]}}function Bd(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Od(e,i);const s=function(e){if(0!==e.length)return Wd(pc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Hd(e.field),direction:$d(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function jd(e){let t=Pd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){za(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=qd(e);return t instanceof pc&&yc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new cc(Qd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ru(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new ac(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new ac(n,t)}(n.endAt)),Uc(t,i,o,s,a,"F",u,l)}function qd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Qd(e.unaryFilter.field);return fc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Qd(e.unaryFilter.field);return fc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qd(e.unaryFilter.field);return fc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Qd(e.unaryFilter.field);return fc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Va()}}(e):void 0!==e.fieldFilter?function(e){return fc.create(Qd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Va()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return pc.create(e.compositeFilter.filters.map((e=>qd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Va()}}(e.compositeFilter.op))}(e):Va()}function $d(e){return vd[e]}function Kd(e){return bd[e]}function Gd(e){return wd[e]}function Hd(e){return{fieldPath:e.canonicalString()}}function Qd(e){return uu.fromServerFormat(e.fieldPath)}function Wd(e){return e instanceof fc?function(e){if("=="===e.op){if(Yl(e.value))return{unaryFilter:{field:Hd(e.field),op:"IS_NAN"}};if(Wl(e.value))return{unaryFilter:{field:Hd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yl(e.value))return{unaryFilter:{field:Hd(e.field),op:"IS_NOT_NAN"}};if(Wl(e.value))return{unaryFilter:{field:Hd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hd(e.field),op:Kd(e.op),value:e.value}}}(e):e instanceof pc?function(e){const t=e.getFilters().map((e=>Wd(e)));return 1===t.length?t[0]:{compositeFilter:{op:Gd(e.op),filters:t}}}(e):Va()}function Yd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Jd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Xd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:iu.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:iu.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Xd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zd{constructor(e){this.ct=e}}function ef(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Dd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ed(e,t.version.toTimestamp()),createTime:Ed(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nf(t.version)};else{if(!t.isUnknownDocument())return Va();r.unknownDocument={path:n.path.toArray(),version:nf(t.version)}}return r}function tf(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function nf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function rf(e){const t=new ru(e.seconds,e.nanoseconds);return iu.fromTimestamp(t)}function sf(e,t){const n=(t.baseMutations||[]).map((t=>zd(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>zd(e.ct,t))),i=ru.fromMillis(t.localWriteTimeMs);return new Qh(t.batchId,i,n,r)}function of(e){const t=rf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?rf(e.lastLimboFreeSnapshotVersion):iu.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return za(1===e.documents.length),Kc(Bc(Pd(e.documents[0])))}(e.query):function(e){return Kc(jd(e))}(e.query),new Xd(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Tl.fromBase64String(e.resumeToken))}function af(e,t){const n=nf(t.snapshotVersion),r=nf(t.lastLimboFreeSnapshotVersion);let i;i=Mc(t.target)?Ud(e.ct,t.target):Bd(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pc(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uf(e){const t=jd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Qc(t,t.limit,"L"):t}function lf(e,t){return new Yh(t.largestBatchId,zd(e.ct,t.overlayMutation))}function cf(e,t){const n=t.path.lastSegment();return[e,zu(t.path.popLast()),n]}function hf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:nf(r.readTime),documentKey:zu(r.documentKey.path),largestBatchId:r.largestBatchId}}class df{getBundleMetadata(e,t){return ff(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:rf(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return ff(e).put(function(e){return{bundleId:e.id,createTime:nf(xd(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return pf(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:uf(e.bundledQuery),readTime:rf(e.readTime)}}(e)}))}saveNamedQuery(e,t){return pf(e).put(function(e){return{name:e.name,readTime:nf(xd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ff(e){return gl(e,"bundles")}function pf(e){return gl(e,"namedQueries")}class gf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new gf(e,n)}getOverlay(e,t){return mf(e).get(cf(this.userId,t)).next((e=>e?lf(this.serializer,e):null))}getOverlays(e,t){const n=uh();return Su.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Yh(t,i);r.push(this.ht(e,s))})),Su.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(zu(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(mf(e).j("collectionPathOverlayIndex",r))})),Su.waitFor(i)}getOverlaysForCollection(e,t,n){const r=uh(),i=zu(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return mf(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=lf(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=uh();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mf(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=lf(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return mf(e).put(function(e,t,n){const[r,i,s]=cf(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Vd(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function mf(e){return gl(e,"documentOverlays")}class yf{Pt(e){return gl(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?Tl.fromUint8Array(t):Tl.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class vf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Dl(e.integerValue));else if("doubleValue"in e){const n=Dl(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Fu(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Al(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Nl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Zl(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):Va()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}St(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),lu.fromName(e).path.forEach((e=>{this.dt(t,60),this.bt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}function bf(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function wf(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=bf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}vf.Dt=new vf;class _f{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.vt(n.value),n=t.next();this.Ft()}Mt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.xt(n.value),n=t.next();this.Ot()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.vt(e);else if(e<2048)this.vt(960|e>>>6),this.vt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.vt(480|e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e);else{const e=t.codePointAt(0);this.vt(240|e>>>18),this.vt(128|63&e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e)}}this.Ft()}Lt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.xt(e);else if(e<2048)this.xt(960|e>>>6),this.xt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.xt(480|e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e);else{const e=t.codePointAt(0);this.xt(240|e>>>18),this.xt(128|63&e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e)}}this.Ot()}Bt(e){const t=this.kt(e),n=wf(t);this.qt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Qt(e){const t=this.kt(e),n=wf(t);this.qt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}vt(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(t)}xt(e){const t=255&e;0===t?(this.Wt(0),this.Wt(255)):255===t?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Sf{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class Ef{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class kf{constructor(){this.zt=new _f,this.jt=new Sf(this.zt),this.Ht=new Ef(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return 0===e?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}class If{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Yt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new If(this.indexId,this.documentKey,this.arrayValue,n)}}function xf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Tf(e.arrayValue,t.arrayValue),0!==n?n:(n=Tf(e.directionalValue,t.directionalValue),0!==n?n:lu.comparator(e.documentKey,t.documentKey)))}function Tf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Cf{constructor(e){this.Zt=new Sl(((e,t)=>uu.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const t of e.filters){const e=t;e.isInequality()?this.Zt=this.Zt.add(e):this.en.push(e)}}get tn(){return this.Zt.size>1}nn(e){if(za(e.collectionGroup===this.collectionId),this.tn)return!1;const t=hu(e);if(void 0!==t&&!this.rn(t))return!1;const n=du(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Zt.size>0){const e=this.Zt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.sn(e,t)||!this.on(this.Xt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Xt.length||!this.on(this.Xt[s++],e))return!1}return!0}_n(){if(this.tn)return null;let e=new Sl(uu.comparator);const t=[];for(const n of this.en)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new fu(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new fu(n.field,0))}for(const n of this.Xt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new fu(n.field,"asc"===n.dir?0:1)));return new cu(cu.UNKNOWN_ID,this.collectionId,t,pu.empty())}rn(e){for(const t of this.en)if(this.sn(t,e))return!0;return!1}sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}on(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Af(e){var t,n;if(za(e instanceof fc||e instanceof pc),e instanceof fc){if(e instanceof Cc){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>fc.create(e.field,"==",t))))||[];return pc.create(r,"or")}return e}const r=e.filters.map((e=>Af(e)));return pc.create(r,e.op)}function Df(e){if(0===e.getFilters().length)return[];const t=Lf(Af(e));return za(Pf(t)),Nf(t)||Of(t)?[t]:t.getFilters()}function Nf(e){return e instanceof fc}function Of(e){return e instanceof pc&&yc(e)}function Pf(e){return Nf(e)||Of(e)||function(e){if(e instanceof pc&&mc(e)){for(const t of e.getFilters())if(!Nf(t)&&!Of(t))return!1;return!0}return!1}(e)}function Lf(e){if(za(e instanceof fc||e instanceof pc),e instanceof fc)return e;if(1===e.filters.length)return Lf(e.filters[0]);const t=e.filters.map((e=>Lf(e)));let n=pc.create(t,e.op);return n=Ff(n),Pf(n)?n:(za(n instanceof pc),za(gc(n)),za(n.filters.length>1),n.filters.reduce(((e,t)=>Mf(e,t))))}function Mf(e,t){let n;return za(e instanceof fc||e instanceof pc),za(t instanceof fc||t instanceof pc),n=e instanceof fc?t instanceof fc?function(e,t){return pc.create([e,t],"and")}(e,t):Rf(e,t):t instanceof fc?Rf(t,e):function(e,t){if(za(e.filters.length>0&&t.filters.length>0),gc(e)&&gc(t))return _c(e,t.getFilters());const n=mc(e)?e:t,r=mc(e)?t:e,i=n.filters.map((e=>Mf(e,r)));return pc.create(i,"or")}(e,t),Ff(n)}function Rf(e,t){if(gc(t))return _c(t,e.getFilters());{const n=t.filters.map((t=>Mf(e,t)));return pc.create(n,"or")}}function Ff(e){if(za(e instanceof fc||e instanceof pc),e instanceof fc)return e;const t=e.getFilters();if(1===t.length)return Ff(t[0]);if(vc(e))return e;const n=t.map((e=>Ff(e))),r=[];return n.forEach((t=>{t instanceof fc?r.push(t):t instanceof pc&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:pc.create(r,e.op)}class Vf{constructor(){this.an=new zf}addToCollectionParentIndex(e,t){return this.an.add(t),Su.resolve()}getCollectionParents(e,t){return Su.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return Su.resolve()}deleteFieldIndex(e,t){return Su.resolve()}deleteAllFieldIndexes(e){return Su.resolve()}createTargetIndexes(e,t){return Su.resolve()}getDocumentsMatchingTarget(e,t){return Su.resolve(null)}getIndexType(e,t){return Su.resolve(0)}getFieldIndexes(e,t){return Su.resolve([])}getNextCollectionGroupToUpdate(e){return Su.resolve(null)}getMinOffset(e,t){return Su.resolve(yu.min())}getMinOffsetFromCollectionGroup(e,t){return Su.resolve(yu.min())}updateCollectionGroup(e,t,n){return Su.resolve()}updateIndexEntries(e,t){return Su.resolve()}}class zf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sl(ou.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Sl(ou.comparator)).toArray()}}const Uf=new Uint8Array(0);class Bf{constructor(e,t){this.databaseId=t,this.un=new zf,this.cn=new nh((e=>Pc(e)),((e,t)=>Lc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.un.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.un.add(t)}));const i={collectionId:n,parent:zu(r)};return jf(e).put(i)}return Su.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[nu(t),""],!1,!0);return jf(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ju(r.parent))}return n}))}addFieldIndex(e,t){const n=$f(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Kf(e);return i.next((e=>{n.put(hf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=$f(e),r=Kf(e),i=qf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=$f(e),n=qf(e),r=Kf(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Su.forEach(this.ln(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Cf(t)._n();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=qf(e);let r=!0;const i=new Map;return Su.forEach(this.ln(t),(t=>this.hn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=fh();const r=[];return Su.forEach(i,((i,s)=>{La("IndexedDbIndexManager",`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${Pc(t)}`);const o=function(e,t){const n=hu(t);if(void 0===n)return null;for(const r of Rc(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of du(t))for(const t of Rc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of du(t)){const t=0===i.kind?Fc(e,i.fieldPath,e.startAt):Vc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ac(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of du(t)){const t=0===i.kind?Vc(e,i.fieldPath,e.endAt):Fc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ac(n,r)}(s,i),c=this.Pn(i,s,u),h=this.Pn(i,s,l),d=this.In(i,s,a),f=this.Tn(i.indexId,o,c,u.inclusive,h,l.inclusive,d);return Su.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=lu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Su.resolve(null)}))}ln(e){let t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:Df(pc.create(e.filters,"and")).map((t=>Oc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.cn.set(e,t),t)}Tn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),u=a/(null!=t?t.length:1),l=[];for(let c=0;c<a;++c){const a=t?this.En(t[c/u]):Uf,h=this.dn(e,a,n[c%u],r),d=this.An(e,a,i[c%u],s),f=o.map((t=>this.dn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}dn(e,t,n,r){const i=new If(e,lu.empty(),t,n);return r?i:i.Yt()}An(e,t,n,r){const i=new If(e,lu.empty(),t,n);return r?i.Yt():i}hn(e,t){const n=new Cf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.nn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.ln(t);return Su.forEach(r,(t=>this.hn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Sl(uu.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}Rn(e,t){const n=new kf;for(const r of du(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Jt(r.kind);vf.Dt.It(e,i)}return n.Gt()}En(e){const t=new kf;return vf.Dt.It(e,t.Jt(0)),t.Gt()}Vn(e,t){const n=new kf;return vf.Dt.It(Gl(this.databaseId,t),n.Jt(function(e){const t=du(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Gt()}In(e,t,n){if(null===n)return[];let r=[];r.push(new kf);let i=0;for(const s of du(e)){const e=n[i++];for(const n of r)if(this.mn(t,s.fieldPath)&&Ql(e))r=this.fn(r,s,e);else{const t=n.Jt(s.kind);vf.Dt.It(e,t)}}return this.gn(r)}Pn(e,t,n){return this.In(e,t,n.position)}gn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Gt();return t}fn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new kf;n.seed(e.Gt()),vf.Dt.It(s,n.Jt(t.kind)),i.push(n)}return i}mn(e,t){return!!e.filters.find((e=>e instanceof fc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=$f(e),r=Kf(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Su.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new pu(t.sequenceNumber,new yu(rf(t.readTime),new lu(ju(t.documentKey)),t.largestBatchId)):pu.empty(),r=e.fields.map((e=>{let[t,n]=e;return new fu(uu.fromServerFormat(t),n)}));return new cu(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:eu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=$f(e),i=Kf(e);return this.pn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Su.forEach(t,(t=>i.put(hf(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Su.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Su.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Su.forEach(i,(n=>this.yn(e,t,n).next((t=>{const i=this.wn(r,n);return t.isEqual(i)?Su.resolve():this.Sn(e,r,n,t,i)})))))))}))}bn(e,t,n,r){return qf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}Dn(e,t,n,r){return qf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}yn(e,t,n){const r=qf(e);let i=new Sl(xf);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},((e,r)=>{i=i.add(new If(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}wn(e,t){let n=new Sl(xf);const r=this.Rn(t,e);if(null==r)return n;const i=hu(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Ql(s))for(const i of s.arrayValue.values||[])n=n.add(new If(t.indexId,e.key,this.En(i),r))}else n=n.add(new If(t.indexId,e.key,Uf,r));return n}Sn(e,t,n,r,i){La("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=kl(s),u=kl(o);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=kl(o)):t?(i(a),a=kl(s)):(a=kl(s),u=kl(o))}}(r,i,xf,(r=>{s.push(this.bn(e,t,n,r))}),(r=>{s.push(this.Dn(e,t,n,r))})),Su.waitFor(s)}pn(e){let t=1;return Kf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>xf(e,t))).filter(((e,t,n)=>!t||0!==xf(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=xf(s,e),i=xf(s,t);if(0===n)r[0]=e.Yt();else if(n>0&&i<0)r.push(s),r.push(s.Yt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Uf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Uf,[]];i.push(IDBKeyRange.bound(e,t))}return i}Cn(e,t){return xf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gf)}getMinOffset(e,t){return Su.mapArray(this.ln(t),(t=>this.hn(e,t).next((e=>e||Va())))).next(Gf)}}function jf(e){return gl(e,"collectionParents")}function qf(e){return gl(e,"indexEntries")}function $f(e){return gl(e,"indexConfiguration")}function Kf(e){return gl(e,"indexState")}function Gf(e){za(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;vu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new yu(t.readTime,t.documentKey,n)}const Hf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qf(e,Qf.DEFAULT_COLLECTION_PERCENTILE,Qf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Wf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(u.next((()=>{za(1===a)})));const l=[];for(const c of n.mutations){const e=Ku(t,c.key.path,n.batchId);s.push(i.delete(e)),l.push(c.key)}return Su.waitFor(s).next((()=>l))}function Yf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Va();t=e.noDocument}return JSON.stringify(t).length}Qf.DEFAULT_COLLECTION_PERCENTILE=10,Qf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qf.DEFAULT=new Qf(41943040,Qf.DEFAULT_COLLECTION_PERCENTILE,Qf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qf.DISABLED=new Qf(-1,0,0);class Jf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.vn={}}static lt(e,t,n,r){za(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Jf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zf(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ep(e),s=Zf(e);return s.add({}).next((o=>{za("number"==typeof o);const a=new Qh(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map((t=>Vd(e.ct,t))),i=n.mutations.map((t=>Vd(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let c=new Sl(((e,t)=>eu(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ku(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),l.push(s.put(u)),l.push(i.put(t,Gu))}return c.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.vn[o]=a.keys()})),Su.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Zf(e).get(t).next((e=>e?(za(e.userId===this.userId),sf(this.serializer,e)):null))}Fn(e,t){return this.vn[t]?Su.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Zf(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(za(t.batchId>=n),i=sf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Zf(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zf(e).U("userMutationsIndex",t).next((e=>e.map((e=>sf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=$u(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ep(e).J({range:r},((n,r,s)=>{const[o,a,u]=n,l=ju(a);if(o===this.userId&&t.path.isEqual(l))return Zf(e).get(u).next((e=>{if(!e)throw Va();za(e.userId===this.userId),i.push(sf(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sl(eu);const r=[];return t.forEach((t=>{const i=$u(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ep(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,u=ju(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()}));r.push(o)})),Su.waitFor(r).next((()=>this.Mn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=$u(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Sl(eu);return ep(e).J({range:s},((e,t,i)=>{const[s,a,u]=e,l=ju(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(u)):i.done()})).next((()=>this.Mn(e,o)))}Mn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Zf(e).get(t).next((e=>{if(null===e)throw Va();za(e.userId===this.userId),n.push(sf(this.serializer,e))})))})),Su.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Wf(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.xn(t.batchId)})),Su.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Su.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ep(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=ju(e[1]);r.push(t)}else n.done()})).next((()=>{za(0===r.length)}))}))}containsKey(e,t){return Xf(e,this.userId,t)}On(e){return tp(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Xf(e,t,n){const r=$u(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ep(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Zf(e){return gl(e,"mutations")}function ep(e){return gl(e,"documentMutations")}function tp(e){return gl(e,"mutationQueues")}class np{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new np(0)}static Bn(){return new np(-1)}}class rp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.kn(e).next((t=>{const n=new np(t.highestTargetId);return t.highestTargetId=n.next(),this.qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.kn(e).next((e=>iu.fromTimestamp(new ru(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.kn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.kn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.qn(e,r))))}addTargetData(e,t){return this.Qn(e,t).next((()=>this.kn(e).next((n=>(n.targetCount+=1,this.Kn(t,n),this.qn(e,n))))))}updateTargetData(e,t){return this.Qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ip(e).delete(t.targetId))).next((()=>this.kn(e))).next((t=>(za(t.targetCount>0),t.targetCount-=1,this.qn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return ip(e).J(((s,o)=>{const a=of(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Su.waitFor(i))).next((()=>r))}forEachTarget(e,t){return ip(e).J(((e,n)=>{const r=of(n);t(r)}))}kn(e){return sp(e).get("targetGlobalKey").next((e=>(za(null!==e),e)))}qn(e,t){return sp(e).put("targetGlobalKey",t)}Qn(e,t){return ip(e).put(af(this.serializer,t))}Kn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.kn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Pc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return ip(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=of(n);Lc(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=op(e);return t.forEach((t=>{const s=zu(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Su.waitFor(r)}removeMatchingKeys(e,t,n){const r=op(e);return Su.forEach(t,(t=>{const i=zu(t.path);return Su.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=op(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=op(e);let i=fh();return r.J({range:n,H:!0},((e,t,n)=>{const r=ju(e[1]),s=new lu(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=zu(t.path),r=IDBKeyRange.bound([n],[nu(n)],!1,!0);let i=0;return op(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return ip(e).get(t).next((e=>e?of(e):null))}}function ip(e){return gl(e,"targets")}function sp(e){return gl(e,"targetGlobal")}function op(e){return gl(e,"targetDocuments")}function ap(e,t){let[n,r]=e,[i,s]=t;const o=eu(n,i);return 0===o?eu(r,s):o}class up{constructor(e){this.$n=e,this.buffer=new Sl(ap),this.Un=0}Wn(){return++this.Un}Gn(e){const t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ap(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){La("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.zn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Cu(e)?La("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await _u(e)}await this.jn(3e5)}))}}class cp{constructor(e,t){this.Hn=e,this.params=t}calculateTargetCount(e,t){return this.Hn.Jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Su.resolve(Mu.oe);const n=new up(t);return this.Hn.forEachTarget(e,(e=>n.Gn(e.sequenceNumber))).next((()=>this.Hn.Yn(e,(e=>n.Gn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Hn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Hn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(La("LruGarbageCollector","Garbage collection skipped; disabled"),Su.resolve(Hf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(La("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hf):this.Zn(e,t)))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,t){let n,r,i,s,o,a,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(La("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),Pa()<=Os.DEBUG&&La("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-l}ms`),Su.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function hp(e,t){return new cp(e,t)}class dp{constructor(e,t){this.db=e,this.garbageCollector=hp(this,t)}Jn(e){const t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Xn(e){let t=0;return this.Yn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Yn(e,t){return this.er(e,((e,n)=>t(n)))}addReference(e,t,n){return fp(e,n)}removeReference(e,t,n){return fp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return fp(e,t)}tr(e,t){return function(e,t){let n=!1;return tp(e).Y((r=>Xf(e,r,t).next((e=>(e&&(n=!0),Su.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.er(e,((s,o)=>{if(o<=t){const t=this.tr(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,iu.min()),op(e).delete(function(e){return[0,zu(e.path)]}(s)))))}));r.push(t)}})).next((()=>Su.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return fp(e,t)}er(e,t){const n=op(e);let r,i=Mu.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:u}=n;0===s?(i!==Mu.oe&&t(new lu(ju(r)),i),i=u,r=a):i=Mu.oe})).next((()=>{i!==Mu.oe&&t(new lu(ju(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fp(e,t){return op(e).put(function(e,t){return{targetId:0,path:zu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class pp{constructor(){this.changes=new nh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Su.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return bp(e).put(n)}removeEntry(e,t,n){return bp(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],tf(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.nr(e,n))))}getEntry(e,t){let n=oc.newInvalidDocument(t);return bp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wp(t))},((e,r)=>{n=this.rr(t,r)})).next((()=>n))}ir(e,t){let n={size:0,document:oc.newInvalidDocument(t)};return bp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wp(t))},((e,r)=>{n={document:this.rr(t,r),size:Yf(r)}})).next((()=>n))}getEntries(e,t){let n=ih();return this.sr(e,t,((e,t)=>{const r=this.rr(e,t);n=n.insert(e,r)})).next((()=>n))}_r(e,t){let n=ih(),r=new bl(lu.comparator);return this.sr(e,t,((e,t)=>{const i=this.rr(e,t);n=n.insert(e,i),r=r.insert(e,Yf(t))})).next((()=>({documents:n,ar:r})))}sr(e,t,n){if(t.isEmpty())return Su.resolve();let r=new Sl(Sp);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(wp(r.first()),wp(r.last())),s=r.getIterator();let o=s.getNext();return bp(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=lu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Sp(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(wp(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),tf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bp(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=ih();for(const i of e){const e=this.rr(lu.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Xc(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=ih();const s=_p(t,n),o=_p(t,yu.max());return bp(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.rr(lu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new yp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return vp(e).get("remoteDocumentGlobalKey").next((e=>(za(!!e),e)))}nr(e,t){return vp(e).put("remoteDocumentGlobalKey",t)}rr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Fd(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=lu.fromSegments(t.noDocument.path),r=rf(t.noDocument.readTime);n=oc.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Va();{const e=lu.fromSegments(t.unknownDocument.path),r=rf(t.unknownDocument.version);n=oc.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ru(e[0],e[1]);return iu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(iu.min()))return e}return oc.newInvalidDocument(e)}}function mp(e){return new gp(e)}class yp extends pp{constructor(e,t){super(),this.ur=e,this.trackRemovals=t,this.cr=new nh((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Sl(((e,t)=>eu(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.cr.get(i);if(t.push(this.ur.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=ef(this.ur.serializer,s);r=r.add(i.path.popLast());const u=Yf(a);n+=u-o.size,t.push(this.ur.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=ef(this.ur.serializer,s.convertToNoDocument(iu.min()));t.push(this.ur.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ur.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ur.updateMetadata(e,n)),Su.waitFor(t)}getFromCache(e,t){return this.ur.ir(e,t).next((e=>(this.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ur._r(e,t).next((e=>{let{documents:t,ar:n}=e;return n.forEach(((e,n)=>{this.cr.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function vp(e){return gl(e,"remoteDocumentGlobal")}function bp(e){return gl(e,"remoteDocumentsV14")}function wp(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function _p(e,t){const n=t.documentKey.path.toArray();return[e,tf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Sp(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=eu(n[s],r[s]),i)return i;return i=eu(n.length,r.length),i||(i=eu(n[n.length-2],r[r.length-2]),i||eu(n[n.length-1],r[r.length-1]))}class Ep{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Vh(n.mutation,e,Il.empty(),ru.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,fh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fh();const r=uh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=oh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=uh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,fh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ih();const s=ch(),o=ch();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof jh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Vh(o.mutation,t,o.mutation.getFieldMask(),ru.now())):s.set(t.key,Il.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Ep(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ch();let r=new bl(((e,t)=>e-t)),i=fh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Il.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||fh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,u=r.value,l=lh();u.forEach((e=>{if(!i.has(e)){const r=Rh(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Su.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Su.resolve(uh());let o=-1,a=i;return s.next((t=>Su.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Su.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,fh()))).next((e=>({batchId:o,changes:ah(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lu(t)).next((e=>{let t=oh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=oh();return this.indexManager.getCollectionParents(e,i).next((o=>Su.forEach(o,(o=>{const a=function(e,t){return new zc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,oc.newInvalidDocument(r)))}));let n=oh();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Vh(s.mutation,r,Il.empty(),ru.now()),Xc(t,r)&&(n=n.insert(e,r))})),n}))}}class Ip{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return Su.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:xd(e.createTime)}}(t)),Su.resolve()}getNamedQuery(e,t){return Su.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:uf(e.bundledQuery),readTime:xd(e.readTime)}}(t)),Su.resolve()}}class xp{constructor(){this.overlays=new bl(lu.comparator),this.Pr=new Map}getOverlay(e,t){return Su.resolve(this.overlays.get(t))}getOverlays(e,t){const n=uh();return Su.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Su.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Pr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Pr.delete(n)),Su.resolve()}getOverlaysForCollection(e,t,n){const r=uh(),i=t.length+1,s=new lu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Su.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new bl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=uh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=uh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Su.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Yh(t,n));let i=this.Pr.get(t);void 0===i&&(i=fh(),this.Pr.set(t,i)),this.Pr.set(t,i.add(n.key))}}class Tp{constructor(){this.sessionToken=Tl.EMPTY_BYTE_STRING}getSessionToken(e){return Su.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Su.resolve()}}class Cp{constructor(){this.Ir=new Sl(Ap.Tr),this.Er=new Sl(Ap.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const n=new Ap(e,t);this.Ir=this.Ir.add(n),this.Er=this.Er.add(n)}Ar(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Rr(new Ap(e,t))}Vr(e,t){e.forEach((e=>this.removeReference(e,t)))}mr(e){const t=new lu(new ou([])),n=new Ap(t,e),r=new Ap(t,e+1),i=[];return this.Er.forEachInRange([n,r],(e=>{this.Rr(e),i.push(e.key)})),i}gr(){this.Ir.forEach((e=>this.Rr(e)))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const t=new lu(new ou([])),n=new Ap(t,e),r=new Ap(t,e+1);let i=fh();return this.Er.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Ap(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ap{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return lu.comparator(e.key,t.key)||eu(e.yr,t.yr)}static dr(e,t){return eu(e.yr,t.yr)||lu.comparator(e.key,t.key)}}class Dp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new Sl(Ap.Tr)}checkEmpty(e){return Su.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Qh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Sr=this.Sr.add(new Ap(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Su.resolve(s)}lookupMutationBatch(e,t){return Su.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Dr(n),i=r<0?0:r;return Su.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Su.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return Su.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ap(t,0),r=new Ap(t,Number.POSITIVE_INFINITY),i=[];return this.Sr.forEachInRange([n,r],(e=>{const t=this.br(e.yr);i.push(t)})),Su.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sl(eu);return t.forEach((e=>{const t=new Ap(e,0),r=new Ap(e,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([t,r],(e=>{n=n.add(e.yr)}))})),Su.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;lu.isDocumentKey(i)||(i=i.child(""));const s=new Ap(new lu(i),0);let o=new Sl(eu);return this.Sr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),s),Su.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach((e=>{const n=this.br(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){za(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Sr;return Su.forEach(t.mutations,(r=>{const i=new Ap(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Sr=n}))}xn(e){}containsKey(e,t){const n=new Ap(t,0),r=this.Sr.firstAfterOrEqual(n);return Su.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Su.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Np{constructor(e){this.Fr=e,this.docs=new bl(lu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Su.resolve(n?n.document.mutableCopy():oc.newInvalidDocument(t))}getEntries(e,t){let n=ih();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():oc.newInvalidDocument(e))})),Su.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ih();const s=t.path,o=new lu(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||vu(mu(o),n)<=0||(r.has(o.key)||Xc(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Su.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Va()}Mr(e,t){return Su.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Op(this)}getSize(e){return Su.resolve(this.size)}}class Op extends pp{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ur.addEntry(e,r)):this.ur.removeEntry(n)})),Su.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class Pp{constructor(e){this.persistence=e,this.Or=new nh((e=>Pc(e)),Lc),this.lastRemoteSnapshotVersion=iu.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Cp,this.targetCount=0,this.Br=np.Ln()}forEachTarget(e,t){return this.Or.forEach(((e,n)=>t(n))),Su.resolve()}getLastRemoteSnapshotVersion(e){return Su.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Su.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Su.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),Su.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new np(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,Su.resolve()}updateTargetData(e,t){return this.Qn(t),Su.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,Su.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Or.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Or.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Su.waitFor(i).next((()=>r))}getTargetCount(e){return Su.resolve(this.targetCount)}getTargetData(e,t){const n=this.Or.get(t)||null;return Su.resolve(n)}addMatchingKeys(e,t,n){return this.Lr.Ar(t,n),Su.resolve()}removeMatchingKeys(e,t,n){this.Lr.Vr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Su.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),Su.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Lr.pr(t);return Su.resolve(n)}containsKey(e,t){return Su.resolve(this.Lr.containsKey(t))}}class Lp{constructor(e,t){this.kr={},this.overlays={},this.qr=new Mu(0),this.Qr=!1,this.Qr=!0,this.Kr=new Tp,this.referenceDelegate=e(this),this.$r=new Pp(this),this.indexManager=new Vf,this.remoteDocumentCache=function(e){return new Np(e)}((e=>this.referenceDelegate.Ur(e))),this.serializer=new Zd(t),this.Wr=new Ip(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.kr[e.toKey()];return n||(n=new Dp(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,n){La("MemoryPersistence","Starting transaction:",e);const r=new Mp(this.qr.next());return this.referenceDelegate.Gr(),n(r).next((e=>this.referenceDelegate.zr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}jr(e,t){return Su.or(Object.values(this.kr).map((n=>()=>n.containsKey(e,t))))}}class Mp extends wu{constructor(e){super(),this.currentSequenceNumber=e}}class Rp{constructor(e){this.persistence=e,this.Hr=new Cp,this.Jr=null}static Yr(e){return new Rp(e)}get Zr(){if(this.Jr)return this.Jr;throw Va()}addReference(e,t,n){return this.Hr.addReference(n,t),this.Zr.delete(n.toString()),Su.resolve()}removeReference(e,t,n){return this.Hr.removeReference(n,t),this.Zr.add(n.toString()),Su.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),Su.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach((e=>this.Zr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Zr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Gr(){this.Jr=new Set}zr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Su.forEach(this.Zr,(n=>{const r=lu.fromPath(n);return this.Xr(e,r).next((e=>{e||t.removeEntry(r,iu.min())}))})).next((()=>(this.Jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Xr(e,t).next((e=>{e?this.Zr.delete(t.toString()):this.Zr.add(t.toString())}))}Ur(e){return 0}Xr(e,t){return Su.or([()=>Su.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}}class Fp{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Eu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qu,{unique:!0}),e.createObjectStore("documentMutations")}(e),Vp(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Su.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Vp(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:iu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qu,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Su.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.ti(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ni(i))))),n<7&&r>=7&&(s=s.next((()=>this.ri(i)))),n<8&&r>=8&&(s=s.next((()=>this.ii(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.si(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:il});t.createIndex("collectionPathOverlayIndex",sl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ol,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Hu});t.createIndex("documentKeyIndex",Qu),t.createIndex("collectionGroupIndex",Wu)}(e))).next((()=>this.oi(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this._i(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:el}).createIndex("sequenceNumberIndex",tl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:nl}).createIndex("documentKeyIndex",rl,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)}))),s}ni(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=Yf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ti(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Su.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Su.forEach(n,(n=>{za(n.userId===t.userId);const r=sf(this.serializer,n);return Wf(e,t.userId,r).next((()=>{}))}))))}))))}ri(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new ou(n),o=function(e){return[0,zu(e)]}(s);r.push(t.get(o).next((n=>n?Su.resolve():(n=>t.put({targetId:0,path:zu(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Su.waitFor(r)))}))}ii(e,t){e.createObjectStore("collectionParents",{keyPath:Zu});const n=t.store("collectionParents"),r=new zf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:zu(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new ou(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=ju(r);return i(o.popLast())}))))}si(e){const t=e.store("targets");return t.J(((e,n)=>{const r=of(n),i=af(this.serializer,r);return t.put(i)}))}oi(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new lu(ou.fromString(e.document.name).popFirst(5)):e.noDocument?lu.fromSegments(e.noDocument.path):e.unknownDocument?lu.fromSegments(e.unknownDocument.path):Va()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Su.waitFor(r)))}_i(e,t){const n=t.store("mutations"),r=mp(this.serializer),i=new Lp(Rp.Yr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:fh();sf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Su.forEach(n,((e,n)=>{const s=new Da(n),o=gf.lt(this.serializer,s),a=i.getIndexManager(s),u=Jf.lt(s,this.serializer,a,i.referenceDelegate);return new kp(r,u,o,a).recalculateAndSaveOverlaysForDocumentKeys(new pl(t,Mu.oe),e).next()}))}))}}function Vp(e){e.createObjectStore("targetDocuments",{keyPath:Ju}).createIndex("documentTargetsIndex",Xu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yu,{unique:!0}),e.createObjectStore("targetGlobal")}const zp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Up{constructor(e,t,n,r,i,s,o,a,u,l){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ai=i,this.window=s,this.document=o,this.ui=u,this.ci=l,this.li=c,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=e=>Promise.resolve(),!Up.D())throw new ja(Ba.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dp(this,r),this.di=t+"main",this.serializer=new Zd(a),this.Ai=new ku(this.di,this.li,new Fp(this.serializer)),this.Kr=new yf,this.$r=new rp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=mp(this.serializer),this.Wr=new df,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,!1===l&&Ma("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ja(Ba.FAILED_PRECONDITION,zp);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.$r.getHighestSequenceNumber(e)))})).then((e=>{this.qr=new Mu(e,this.ui)})).then((()=>{this.Qr=!0})).catch((e=>(this.Ai&&this.Ai.close(),Promise.reject(e))))}pi(e){return this.Ei=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget((async()=>{this.started&&await this.Vi()})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>jp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.yi(e).next((e=>{e||(this.isPrimary=!1,this.ai.enqueueRetryable((()=>this.Ei(!1))))}))})).next((()=>this.wi(e))).next((t=>this.isPrimary&&!t?this.Si(e).next((()=>!1)):!!t&&this.bi(e).next((()=>!0)))))).catch((e=>{if(Cu(e))return La("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return La("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ai.enqueueRetryable((()=>this.Ei(e))),this.isPrimary=e}))}yi(e){return Bp(e).get("owner").next((e=>Su.resolve(this.Di(e))))}Ci(e){return jp(e).delete(this.clientId)}async vi(){if(this.isPrimary&&!this.Fi(this.Ti,18e5)){this.Ti=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=gl(e,"clientMetadata");return t.U().next((e=>{const n=this.Mi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Su.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ri)for(const t of e)this.Ri.removeItem(this.xi(t.clientId))}}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Vi().then((()=>this.vi())).then((()=>this.gi()))))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?Su.resolve(!0):Bp(e).get("owner").next((t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)){if(this.Di(t)&&this.networkEnabled)return!0;if(!this.Di(t)){if(!t.allowTabSynchronization)throw new ja(Ba.FAILED_PRECONDITION,zp);return!1}}return!(!this.networkEnabled||!this.inForeground)||jp(e).U().next((e=>void 0===this.Mi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&La("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Qr=!1,this.Ni(),this.Ii&&(this.Ii.cancel(),this.Ii=null),this.Li(),this.Bi(),await this.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new pl(e,Mu.oe);return this.Si(t).next((()=>this.Ci(t)))})),this.Ai.close(),this.ki()}Mi(e,t){return e.filter((e=>this.Fi(e.updateTimeMs,t)&&!this.Oi(e.clientId)))}qi(){return this.runTransaction("getActiveClients","readonly",(e=>jp(e).U().next((e=>this.Mi(e,18e5).map((e=>e.clientId))))))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,t){return Jf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Bf(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gf.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,t,n){La("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?fl:16===e?dl:15===e?hl:14===e?cl:13===e?ll:12===e?ul:11===e?al:void Va()}(this.li);let s;return this.Ai.runTransaction(e,r,i,(r=>(s=new pl(r,this.qr?this.qr.next():Mu.oe),"readwrite-primary"===t?this.yi(s).next((e=>!!e||this.wi(s))).next((t=>{if(!t)throw Ma(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable((()=>this.Ei(!1))),new ja(Ba.FAILED_PRECONDITION,bu);return n(s)})).next((e=>this.bi(s).next((()=>e)))):this.Qi(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Qi(e){return Bp(e).get("owner").next((e=>{if(null!==e&&this.Fi(e.leaseTimestampMs,5e3)&&!this.Oi(e.ownerId)&&!this.Di(e)&&!(this.ci||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ja(Ba.FAILED_PRECONDITION,zp)}))}bi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bp(e).put("owner",t)}static D(){return ku.D()}Si(e){const t=Bp(e);return t.get("owner").next((e=>this.Di(e)?(La("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Su.resolve()))}Fi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ma(`Detected an update time that is in the future: ${e} > ${n}`),!1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Pi=()=>{this.ai.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Vi())))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground="visible"===this.document.visibilityState)}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.hi=()=>{this.Ni();const e=/(?:Version|Mobile)\/1[456]/;gs()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var t;try{const n=null!==(null===(t=this.Ri)||void 0===t?void 0:t.getItem(this.xi(e)));return La("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ma("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){Ma("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch(e){}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bp(e){return gl(e,"owner")}function jp(e){return gl(e,"clientMetadata")}function qp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class $p{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ki=n,this.$i=r}static Ui(e,t){let n=fh(),r=fh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $p(e,t.fromCache,n,r)}}class Kp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gp{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=gs()?8:Iu(ds())>0?6:4}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Yi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Kp;return this.Zi(e,t,n).next((r=>{if(i.result=r,this.Gi)return this.Xi(e,t,n,r.size)}))})).next((()=>i.result))}Xi(e,t,n,r){return n.documentReadCount<this.zi?(Pa()<=Os.DEBUG&&La("QueryEngine","SDK will not create cache indexes for query:",Jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),Su.resolve()):(Pa()<=Os.DEBUG&&La("QueryEngine","Query:",Jc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ji*r?(Pa()<=Os.DEBUG&&La("QueryEngine","The SDK decides to create cache indexes for query:",Jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kc(t))):Su.resolve())}Ji(e,t){if(jc(t))return Su.resolve(null);let n=Kc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Qc(t,null,"F"),n=Kc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=fh(...r);return this.Hi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.es(t,r);return this.ts(t,s,i,n.readTime)?this.Ji(e,Qc(t,null,"F")):this.ns(e,s,t,n)}))))})))))}Yi(e,t,n,r){return jc(t)||r.isEqual(iu.min())?Su.resolve(null):this.Hi.getDocuments(e,n).next((i=>{const s=this.es(t,i);return this.ts(t,s,n,r)?Su.resolve(null):(Pa()<=Os.DEBUG&&La("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jc(t)),this.ns(e,s,t,gu(r,-1)).next((e=>e)))}))}es(e,t){let n=new Sl(eh(e));return t.forEach(((t,r)=>{Xc(e,r)&&(n=n.add(r))})),n}ts(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Zi(e,t,n){return Pa()<=Os.DEBUG&&La("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Hi.getDocumentsMatchingQuery(e,t,yu.min(),n)}ns(e,t,n,r){return this.Hi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Hp{constructor(e,t,n,r){this.persistence=e,this.rs=t,this.serializer=r,this.ss=new bl(eu),this.os=new nh((e=>Pc(e)),Lc),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(n)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kp(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ss)))}}function Qp(e,t,n,r){return new Hp(e,t,n,r)}async function Wp(e,t){const n=Ua(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.cs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=fh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ls:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Yp(e){const t=Ua(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.$r.getLastRemoteSnapshotVersion(e)))}function Jp(e,t,n){let r=fh(),i=fh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ih();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(iu.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):La("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{hs:r,Ps:i}}))}function Xp(e,t){const n=Ua(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Zp(e,t){const n=Ua(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.$r.getTargetData(e,t).next((i=>i?(r=i,Su.resolve(r)):n.$r.allocateTargetId(e).next((i=>(r=new Xd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.$r.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ss=n.ss.insert(e.targetId,e),n.os.set(t,e.targetId)),e}))}async function eg(e,t,n){const r=Ua(e),i=r.ss.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Cu(e))throw e;La("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ss=r.ss.remove(t),r.os.delete(i.target)}function tg(e,t,n){const r=Ua(e);let i=iu.min(),s=fh();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ua(e),i=r.os.get(n);return void 0!==i?Su.resolve(r.ss.get(i)):r.$r.getTargetData(t,n)}(r,e,Kc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.rs.getDocumentsMatchingQuery(e,t,n?i:iu.min(),n?s:fh()))).next((e=>(ig(r,Zc(t),e),{documents:e,Is:s})))))}function ng(e,t){const n=Ua(e),r=Ua(n.$r),i=n.ss.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function rg(e,t){const n=Ua(e),r=n._s.get(t)||iu.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.us.getAllFromCollectionGroup(e,t,gu(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(ig(n,t,e),e)))}function ig(e,t,n){let r=e._s.get(t)||iu.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e._s.set(t,r)}async function sg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fh();const r=await Zp(e,Kc(uf(t.bundledQuery))),i=Ua(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=xd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Wr.saveNamedQuery(e,t);const o=r.withResumeToken(Tl.EMPTY_BYTE_STRING,s);return i.ss=i.ss.insert(o.targetId,o),i.$r.updateTargetData(e,o).next((()=>i.$r.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.$r.addMatchingKeys(e,n,r.targetId))).next((()=>i.Wr.saveNamedQuery(e,t)))}))}function og(e,t){return`firestore_clients_${e}_${t}`}function ag(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function ug(e,t){return`firestore_targets_${e}_${t}`}class lg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static As(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ja(r.error.code,r.error.message))),s?new lg(e,t,r.state,i):(Ma("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static As(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ja(n.error.code,n.error.message))),i?new cg(e,n.state,r):(Ma("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static As(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=gh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Vu(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new hg(e,i):(Ma("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dg{constructor(e,t){this.clientId=e,this.onlineState=t}static As(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dg(t.clientId,t.onlineState):(Ma("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fg{constructor(){this.activeTargetIds=gh()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pg{constructor(e,t,n,r,i){this.window=e,this.ai=t,this.persistenceKey=n,this.gs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new bl(eu),this.started=!1,this.Ss=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.bs=og(this.persistenceKey,this.gs),this.Ds=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ws=this.ws.insert(this.gs,new fg),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Ms=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.xs=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.qi();for(const n of e){if(n===this.gs)continue;const e=this.getItem(og(this.persistenceKey,n));if(e){const t=hg.As(n,e);t&&(this.ws=this.ws.insert(t.clientId,t))}}this.Os();const t=this.storage.getItem(this.Ms);if(t){const e=this.Ns(t);e&&this.Ls(e)}for(const n of this.Ss)this.ys(n);this.Ss=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let t=!1;return this.ws.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,t,n){this.ks(e,t,n),this.qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ug(this.persistenceKey,e));if(n){const r=cg.As(e,n);r&&(t=r.state)}}return this.Qs.Vs(e),this.Os(),t}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ug(this.persistenceKey,e))}updateQueryState(e,t,n){this.Ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.qs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return La("SharedClientState","READ",e,t),t}setItem(e,t){La("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){La("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){const t=e;if(t.storageArea===this.storage){if(La("SharedClientState","EVENT",t.key,t.newValue),t.key===this.bs)return void Ma("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Cs.test(t.key)){if(null==t.newValue){const e=this.Ws(t.key);return this.Gs(e,null)}{const e=this.zs(t.key,t.newValue);if(e)return this.Gs(e.clientId,e)}}else if(this.vs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(this.Fs.test(t.key)){if(null!==t.newValue){const e=this.Js(t.key,t.newValue);if(e)return this.Ys(e)}}else if(t.key===this.Ms){if(null!==t.newValue){const e=this.Ns(t.newValue);if(e)return this.Ls(e)}}else if(t.key===this.Ds){const e=function(e){let t=Mu.oe;if(null!=e)try{const n=JSON.parse(e);za("number"==typeof n),t=n}catch(e){Ma("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Mu.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.xs){const e=this.Zs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Xs(e))))}}else this.Ss.push(t)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,t,n){const r=new lg(this.currentUser,e,t,n),i=ag(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Rs())}qs(e){const t=ag(this.persistenceKey,this.currentUser,e);this.removeItem(t)}$s(e){const t={clientId:this.gs,onlineState:e};this.storage.setItem(this.Ms,JSON.stringify(t))}Ks(e,t,n){const r=ug(this.persistenceKey,e),i=new cg(e,t,n);this.setItem(r,i.Rs())}Us(e){const t=JSON.stringify(Array.from(e));this.setItem(this.xs,t)}Ws(e){const t=this.Cs.exec(e);return t?t[1]:null}zs(e,t){const n=this.Ws(e);return hg.As(n,t)}js(e,t){const n=this.vs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lg.As(new Da(i),r,t)}Js(e,t){const n=this.Fs.exec(e),r=Number(n[1]);return cg.As(r,t)}Ns(e){return dg.As(e)}Zs(e){return JSON.parse(e)}async Hs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.eo(e.batchId,e.state,e.error);La("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,t){const n=t?this.ws.insert(e,t):this.ws.remove(e),r=this.Bs(this.ws),i=this.Bs(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.ro(s,o).then((()=>{this.ws=n}))}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let t=gh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class gg{constructor(){this.io=new fg,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,n){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new fg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mg{oo(e){}shutdown(){}}class yg{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){La("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){La("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vg=null;function bg(){return null===vg?vg=268435456+Math.round(2147483648*Math.random()):vg++,"0x"+vg.toString(16)}const wg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _g{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}const Sg="WebChannelConnection";class Eg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=t+"://"+e.host,this.Do=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get vo(){return!1}Fo(e,t,n,r,i){const s=bg(),o=this.Mo(e,t.toUriEncodedString());La("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(a,r,i),this.Oo(e,o,a,n).then((t=>(La("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Ra("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}No(e,t,n,r,i,s){return this.Fo(e,t,n,r,i)}xo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Na,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Mo(e,t){const n=wg[e];return`${this.bo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,n,r){const i=bg();return new Promise(((s,o)=>{const a=new va;a.setWithCredentials(!0),a.listenOnce(_a.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Sa.NO_ERROR:const t=a.getResponseJson();La(Sg,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Sa.TIMEOUT:La(Sg,`RPC '${e}' ${i} timed out`),o(new ja(Ba.DEADLINE_EXCEEDED,"Request time out"));break;case Sa.HTTP_ERROR:const n=a.getStatus();if(La(Sg,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ba).indexOf(t)>=0?t:Ba.UNKNOWN}(t.status);o(new ja(e,t.message))}else o(new ja(Ba.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ja(Ba.UNAVAILABLE,"Connection failed."));break;default:Va()}}finally{La(Sg,`RPC '${e}' ${i} completed.`)}}));const u=JSON.stringify(r);La(Sg,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",u,n,15)}))}Lo(e,t,n){const r=bg(),i=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xa(),o=Ia(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.xmlHttpFactory=new ba({})),this.xo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");La(Sg,`Creating RPC '${e}' stream ${r}: ${l}`,a);const c=s.createWebChannel(l,a);let h=!1,d=!1;const f=new _g({Po:t=>{d?La(Sg,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(La(Sg,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),La(Sg,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Io:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,wa.EventType.OPEN,(()=>{d||(La(Sg,`RPC '${e}' stream ${r} transport opened.`),f.po())})),p(c,wa.EventType.CLOSE,(()=>{d||(d=!0,La(Sg,`RPC '${e}' stream ${r} transport closed`),f.wo())})),p(c,wa.EventType.ERROR,(t=>{d||(d=!0,Ra(Sg,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new ja(Ba.UNAVAILABLE,"The operation could not be completed")))})),p(c,wa.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];za(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){La(Sg,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Xh[e];if(void 0!==t)return td(t)}(t),i=o.message;void 0===n&&(n=Ba.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new ja(n,i)),c.close()}else La(Sg,`RPC '${e}' stream ${r} received:`,i),f.So(i)}})),p(o,ka.STAT_EVENT,(t=>{t.stat===Ea.PROXY?La(Sg,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ea.NOPROXY&&La(Sg,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.yo()}),0),f}}function kg(){return"undefined"!=typeof window?window:null}function Ig(){return"undefined"!=typeof document?document:null}function xg(e){return new _d(e,!0)}class Tg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ai=e,this.timerId=t,this.Bo=n,this.ko=r,this.qo=i,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const t=Math.floor(this.Qo+this.Go()),n=Math.max(0,Date.now()-this.$o),r=Math.max(0,t-n);r>0&&La("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,(()=>(this.$o=Date.now(),e()))),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class Cg{constructor(e,t,n,r,i,s,o,a){this.ai=e,this.jo=n,this.Ho=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Tg(e,t)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}async stop(){this.t_()&&await this.close(0)}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,(()=>this.o_())))}__(e){this.a_(),this.stream.send(e)}async o_(){if(this.n_())return this.close(0)}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}async close(e,t){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,4!==e?this.e_.reset():t&&t.code===Ba.RESOURCE_EXHAUSTED?(Ma(t.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):t&&t.code===Ba.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Vo(t)}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Jo===t&&this.h_(n,r)}),(t=>{e((()=>{const e=new ja(Ba.UNKNOWN,"Fetching auth token failed: "+t.message);return this.P_(e)}))}))}h_(e,t){const n=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To((()=>{n((()=>this.listener.To()))})),this.stream.Ao((()=>{n((()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,(()=>(this.n_()&&(this.state=3),Promise.resolve()))),this.listener.Ao())))})),this.stream.Vo((e=>{n((()=>this.P_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.Xo?this.T_(e):this.onNext(e)))}))}r_(){this.state=5,this.e_.Wo((async()=>{this.state=0,this.start()}))}P_(e){return La("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget((()=>this.Jo===e?t():(La("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ag extends Cg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Va()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(za(void 0===t||"string"==typeof t),Tl.fromBase64String(t||"")):(za(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Tl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ba.UNKNOWN:td(e.code);return new ja(t,e.message||"")}(o);n=new fd(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nd(e,r.document.name),s=xd(r.document.updateTime),o=r.document.createTime?xd(r.document.createTime):iu.min(),a=new ic({mapValue:{fields:r.document.fields}}),u=oc.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new hd(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Nd(e,r.document),s=r.readTime?xd(r.readTime):iu.min(),o=oc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Nd(e,r.document),s=r.removedTargetIds||[];n=new hd([],s,i,null)}else{if(!("filter"in t))return Va();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Jh(r,i),o=e.targetId;n=new dd(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return iu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?iu.min():t.readTime?xd(t.readTime):iu.min()}(e);return this.listener.E_(t,n)}d_(e){const t={};t.database=Ld(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Mc(r)?{documents:Ud(e,r)}:{query:Bd(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=kd(e,t.resumeToken);const r=Sd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(iu.min())>0){n.readTime=Ed(e,t.snapshotVersion.toTimestamp());const r=Sd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Va()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.__(t)}A_(e){const t={};t.database=Ld(this.serializer),t.removeTarget=e,this.__(t)}}class Dg extends Cg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return za(!!e.streamToken),this.lastStreamToken=e.streamToken,za(!e.writeResults||0===e.writeResults.length),this.listener.m_()}onNext(e){za(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const t=function(e,t){return e&&e.length>0?(za(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?xd(e.updateTime):xd(t);return n.isEqual(iu.min())&&(n=xd(t)),new Oh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=xd(e.commitTime);return this.listener.f_(n,t)}g_(){const e={};e.database=Ld(this.serializer),this.__(e)}V_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Vd(this.serializer,e)))};this.__(t)}}class Ng extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new ja(Ba.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,n,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Fo(e,Cd(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ba.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ja(Ba.UNKNOWN,e.toString())}))}No(e,t,n,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.No(e,Cd(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ba.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ja(Ba.UNKNOWN,e.toString())}))}terminate(){this.p_=!0,this.connection.terminate()}}class Og{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}F_(e){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,"Online"===e&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Ma(t),this.b_=!1):La("OnlineStateTracker",t)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class Pg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=i,this.B_.oo((e=>{n.enqueueAndForget((async()=>{jg(this)&&(La("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ua(e);t.N_.add(4),await Mg(t),t.k_.set("Unknown"),t.N_.delete(4),await Lg(t)}(this))}))})),this.k_=new Og(n,r)}}async function Lg(e){if(jg(e))for(const t of e.L_)await t(!0)}async function Mg(e){for(const t of e.L_)await t(!1)}function Rg(e,t){const n=Ua(e);n.O_.has(t.targetId)||(n.O_.set(t.targetId,t),Bg(n)?Ug(n):am(n).n_()&&Vg(n,t))}function Fg(e,t){const n=Ua(e),r=am(n);n.O_.delete(t),r.n_()&&zg(n,t),0===n.O_.size&&(r.n_()?r.s_():jg(n)&&n.k_.set("Unknown"))}function Vg(e,t){if(e.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(iu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}am(e).d_(t)}function zg(e,t){e.q_.xe(t),am(e).A_(t)}function Ug(e){e.q_=new gd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.O_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),am(e).start(),e.k_.D_()}function Bg(e){return jg(e)&&!am(e).t_()&&e.O_.size>0}function jg(e){return 0===Ua(e).N_.size}function qg(e){e.q_=void 0}async function $g(e){e.k_.set("Online")}async function Kg(e){e.O_.forEach(((t,n)=>{Vg(e,t)}))}async function Gg(e,t){qg(e),Bg(e)?(e.k_.F_(t),Ug(e)):e.k_.set("Unknown")}async function Hg(e,t,n){if(e.k_.set("Online"),t instanceof fd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.O_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.O_.delete(r),e.q_.removeTarget(r))}(e,t)}catch(n){La("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Qg(e,n)}else if(t instanceof hd?e.q_.Ke(t):t instanceof dd?e.q_.He(t):e.q_.We(t),!n.isEqual(iu.min()))try{const t=await Yp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.O_.get(r);i&&e.O_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.O_.get(t);if(!r)return;e.O_.set(t,r.withResumeToken(Tl.EMPTY_BYTE_STRING,r.snapshotVersion)),zg(e,t);const i=new Xd(r.target,t,n,r.sequenceNumber);Vg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){La("RemoteStore","Failed to raise snapshot:",t),await Qg(e,t)}}async function Qg(e,t,n){if(!Cu(t))throw t;e.N_.add(1),await Mg(e),e.k_.set("Offline"),n||(n=()=>Yp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{La("RemoteStore","Retrying IndexedDB access"),await n(),e.N_.delete(1),await Lg(e)}))}function Wg(e,t){return t().catch((n=>Qg(e,n,t)))}async function Yg(e){const t=Ua(e),n=um(t);let r=t.x_.length>0?t.x_[t.x_.length-1].batchId:-1;for(;Jg(t);)try{const e=await Xp(t.localStore,r);if(null===e){0===t.x_.length&&n.s_();break}r=e.batchId,Xg(t,e)}catch(e){await Qg(t,e)}Zg(t)&&em(t)}function Jg(e){return jg(e)&&e.x_.length<10}function Xg(e,t){e.x_.push(t);const n=um(e);n.n_()&&n.R_&&n.V_(t.mutations)}function Zg(e){return jg(e)&&!um(e).t_()&&e.x_.length>0}function em(e){um(e).start()}async function tm(e){um(e).g_()}async function nm(e){const t=um(e);for(const n of e.x_)t.V_(n.mutations)}async function rm(e,t,n){const r=e.x_.shift(),i=Wh.from(r,t,n);await Wg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Yg(e)}async function im(e,t){t&&um(e).R_&&await async function(e,t){if(function(e){return ed(e)&&e!==Ba.ABORTED}(t.code)){const n=e.x_.shift();um(e).i_(),await Wg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Yg(e)}}(e,t),Zg(e)&&em(e)}async function sm(e,t){const n=Ua(e);n.asyncQueue.verifyOperationInProgress(),La("RemoteStore","RemoteStore received new credentials");const r=jg(n);n.N_.add(3),await Mg(n),r&&n.k_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.N_.delete(3),await Lg(n)}async function om(e,t){const n=Ua(e);t?(n.N_.delete(2),await Lg(n)):t||(n.N_.add(2),await Mg(n),n.k_.set("Unknown"))}function am(e){return e.Q_||(e.Q_=function(e,t,n){const r=Ua(e);return r.y_(),new Ag(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{To:$g.bind(null,e),Ao:Kg.bind(null,e),Vo:Gg.bind(null,e),E_:Hg.bind(null,e)}),e.L_.push((async t=>{t?(e.Q_.i_(),Bg(e)?Ug(e):e.k_.set("Unknown")):(await e.Q_.stop(),qg(e))}))),e.Q_}function um(e){return e.K_||(e.K_=function(e,t,n){const r=Ua(e);return r.y_(),new Dg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{To:()=>Promise.resolve(),Ao:tm.bind(null,e),Vo:im.bind(null,e),m_:nm.bind(null,e),f_:rm.bind(null,e)}),e.L_.push((async t=>{t?(e.K_.i_(),await Yg(e)):(await e.K_.stop(),e.x_.length>0&&(La("RemoteStore",`Stopping write stream with ${e.x_.length} pending writes`),e.x_=[]))}))),e.K_}class lm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new lm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ja(Ba.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cm(e,t){if(Ma("AsyncQueue",`${t}: ${e}`),Cu(e))return new ja(Ba.UNAVAILABLE,`${t}: ${e}`);throw e}class hm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||lu.comparator(t.key,n.key):(e,t)=>lu.comparator(e.key,t.key),this.keyedMap=oh(),this.sortedSet=new bl(this.comparator)}static emptySet(e){return new hm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new hm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dm{constructor(){this.U_=new bl(lu.comparator)}track(e){const t=e.doc.key,n=this.U_.get(t);n?0!==e.type&&3===n.type?this.U_=this.U_.insert(t,e):3===e.type&&1!==n.type?this.U_=this.U_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.U_=this.U_.remove(t):1===e.type&&2===n.type?this.U_=this.U_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):Va():this.U_=this.U_.insert(t,e)}W_(){const e=[];return this.U_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fm{constructor(e,t,n,r,i,s,o,a,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new fm(e,t,hm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class pm{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some((e=>e.H_()))}}class gm{constructor(){this.queries=mm(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(e,t){const n=Ua(e),r=n.queries;n.queries=mm(),r.forEach(((e,n)=>{for(const r of n.z_)r.onError(t)}))}(this,new ja(Ba.ABORTED,"Firestore shutting down"))}}function mm(){return new nh((e=>Yc(e)),Wc)}async function ym(e,t){const n=Ua(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.j_()&&t.H_()&&(r=2):(s=new pm,r=t.H_()?0:1);try{switch(r){case 0:s.G_=await n.onListen(i,!0);break;case 1:s.G_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=cm(e,`Initialization of query '${Jc(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.z_.push(t),t.Y_(n.onlineState),s.G_&&t.Z_(s.G_)&&_m(n)}async function vm(e,t){const n=Ua(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.z_.indexOf(t);e>=0&&(s.z_.splice(e,1),0===s.z_.length?i=t.H_()?0:1:!s.j_()&&t.H_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bm(e,t){const n=Ua(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.z_)e.Z_(i)&&(r=!0);t.G_=i}}r&&_m(n)}function wm(e,t,n){const r=Ua(e),i=r.queries.get(t);if(i)for(const s of i.z_)s.onError(n);r.queries.delete(t)}function _m(e){e.J_.forEach((e=>{e.next()}))}var Sm,Em;(Em=Sm||(Sm={})).X_="default",Em.Cache="cache";class km{constructor(e,t,n){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}Z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){if(!e.fromCache)return!0;if(!this.H_())return!0;const n="Offline"!==t;return(!this.options.oa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ra(e){if(e.docChanges.length>0)return!0;const t=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}sa(e){e=fm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==Sm.Cache}}class Im{constructor(e,t){this._a=e,this.byteLength=t}aa(){return"metadata"in this._a}}class xm{constructor(e){this.serializer=e}Ts(e){return Nd(this.serializer,e)}Es(e){return e.metadata.exists?Fd(this.serializer,e.document,!1):oc.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return xd(e)}}class Tm{constructor(e,t,n){this.ua=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cm(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++t;const n=ou.fromString(e._a.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}la(e){const t=new Map,n=new xm(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ts(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||fh()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ua(e);let s=fh(),o=ih();for(const l of n){const e=t.Ts(l.metadata.name);l.document&&(s=s.add(e));const n=t.Es(l);n.setReadTime(t.ds(l.metadata.readTime)),o=o.insert(e,n)}const a=i.us.newChangeBuffer({trackRemovals:!0}),u=await Zp(i,function(e){return Kc(Bc(ou.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Jp(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.$r.removeMatchingKeysForTargetId(e,u.targetId).next((()=>i.$r.addMatchingKeys(e,s,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.hs,t.Ps))).next((()=>t.hs))))))}(this.localStore,new xm(this.serializer),this.documents,this.ua.id),t=this.la(this.documents);for(const n of this.queries)await sg(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ha:this.collectionGroups,Pa:e}}}function Cm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Am{constructor(e){this.key=e}}class Dm{constructor(e){this.key=e}}class Nm{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=fh(),this.mutatedKeys=fh(),this.da=eh(e),this.Aa=new hm(this.da)}get Ra(){return this.Ia}Va(e,t){const n=t?t.ma:new dm,r=t?t.Aa:this.Aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),c=Xc(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.fa(l,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.da(c,a)>0||u&&this.da(c,u)<0)&&(o=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(a||u)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Aa:s,ma:n,ts:o,mutatedKeys:i}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const s=e.ma.W_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Va()}};return n(e)-n(t)}(e.type,t.type)||this.da(e.doc,t.doc))),this.ga(n),r=null!=r&&r;const o=t&&!r?this.pa():[],a=0===this.Ea.size&&this.current&&!r?1:0,u=a!==this.Ta;return this.Ta=a,0!==s.length||u?{snapshot:new fm(this.query,e.Aa,i,s,e.mutatedKeys,0===a,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),ya:o}:{ya:o}}Y_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new dm,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach((e=>this.Ia=this.Ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ia=this.Ia.delete(e))),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=fh(),this.Aa.forEach((e=>{this.wa(e.key)&&(this.Ea=this.Ea.add(e.key))}));const t=[];return e.forEach((e=>{this.Ea.has(e)||t.push(new Dm(e))})),this.Ea.forEach((n=>{e.has(n)||t.push(new Am(n))})),t}Sa(e){this.Ia=e.Is,this.Ea=fh();const t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return fm.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,0===this.Ta,this.hasCachedResults)}}class Om{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Pm{constructor(e){this.key=e,this.Da=!1}}class Lm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.va=new nh((e=>Yc(e)),Wc),this.Fa=new Map,this.Ma=new Set,this.xa=new bl(lu.comparator),this.Oa=new Map,this.Na=new Cp,this.La={},this.Ba=new Map,this.ka=np.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}async function Mm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=cy(e);let i;const s=r.va.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ba()):i=await Fm(r,t,n,!0),i}async function Rm(e,t){const n=cy(e);await Fm(n,t,!0,!1)}async function Fm(e,t,n,r){const i=await Zp(e.localStore,Kc(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Vm(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Rg(e.remoteStore,i),a}async function Vm(e,t,n,r,i){e.Qa=(t,n,r)=>async function(e,t,n,r){let i=t.view.Va(n);i.ts&&(i=await tg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Va(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Ym(e,t.targetId,a.ya),a.snapshot}(e,t,n,r);const s=await tg(e.localStore,t,!0),o=new Nm(t,s.Is),a=o.Va(s.documents),u=cd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,u);Ym(e,n,l.ya);const c=new Om(t,n,o);return e.va.set(t,c),e.Fa.has(n)?e.Fa.get(n).push(t):e.Fa.set(n,[t]),l.snapshot}async function zm(e,t,n){const r=Ua(e),i=r.va.get(t),s=r.Fa.get(i.targetId);if(s.length>1)return r.Fa.set(i.targetId,s.filter((e=>!Wc(e,t)))),void r.va.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await eg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Fg(r.remoteStore,i.targetId),Qm(r,i.targetId)})).catch(_u)):(Qm(r,i.targetId),await eg(r.localStore,i.targetId,!0))}async function Um(e,t){const n=Ua(e),r=n.va.get(t),i=n.Fa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fg(n.remoteStore,r.targetId))}async function Bm(e,t){const n=Ua(e);try{const e=await function(e,t){const n=Ua(e),r=t.snapshotVersion;let i=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.us.newChangeBuffer({trackRemovals:!0});i=n.ss;const o=[];t.targetChanges.forEach(((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.$r.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.$r.addMatchingKeys(e,s.addedDocuments,a))));let l=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Tl.EMPTY_BYTE_STRING,iu.min()).withLastLimboFreeSnapshotVersion(iu.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,l,s)&&o.push(n.$r.updateTargetData(e,l))}));let a=ih(),u=fh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Jp(e,s,t.documentUpdates).next((e=>{a=e.hs,u=e.Ps}))),!r.isEqual(iu.min())){const t=n.$r.getLastRemoteSnapshotVersion(e).next((t=>n.$r.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Su.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,u))).next((()=>a))})).then((e=>(n.ss=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Oa.get(t);r&&(za(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Da=!0:e.modifiedDocuments.size>0?za(r.Da):e.removedDocuments.size>0&&(za(r.Da),r.Da=!1))})),await Zm(n,e,t)}catch(e){await _u(e)}}function jm(e,t,n){const r=Ua(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.va.forEach(((n,r)=>{const i=r.view.Y_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ua(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.z_)i.Y_(t)&&(r=!0)})),r&&_m(n)}(r.eventManager,t),e.length&&r.Ca.E_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function qm(e,t,n){const r=Ua(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Oa.get(t),s=i&&i.key;if(s){let e=new bl(lu.comparator);e=e.insert(s,oc.newNoDocument(s,iu.min()));const n=fh().add(s),i=new ld(iu.min(),new Map,new bl(eu),e,n);await Bm(r,i),r.xa=r.xa.remove(s),r.Oa.delete(t),Xm(r)}else await eg(r.localStore,t,!1).then((()=>Qm(r,t,n))).catch(_u)}async function $m(e,t){const n=Ua(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ua(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.us.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Su.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);za(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=fh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Hm(n,r,null),Gm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zm(n,e)}catch(e){await _u(e)}}async function Km(e,t,n){const r=Ua(e);try{const e=await function(e,t){const n=Ua(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(za(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Hm(r,t,n),Gm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Zm(r,e)}catch(n){await _u(n)}}function Gm(e,t){(e.Ba.get(t)||[]).forEach((e=>{e.resolve()})),e.Ba.delete(t)}function Hm(e,t,n){const r=Ua(e);let i=r.La[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.La[r.currentUser.toKey()]=i}}function Qm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Fa.get(t))e.va.delete(r),n&&e.Ca.Ka(r,n);e.Fa.delete(t),e.isPrimaryClient&&e.Na.mr(t).forEach((t=>{e.Na.containsKey(t)||Wm(e,t)}))}function Wm(e,t){e.Ma.delete(t.path.canonicalString());const n=e.xa.get(t);null!==n&&(Fg(e.remoteStore,n),e.xa=e.xa.remove(t),e.Oa.delete(n),Xm(e))}function Ym(e,t,n){for(const r of n)r instanceof Am?(e.Na.addReference(r.key,t),Jm(e,r)):r instanceof Dm?(La("SyncEngine","Document no longer in limbo: "+r.key),e.Na.removeReference(r.key,t),e.Na.containsKey(r.key)||Wm(e,r.key)):Va()}function Jm(e,t){const n=t.key,r=n.path.canonicalString();e.xa.get(n)||e.Ma.has(r)||(La("SyncEngine","New document in limbo: "+n),e.Ma.add(r),Xm(e))}function Xm(e){for(;e.Ma.size>0&&e.xa.size<e.maxConcurrentLimboResolutions;){const t=e.Ma.values().next().value;e.Ma.delete(t);const n=new lu(ou.fromString(t)),r=e.ka.next();e.Oa.set(r,new Pm(n)),e.xa=e.xa.insert(n,r),Rg(e.remoteStore,new Xd(Kc(Bc(n.path)),r,"TargetPurposeLimboResolution",Mu.oe))}}async function Zm(e,t,n){const r=Ua(e),i=[],s=[],o=[];r.va.isEmpty()||(r.va.forEach(((e,a)=>{o.push(r.Qa(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=$p.Ui(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ca.E_(i),await async function(e,t){const n=Ua(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Su.forEach(t,(t=>Su.forEach(t.Ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Su.forEach(t.$i,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Cu(e))throw e;La("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ss.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ss=n.ss.insert(e,i)}}}(r.localStore,s))}async function ey(e,t){const n=Ua(e);if(!n.currentUser.isEqual(t)){La("SyncEngine","User change. New user:",t.toKey());const e=await Wp(n.localStore,t);n.currentUser=t,function(e,t){e.Ba.forEach((e=>{e.forEach((e=>{e.reject(new ja(Ba.CANCELLED,t))}))})),e.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zm(n,e.ls)}}function ty(e,t){const n=Ua(e),r=n.Oa.get(t);if(r&&r.Da)return fh().add(r.key);{let e=fh();const r=n.Fa.get(t);if(!r)return e;for(const t of r){const r=n.va.get(t);e=e.unionWith(r.view.Ra)}return e}}async function ny(e,t){const n=Ua(e),r=await tg(n.localStore,t.query,!0),i=t.view.Sa(r);return n.isPrimaryClient&&Ym(n,t.targetId,i.ya),i}async function ry(e,t){const n=Ua(e);return rg(n.localStore,t).then((e=>Zm(n,e)))}async function iy(e,t,n,r){const i=Ua(e),s=await function(e,t){const n=Ua(e),r=Ua(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Fn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Su.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Yg(i.remoteStore):"acknowledged"===n||"rejected"===n?(Hm(i,t,r||null),Gm(i,t),function(e,t){Ua(Ua(e).mutationQueue).xn(t)}(i.localStore,t)):Va(),await Zm(i,s)):La("SyncEngine","Cannot apply mutation batch with id: "+t)}async function sy(e,t,n){const r=Ua(e),i=[],s=[];for(const o of t){let e;const t=r.Fa.get(o);if(t&&0!==t.length){e=await Zp(r.localStore,Kc(t[0]));for(const e of t){const t=r.va.get(e),n=await ny(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await ng(r.localStore,o);e=await Zp(r.localStore,t),await Vm(r,oy(t),o,!1,e.resumeToken)}i.push(e)}return r.Ca.E_(s),i}function oy(e){return Uc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ay(e){return function(e){return Ua(Ua(e).persistence).qi()}(Ua(e).localStore)}async function uy(e,t,n,r){const i=Ua(e);if(i.qa)return void La("SyncEngine","Ignoring unexpected query state notification.");const s=i.Fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await rg(i.localStore,Zc(s[0])),r=ld.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Tl.EMPTY_BYTE_STRING);await Zm(i,e,r);break}case"rejected":await eg(i.localStore,t,!0),Qm(i,t,r);break;default:Va()}}async function ly(e,t,n){const r=cy(e);if(r.qa){for(const e of t){if(r.Fa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){La("SyncEngine","Adding an already active target "+e);continue}const t=await ng(r.localStore,e),n=await Zp(r.localStore,t);await Vm(r,oy(t),n.targetId,!1,n.resumeToken),Rg(r.remoteStore,n)}for(const e of n)r.Fa.has(e)&&await eg(r.localStore,e,!1).then((()=>{Fg(r.remoteStore,e),Qm(r,e)})).catch(_u)}}function cy(e){const t=Ua(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ty.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qm.bind(null,t),t.Ca.E_=bm.bind(null,t.eventManager),t.Ca.Ka=wm.bind(null,t.eventManager),t}function hy(e){const t=Ua(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$m.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Km.bind(null,t),t}class dy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Qp(this.persistence,new Gp,e.initialUser,this.serializer)}createPersistence(e){return new Lp(Rp.Yr,this.serializer)}createSharedClientState(e){return new gg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fy extends dy{constructor(e,t,n){super(),this.Ua=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ua.initialize(this,e),await hy(this.Ua.syncEngine),await Yg(this.Ua.remoteStore),await this.persistence.pi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Qp(this.persistence,new Gp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new lp(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Lu(t,this.persistence);return new Pu(e.asyncQueue,n)}createPersistence(e){const t=qp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qf.withCacheSize(this.cacheSizeBytes):Qf.DEFAULT;return new Up(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kg(),Ig(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gg}}class py extends fy{constructor(e,t){super(e,t,!1),this.Ua=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ua.syncEngine;this.sharedClientState instanceof pg&&(this.sharedClientState.syncEngine={eo:iy.bind(null,t),no:uy.bind(null,t),ro:ly.bind(null,t),qi:ay.bind(null,t),Xs:ry.bind(null,t)},await this.sharedClientState.start()),await this.persistence.pi((async e=>{await async function(e,t){const n=Ua(e);if(cy(n),hy(n),!0===t&&!0!==n.qa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await sy(n,e.toArray());n.qa=!0,await om(n.remoteStore,!0);for(const r of t)Rg(n.remoteStore,r)}else if(!1===t&&!1!==n.qa){const e=[];let t=Promise.resolve();n.Fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Qm(n,i),eg(n.localStore,i,!0)))),Fg(n.remoteStore,i)})),await t,await sy(n,e),function(e){const t=Ua(e);t.Oa.forEach(((e,n)=>{Fg(t.remoteStore,n)})),t.Na.gr(),t.Oa=new Map,t.xa=new bl(lu.comparator)}(n),n.qa=!1,await om(n.remoteStore,!1)}}(this.Ua.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=kg();if(!pg.D(t))throw new ja(Ba.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=qp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class gy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>jm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ey.bind(null,this.syncEngine),await om(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gm}createDatastore(e){const t=xg(e.databaseInfo.databaseId),n=function(e){return new Eg(e)}(e.databaseInfo);return function(e,t,n,r){return new Ng(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Pg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>jm(this.syncEngine,e,0)),yg.D()?new yg:new mg)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Lm(e,t,n,r,i,s);return o&&(a.qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ua(e);La("RemoteStore","RemoteStore shutting down."),t.N_.add(5),await Mg(t),t.B_.shutdown(),t.k_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function my(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class yy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class vy{constructor(e,t){this.za=e,this.serializer=t,this.metadata=new qa,this.buffer=new Uint8Array,this.ja=new TextDecoder("utf-8"),this.Ha().then((e=>{e&&e.aa()?this.metadata.resolve(e._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e._a)}`))}),(e=>this.metadata.reject(e)))}close(){return this.za.cancel()}async getMetadata(){return this.metadata.promise}async $a(){return await this.getMetadata(),this.Ha()}async Ha(){const e=await this.Ja();if(null===e)return null;const t=this.ja.decode(e),n=Number(t);isNaN(n)&&this.Ya(`length string (${t}) is not valid number`);const r=await this.Za(n);return new Im(JSON.parse(r),e.length+n)}Xa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ja(){for(;this.Xa()<0&&!await this.eu(););if(0===this.buffer.length)return null;const e=this.Xa();e<0&&this.Ya("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Za(e){for(;this.buffer.length<e;)await this.eu()&&this.Ya("Reached the end of bundle when more is expected.");const t=this.ja.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}async eu(){const e=await this.za.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class by{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ja(Ba.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ua(e),r={documents:t.map((e=>Dd(n.serializer,e)))},i=await n.No("BatchGetDocuments",n.serializer.databaseId,ou.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){za(!!t.found),t.found.name,t.found.updateTime;const n=Nd(e,t.found.name),r=xd(t.found.updateTime),i=t.found.createTime?xd(t.found.createTime):iu.min(),s=new ic({mapValue:{fields:t.found.fields}});return oc.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){za(!!t.missing),za(!!t.readTime);const n=Nd(e,t.missing),r=xd(t.readTime);return oc.newNoDocument(n,r)}(e,t):Va()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());za(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=lu.fromPath(t);this.mutations.push(new Hh(n,this.precondition(n)))})),await async function(e,t){const n=Ua(e),r={writes:t.map((e=>Vd(n.serializer,e)))};await n.Fo("Commit",n.serializer.databaseId,ou.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Va();t=iu.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ja(Ba.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(iu.min())?Ph.exists(!1):Ph.updateTime(t):Ph.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(iu.min()))throw new ja(Ba.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ph.updateTime(t)}return Ph.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wy{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.tu=n.maxAttempts,this.e_=new Tg(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){this.e_.Wo((async()=>{const e=new by(this.datastore),t=this.iu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.su(e)}))))})).catch((e=>{this.su(e)}))}))}iu(e){try{const t=this.updateFunction(e);return!Ru(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ru(),Promise.resolve())))):this.deferred.reject(e)}ou(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ed(t)}return!1}}class _y{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Da.UNAUTHENTICATED,this.clientId=Za.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{La("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(La("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ja(Ba.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=cm(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Sy(e,t){e.asyncQueue.verifyOperationInProgress(),La("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Wp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ey(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Iy(e);La("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>sm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>sm(t.remoteStore,n))),e._onlineComponents=t}function ky(e){return"FirebaseError"===e.name?e.code===Ba.FAILED_PRECONDITION||e.code===Ba.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Iy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){La("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ky(n))throw n;Ra("Error using user provided cache. Falling back to memory cache: "+n),await Sy(e,new dy)}}else La("FirestoreClient","Using default OfflineComponentProvider"),await Sy(e,new dy);return e._offlineComponents}async function xy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(La("FirestoreClient","Using user provided OnlineComponentProvider"),await Ey(e,e._uninitializedComponentsProvider._online)):(La("FirestoreClient","Using default OnlineComponentProvider"),await Ey(e,new gy))),e._onlineComponents}function Ty(e){return Iy(e).then((e=>e.persistence))}function Cy(e){return Iy(e).then((e=>e.localStore))}function Ay(e){return xy(e).then((e=>e.remoteStore))}function Dy(e){return xy(e).then((e=>e.syncEngine))}function Ny(e){return xy(e).then((e=>e.datastore))}async function Oy(e){const t=await xy(e),n=t.eventManager;return n.onListen=Mm.bind(null,t.syncEngine),n.onUnlisten=zm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Rm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Um.bind(null,t.syncEngine),n}function Py(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new qa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new yy({next:s=>{t.enqueueAndForget((()=>vm(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new ja(Ba.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ja(Ba.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new km(Bc(n.path),s,{includeMetadataChanges:!0,oa:!0});return ym(e,o)}(await Oy(e),e.asyncQueue,t,n,r))),r.promise}function Ly(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new qa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new yy({next:n=>{t.enqueueAndForget((()=>vm(e,o))),n.fromCache&&"server"===r.source?i.reject(new ja(Ba.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new km(n,s,{includeMetadataChanges:!0,oa:!0});return ym(e,o)}(await Oy(e),e.asyncQueue,t,n,r))),r.promise}function My(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?rd().encode(e):e,function(e,t){return new vy(e,t)}(function(e,t){if(e instanceof Uint8Array)return my(e,t);if(e instanceof ArrayBuffer)return my(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,xg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Ua(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ua(e),r=xd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Wr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Cm(r));const i=new Tm(r,e.localStore,t.serializer);let s=await t.$a();for(;s;){const e=await i.ca(s);e&&n._updateProgress(e),s=await t.$a()}const o=await i.complete();return await Zm(e,o.Pa,void 0),await function(e,t){const n=Ua(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Wr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ha)}catch(e){return Ra("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Dy(e),i,r)}))}function Ry(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fy=new Map;function Vy(e,t,n){if(!n)throw new ja(Ba.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function zy(e,t,n,r){if(!0===t&&!0===r)throw new ja(Ba.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Uy(e){if(!lu.isDocumentKey(e))throw new ja(Ba.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function By(e){if(lu.isDocumentKey(e))throw new ja(Ba.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function jy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Va()}function qy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ja(Ba.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jy(e);throw new ja(Ba.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function $y(e,t){if(t<=0)throw new ja(Ba.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Ky{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ja(Ba.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ja(Ba.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ry(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ja(Ba.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ja(Ba.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ja(Ba.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ja(Ba.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ja(Ba.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ka;switch(e.type){case"firstParty":return new Wa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ja(Ba.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fy.get(e);t&&(La("ComponentProvider","Removing Datastore"),Fy.delete(e),t.terminate())}(this),Promise.resolve()}}function Hy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=qy(e,Gy))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Da.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[is(JSON.stringify({alg:"none",type:"JWT"})),is(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ja(Ba.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Da(s)}e._authCredentials=new Ga(new $a(t,n))}}class Qy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qy(this.firestore,e,this._query)}}class Wy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wy(this.firestore,e,this._key)}}class Yy extends Qy{constructor(e,t,n){super(e,t,Bc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wy(this.firestore,null,new lu(e))}withConverter(e){return new Yy(this.firestore,e,this._path)}}function Jy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xs(e),Vy("collection","path",t),e instanceof Gy){const n=ou.fromString(t,...r);return By(n),new Yy(e,null,n)}{if(!(e instanceof Wy||e instanceof Yy))throw new ja(Ba.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ou.fromString(t,...r));return By(n),new Yy(e.firestore,null,n)}}function Xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xs(e),1===arguments.length&&(t=Za.newId()),Vy("doc","path",t),e instanceof Gy){const n=ou.fromString(t,...r);return Uy(n),new Wy(e,null,new lu(n))}{if(!(e instanceof Wy||e instanceof Yy))throw new ja(Ba.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ou.fromString(t,...r));return Uy(n),new Wy(e.firestore,e instanceof Yy?e.converter:null,new lu(n))}}function Zy(e,t){return e=xs(e),t=xs(t),(e instanceof Wy||e instanceof Yy)&&(t instanceof Wy||t instanceof Yy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ev(e,t){return e=xs(e),t=xs(t),e instanceof Qy&&t instanceof Qy&&e.firestore===t.firestore&&Wc(e._query,t._query)&&e.converter===t.converter}class tv{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Tg(this,"async_queue_retry"),this.Tu=()=>{const e=Ig();e&&La("AsyncQueue","Visibility state changed to "+e.visibilityState),this.e_.zo()};const e=Ig();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const t=Ig();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise((()=>{}));const t=new qa;return this.du((()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.au.push(e),this.Au())))}async Au(){if(0!==this.au.length){try{await this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!Cu(e))throw e;La("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo((()=>this.Au()))}}du(e){const t=this._u.then((()=>(this.hu=!0,e().catch((e=>{this.lu=e,this.hu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ma("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.hu=!1,e))))));return this._u=t,t}enqueueAfterDelay(e,t,n){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);const r=lm.createAndSchedule(this,e,t,n,(e=>this.Ru(e)));return this.cu.push(r),r}Eu(){this.lu&&Va()}verifyOperationInProgress(){}async Vu(){let e;do{e=this._u,await e}while(e!==this._u)}mu(e){for(const t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then((()=>{this.cu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.cu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Vu()}))}gu(e){this.Iu.push(e)}Ru(e){const t=this.cu.indexOf(e);this.cu.splice(t,1)}}function nv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class rv{constructor(){this._progressObserver={},this._taskCompletionResolver=new qa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class iv extends Gy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new tv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ov(this),this._firestoreClient.terminate()}}function sv(e){return e._firestoreClient||ov(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ov(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ml(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ry(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new _y(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function av(e,t,n){const r=new qa;return e.asyncQueue.enqueue((async()=>{try{await Sy(e,n),await Ey(e,t),r.resolve()}catch(e){const n=e;if(!ky(n))throw n;Ra("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function uv(e){return function(e){const t=new qa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ua(e);jg(n.remoteStore)||La("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ua(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ba.get(e)||[];r.push(t),n.Ba.set(e,r)}catch(e){const n=cm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Dy(e),t))),t.promise}(sv(e=qy(e,iv)))}function lv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ty(e),n=await Ay(e);return t.setNetworkEnabled(!0),function(e){const t=Ua(e);return t.N_.delete(0),Lg(t)}(n)}))}(sv(e=qy(e,iv)))}function cv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Ty(e),n=await Ay(e);return t.setNetworkEnabled(!1),async function(e){const t=Ua(e);t.N_.add(0),await Mg(t),t.k_.set("Offline")}(n)}))}(sv(e=qy(e,iv)))}function hv(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Ua(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Wr.getNamedQuery(e,t)))}(await Cy(e),t)))}(sv(e=qy(e,iv)),t).then((t=>t?new Qy(e,null,t.query):null))}function dv(e){if(e._initialized||e._terminated)throw new ja(Ba.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fv(Tl.fromBase64String(e))}catch(e){throw new ja(Ba.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fv(Tl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ja(Ba.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new uu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gv{constructor(e){this._methodName=e}}class mv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ja(Ba.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ja(Ba.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return eu(this._lat,e._lat)||eu(this._long,e._long)}}const yv=/^__.*__$/;class vv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bh(e,this.data,t,this.fieldTransforms)}}class bv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Va()}}class _v{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new _v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.wu({path:n,bu:!1});return r.Du(e),r}Cu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.wu({path:n,bu:!1});return r.pu(),r}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return Bv(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(0===e.length)throw this.Fu("Document fields must not be empty");if(wv(this.yu)&&yv.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class Sv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||xg(e)}Ou(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _v({yu:e,methodName:t,xu:n,path:uu.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ev(e){const t=e._freezeSettings(),n=xg(e._databaseId);return new Sv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function kv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Ou(s.merge||s.mergeFields?2:0,t,n,i);Fv("Data must be an object, but it was:",o,r);const a=Mv(r,o);let u,l;if(s.merge)u=new Il(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Vv(t,r,n);if(!o.contains(i))throw new ja(Ba.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);jv(e,i)||e.push(i)}u=new Il(e),l=o.fieldTransforms.filter((e=>u.covers(e.field)))}else u=null,l=o.fieldTransforms;return new vv(new ic(a),u,l)}class Iv extends gv{_toFieldTransform(e){if(2!==e.yu)throw 1===e.yu?e.Fu(`${this._methodName}() can only appear at the top level of your update data`):e.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iv}}function xv(e,t,n){return new _v({yu:3,xu:t.settings.xu,methodName:e._methodName,bu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Tv extends gv{_toFieldTransform(e){return new Nh(e.path,new Eh)}isEqual(e){return e instanceof Tv}}class Cv extends gv{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=xv(this,e,!0),n=this.Nu.map((e=>Lv(e,t))),r=new kh(n);return new Nh(e.path,r)}isEqual(e){return e instanceof Cv&&_s(this.Nu,e.Nu)}}class Av extends gv{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=xv(this,e,!0),n=this.Nu.map((e=>Lv(e,t))),r=new xh(n);return new Nh(e.path,r)}isEqual(e){return e instanceof Av&&_s(this.Nu,e.Nu)}}class Dv extends gv{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Ch(e.serializer,vh(e.serializer,this.Lu));return new Nh(e.path,t)}isEqual(e){return e instanceof Dv&&this.Lu===e.Lu}}function Nv(e,t,n,r){const i=e.Ou(1,t,n);Fv("Data must be an object, but it was:",i,r);const s=[],o=ic.empty();yl(r,((e,r)=>{const a=Uv(t,e,n);r=xs(r);const u=i.Cu(a);if(r instanceof Iv)s.push(a);else{const e=Lv(r,u);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Il(s);return new bv(o,a,i.fieldTransforms)}function Ov(e,t,n,r,i,s){const o=e.Ou(1,t,n),a=[Vv(t,r,n)],u=[i];if(s.length%2!=0)throw new ja(Ba.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Vv(t,s[d])),u.push(s[d+1]);const l=[],c=ic.empty();for(let d=a.length-1;d>=0;--d)if(!jv(l,a[d])){const e=a[d];let t=u[d];t=xs(t);const n=o.Cu(e);if(t instanceof Iv)l.push(e);else{const r=Lv(t,n);null!=r&&(l.push(e),c.set(e,r))}}const h=new Il(l);return new bv(c,h,o.fieldTransforms)}function Pv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Lv(n,e.Ou(r?4:3,t))}function Lv(e,t){if(Rv(e=xs(e)))return Fv("Unsupported field value:",t,e),Mv(e,t);if(e instanceof gv)return function(e,t){if(!wv(t.yu))throw t.Fu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.bu&&4!==t.yu)throw t.Fu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Lv(i,t.vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=xs(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ru.fromDate(e);return{timestampValue:Ed(t.serializer,n)}}if(e instanceof ru){const n=new ru(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ed(t.serializer,n)}}if(e instanceof mv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fv)return{bytesValue:kd(t.serializer,e._byteString)};if(e instanceof Wy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Td(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fu(`Unsupported field value: ${jy(e)}`)}(e,t)}function Mv(e,t){const n={};return vl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yl(e,((e,r)=>{const i=Lv(r,t.Su(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Rv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ru||e instanceof mv||e instanceof fv||e instanceof Wy||e instanceof gv)}function Fv(e,t,n){if(!Rv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=jy(n);throw"an object"===r?t.Fu(e+" a custom object"):t.Fu(e+" "+r)}}function Vv(e,t,n){if((t=xs(t))instanceof pv)return t._internalPath;if("string"==typeof t)return Uv(e,t);throw Bv("Field path arguments must be of type string or ",e,!1,void 0,n)}const zv=new RegExp("[~\\*/\\[\\]]");function Uv(e,t,n){if(t.search(zv)>=0)throw Bv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new pv(...t.split("."))._internalPath}catch(r){throw Bv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Bv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ja(Ba.INVALID_ARGUMENT,a+e+u)}function jv(e,t){return e.some((e=>e.isEqual(t)))}class qv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $v(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $v extends qv{data(){return super.data()}}function Kv(e,t){return"string"==typeof t?Uv(e,t):t instanceof pv?t._internalPath:t._delegate._internalPath}function Gv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ja(Ba.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hv{}class Qv extends Hv{}function Wv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Hv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Xv)).length,n=e.filter((e=>e instanceof Yv)).length;if(t>1||t>0&&n>0)throw new ja(Ba.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Yv extends Qv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Yv(e,t,n)}_apply(e){const t=this._parse(e);return ob(e._query,t),new Qy(e.firestore,e.converter,Hc(e._query,t))}_parse(e){const t=Ev(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ja(Ba.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){sb(o,s);const t=[];for(const n of o)t.push(ib(r,e,n));a={arrayValue:{values:t}}}else a=ib(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||sb(o,s),a=Pv(n,t,o,"in"===s||"not-in"===s);return fc.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Jv(e,t,n){const r=t,i=Kv("where",e);return Yv._create(i,r,n)}class Xv extends Hv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:pc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)ob(n,i),n=Hc(n,i)}(e._query,t),new Qy(e.firestore,e.converter,Hc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zv extends Qv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ja(Ba.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ja(Ba.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cc(t,n)}(e._query,this._field,this._direction);return new Qy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new zc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class eb extends Qv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new eb(e,t,n)}_apply(e){return new Qy(e.firestore,e.converter,Qc(e._query,this._limit,this._limitType))}}class tb extends Qv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new tb(e,t,n)}_apply(e){const t=rb(e,this.type,this._docOrFields,this._inclusive);return new Qy(e.firestore,e.converter,function(e,t){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class nb extends Qv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new nb(e,t,n)}_apply(e){const t=rb(e,this.type,this._docOrFields,this._inclusive);return new Qy(e.firestore,e.converter,function(e,t){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function rb(e,t,n,r){if(n[0]=xs(n[0]),n[0]instanceof qv)return function(e,t,n,r,i){if(!r)throw new ja(Ba.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of $c(e))if(o.field.isKeyField())s.push(Gl(t,r.key));else{const e=r.data.field(o.field);if(Ol(e))throw new ja(Ba.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new ja(Ba.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new ac(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Ev(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new ja(Ba.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new ja(Ba.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!qc(e)&&-1!==s.indexOf("/"))throw new ja(Ba.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(ou.fromString(s));if(!lu.isDocumentKey(n))throw new ja(Ba.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new lu(n);a.push(Gl(t,i))}else{const e=Pv(n,r,s);a.push(e)}}return new ac(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ib(e,t,n){if("string"==typeof(n=xs(n))){if(""===n)throw new ja(Ba.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qc(t)&&-1!==n.indexOf("/"))throw new ja(Ba.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ou.fromString(n));if(!lu.isDocumentKey(r))throw new ja(Ba.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gl(e,new lu(r))}if(n instanceof Wy)return Gl(e,n._key);throw new ja(Ba.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jy(n)}.`)}function sb(e,t){if(!Array.isArray(e)||0===e.length)throw new ja(Ba.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ob(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ja(Ba.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ja(Ba.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ab{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Va()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return yl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new mv(Dl(e.latitude),Dl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Pl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const t=Al(e);return new ru(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ou.fromString(e);za(Jd(n));const r=new Rl(n.get(1),n.get(3)),i=new lu(n.popFirst(5));return r.isEqual(t)||Ma(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ub(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class lb extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wy(this.firestore,null,t)}}class cb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hb extends qv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new db(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class db extends hb{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class fb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new db(this._firestore,this._userDataWriter,n.key,n,new cb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ja(Ba.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new db(e._firestore,e._userDataWriter,n.doc.key,n.doc,new cb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new db(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:pb(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Va()}}function gb(e,t){return e instanceof hb&&t instanceof hb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof fb&&t instanceof fb&&e._firestore===t._firestore&&ev(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class mb extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wy(this.firestore,null,t)}}function yb(e){e=qy(e,Wy);const t=qy(e.firestore,iv),n=sv(t),r=new mb(t);return function(e,t){const n=new qa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ua(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ja(Ba.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=cm(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await Cy(e),t,n))),n.promise}(n,e._key).then((n=>new hb(t,r,e._key,n,new cb(null!==n&&n.hasLocalMutations,!0),e.converter)))}function vb(e){e=qy(e,Qy);const t=qy(e.firestore,iv),n=sv(t),r=new mb(t);return Gv(e._query),Ly(n,e._query).then((n=>new fb(t,r,e,n)))}function bb(e){e=qy(e,Qy);const t=qy(e.firestore,iv),n=sv(t),r=new mb(t);return function(e,t){const n=new qa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await tg(e,t,!0),i=new Nm(t,r.Is),s=i.Va(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=cm(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await Cy(e),t,n))),n.promise}(n,e._query).then((n=>new fb(t,r,e,n)))}function wb(e,t,n){e=qy(e,Wy);const r=qy(e.firestore,iv),i=ub(e.converter,t,n);return xb(r,[kv(Ev(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ph.none())])}function _b(e,t,n){e=qy(e,Wy);const r=qy(e.firestore,iv),i=Ev(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return s="string"==typeof(t=xs(t))||t instanceof pv?Ov(i,"updateDoc",e._key,t,n,a):Nv(i,"updateDoc",e._key,t),xb(r,[s.toMutation(e._key,Ph.exists(!0))])}function Sb(e){return xb(qy(e.firestore,iv),[new Gh(e._key,Ph.none())])}function Eb(e,t){const n=qy(e.firestore,iv),r=Xy(e),i=ub(e.converter,t);return xb(n,[kv(Ev(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ph.exists(!1))]).then((()=>r))}function kb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=xs(e);let a={includeMetadataChanges:!1,source:"default"},u=0;"object"!=typeof n[u]||nv(n[u])||(a=n[u],u++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(nv(n[u])){const e=n[u];n[u]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[u+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[u+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof Wy)h=qy(e.firestore,iv),d=Bc(e._key.path),c={next:t=>{n[u]&&n[u](Tb(h,e,t))},error:n[u+1],complete:n[u+2]};else{const t=qy(e,Qy);h=qy(t.firestore,iv),d=t._query;const r=new mb(h);c={next:e=>{n[u]&&n[u](new fb(h,r,t,e))},error:n[u+1],complete:n[u+2]},Gv(e._query)}return function(e,t,n,r){const i=new yy(r),s=new km(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ym(await Oy(e),s))),()=>{i.Ga(),e.asyncQueue.enqueueAndForget((async()=>vm(await Oy(e),s)))}}(sv(h),d,l,c)}function Ib(e,t){return function(e,t){const n=new yy(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ua(e).J_.add(t),t.next()}(await Oy(e),n))),()=>{n.Ga(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ua(e).J_.delete(t)}(await Oy(e),n)))}}(sv(e=qy(e,iv)),nv(t)?t:{next:t})}function xb(e,t){return function(e,t){const n=new qa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=hy(e);try{const e=await function(e,t){const n=Ua(e),r=ru.now(),i=t.reduce(((e,t)=>e.add(t.key)),fh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ih(),u=fh();return n.us.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(u=u.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=zh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new jh(e.key,t,sc(t.value.mapValue),Ph.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ah(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.La[e.currentUser.toKey()];r||(r=new bl(eu)),r=r.insert(t,n),e.La[e.currentUser.toKey()]=r}(r,e.batchId,n),await Zm(r,e.changes),await Yg(r.remoteStore)}catch(e){const t=cm(e,"Failed to persist write");n.reject(t)}}(await Dy(e),t,n))),n.promise}(sv(e),t)}function Tb(e,t,n){const r=n.docs.get(t._key),i=new mb(e);return new hb(e,i,t._key,r,new cb(n.hasPendingWrites,n.fromCache),t.converter)}const Cb={maxAttempts:5};class Ab{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ev(e)}set(e,t,n){this._verifyNotCommitted();const r=Db(e,this._firestore),i=ub(r.converter,t,n),s=kv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Ph.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Db(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=xs(t))||t instanceof pv?Ov(this._dataReader,"WriteBatch.update",r._key,t,n,o):Nv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Ph.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Db(e,this._firestore);return this._mutations=this._mutations.concat(new Gh(t._key,Ph.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ja(Ba.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Db(e,t){if((e=xs(e)).firestore!==t)throw new ja(Ba.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Nb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ev(e)}get(e){const t=Db(e,this._firestore),n=new lb(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Va();const r=e[0];if(r.isFoundDocument())return new qv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new qv(this._firestore,n,t._key,null,t.converter);throw Va()}))}set(e,t,n){const r=Db(e,this._firestore),i=ub(r.converter,t,n),s=kv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Db(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=xs(t))||t instanceof pv?Ov(this._dataReader,"Transaction.update",r._key,t,n,o):Nv(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Db(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Db(e,this._firestore),n=new mb(this._firestore);return super.get(e).then((e=>new hb(this._firestore,n,t._key,e._document,new cb(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Na=e}(Ho),Vo(new Ts("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new iv(new Ha(e.getProvider("auth-internal")),new Ja(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ja(Ba.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Zo(Aa,"4.6.5",e),Zo(Aa,"4.6.5","esm2017")}();class Ob{constructor(e,t){this._delegate=e,this.firebase=t,Ro(e,new Ts("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Xo(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ro(this._delegate,e)}_addOrOverwriteComponent(e){Fo(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pb=new vs("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Lb=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=Qo(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ws(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:Zo,setLogLevel:ta,onLog:ea,apps:null,SDK_VERSION:Ho,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(Vo(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Pb.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&os(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!ws(t,e=e||No))throw Pb.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(Ob);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){os(t,e)},createSubscribe:Es,ErrorFactory:vs,deepExtend:os}),t}(),Mb=new Fs("@firebase/app-compat");if(fs()&&void 0!==window.firebase){Mb.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=window.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Mb.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Rb=Lb;!function(e){Zo("@firebase/app-compat","0.2.38",e)}();function Fb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ja("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Vb(){if("undefined"===typeof Uint8Array)throw new ja("unimplemented","Uint8Arrays are not available in this environment.")}function zb(){if("undefined"==typeof atob)throw new ja("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ub{constructor(e){this._delegate=e}static fromBase64String(e){return zb(),new Ub(fv.fromBase64String(e))}static fromUint8Array(e){return Vb(),new Ub(fv.fromUint8Array(e))}toBase64(){return zb(),this._delegate.toBase64()}toUint8Array(){return Vb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Bb(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jb{enableIndexedDbPersistence(e,t){return function(e,t){dv(e=qy(e,iv));const n=sv(e);if(n._uninitializedComponentsProvider)throw new ja(Ba.FAILED_PRECONDITION,"SDK cache is already specified.");Ra("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new gy;return av(n,i,new fy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){dv(e=qy(e,iv));const t=sv(e);if(t._uninitializedComponentsProvider)throw new ja(Ba.FAILED_PRECONDITION,"SDK cache is already specified.");Ra("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new gy;return av(t,r,new py(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ja(Ba.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new qa;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!ku.D())return Promise.resolve();const t=e+"main";await ku.delete(t)}(qp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class qb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Rl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ra("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Hy(this._delegate,e,t,n)}enableNetwork(){return lv(this._delegate)}disableNetwork(){return cv(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,zy("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return uv(this._delegate)}onSnapshotsInSync(e){return Ib(this._delegate,e)}get app(){if(!this._appCompat)throw new ja("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rw(this,Jy(this._delegate,e))}catch(t){throw Wb(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qb(this,Xy(this._delegate,e))}catch(t){throw Wb(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ew(this,function(e,t){if(e=qy(e,Gy),Vy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ja(Ba.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qy(e,null,function(e){return new zc(ou.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Wb(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=qy(e,iv);const r=Object.assign(Object.assign({},Cb),n);return function(e){if(e.maxAttempts<1)throw new ja(Ba.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new qa;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Ny(e);new wy(e.asyncQueue,i,n,t,r).nu()})),r.promise}(sv(e),(n=>t(new Nb(e,n))),r)}(this._delegate,(t=>e(new Kb(this,t))))}batch(){return sv(this._delegate),new Gb(new Ab(this._delegate,(e=>xb(this._delegate,e))))}loadBundle(e){return function(e,t){const n=sv(e=qy(e,iv)),r=new rv;return My(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return hv(this._delegate,e).then((e=>e?new ew(this,e):null))}}class $b extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ub(new fv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qb.forKey(t,this.firestore,null)}}class Kb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $b(e)}get(e){const t=iw(e);return this._delegate.get(t).then((e=>new Xb(this._firestore,new hb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=iw(e);return n?(Fb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=iw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=iw(e);return this._delegate.delete(t),this}}class Gb{constructor(e){this._delegate=e}set(e,t,n){const r=iw(e);return n?(Fb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=iw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=iw(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hb{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new db(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zb(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Hb.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Hb(e,new $b(e),t),r.set(t,i)),i}}Hb.INSTANCES=new WeakMap;class Qb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $b(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ja("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qb(t,new Wy(t._delegate,n,new lu(e)))}static forKey(e,t,n){return new Qb(t,new Wy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new rw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rw(this.firestore,Jy(this._delegate,e))}catch(t){throw Wb(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=xs(e))instanceof Wy&&Zy(this._delegate,e)}set(e,t){t=Fb("DocumentReference.set",t);try{return t?wb(this._delegate,e,t):wb(this._delegate,e)}catch(n){throw Wb(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?_b(this._delegate,e):_b(this._delegate,e,t,...r)}catch(s){throw Wb(s,"updateDoc()","DocumentReference.update()")}}delete(){return Sb(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Yb(t),i=Jb(t,(e=>new Xb(this.firestore,new hb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return kb(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?yb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=qy(e,Wy);const t=qy(e.firestore,iv);return Py(sv(t),e._key,{source:"server"}).then((n=>Tb(t,e,n)))}(this._delegate):function(e){e=qy(e,Wy);const t=qy(e.firestore,iv);return Py(sv(t),e._key).then((n=>Tb(t,e,n)))}(this._delegate),t.then((e=>new Xb(this.firestore,new hb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Qb(this.firestore,e?this._delegate.withConverter(Hb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Wb(e,t,n){return e.message=e.message.replace(t,n),e}function Yb(e){for(const t of e)if("object"===typeof t&&!Bb(t))return t;return{}}function Jb(e,t){var n,r;let i;return i=Bb(e[0])?e[0]:Bb(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Xb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gb(this._delegate,e._delegate)}}class Zb extends Xb{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Va(),t}}class ew{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $b(e)}where(e,t,n){try{return new ew(this.firestore,Wv(this._delegate,Jv(e,t,n)))}catch(r){throw Wb(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ew(this.firestore,Wv(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Kv("orderBy",e);return Zv._create(n,t)}(e,t)))}catch(n){throw Wb(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ew(this.firestore,Wv(this._delegate,($y("limit",t=e),eb._create("limit",t,"F"))))}catch(t){throw Wb(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new ew(this.firestore,Wv(this._delegate,($y("limitToLast",t=e),eb._create("limitToLast",t,"L"))))}catch(t){throw Wb(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new ew(this.firestore,Wv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tb._create("startAt",t,!0)}(...arguments)))}catch(e){throw Wb(e,"startAt()","Query.startAt()")}}startAfter(){try{return new ew(this.firestore,Wv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tb._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Wb(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ew(this.firestore,Wv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nb._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Wb(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new ew(this.firestore,Wv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nb._create("endAt",t,!0)}(...arguments)))}catch(e){throw Wb(e,"endAt()","Query.endAt()")}}isEqual(e){return ev(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?bb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=qy(e,Qy);const t=qy(e.firestore,iv),n=sv(t),r=new mb(t);return Ly(n,e._query,{source:"server"}).then((n=>new fb(t,r,e,n)))}(this._delegate):vb(this._delegate),t.then((e=>new nw(this.firestore,new fb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Yb(t),i=Jb(t,(e=>new nw(this.firestore,new fb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return kb(this._delegate,r,i)}withConverter(e){return new ew(this.firestore,e?this._delegate.withConverter(Hb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class tw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ew(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Zb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new tw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Zb(this._firestore,n))}))}isEqual(e){return gb(this._delegate,e._delegate)}}class rw extends ew{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qb(this.firestore,e):null}doc(e){try{return new Qb(this.firestore,void 0===e?Xy(this._delegate):Xy(this._delegate,e))}catch(t){throw Wb(t,"doc()","CollectionReference.doc()")}}add(e){return Eb(this._delegate,e).then((e=>new Qb(this.firestore,e)))}isEqual(e){return Zy(this._delegate,e._delegate)}withConverter(e){return new rw(this.firestore,e?this._delegate.withConverter(Hb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function iw(e){return qy(e,Wy)}class sw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new pv(...t)}static documentId(){return new sw(uu.keyField().canonicalString())}isEqual(e){return(e=xs(e))instanceof pv&&this._delegate._internalPath.isEqual(e._internalPath)}}class ow{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Tv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ow(e)}static delete(){const e=new Iv("deleteField");return e._methodName="FieldValue.delete",new ow(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new ow(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Av("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new ow(e)}static increment(e){const t=new Dv("increment",e);return t._methodName="FieldValue.increment",new ow(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const aw={Firestore:qb,GeoPoint:mv,Timestamp:ru,Blob:Ub,Transaction:Kb,WriteBatch:Gb,DocumentReference:Qb,DocumentSnapshot:Xb,Query:ew,QueryDocumentSnapshot:Zb,QuerySnapshot:nw,CollectionReference:rw,FieldPath:sw,FieldValue:ow,setLogLevel:function(e){var t;t=e,Oa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var uw;(function(e,t){e.INTERNAL.registerComponent(new Ts("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},aw)))})(uw=Rb,((e,t)=>new qb(e,t,new jb))),uw.registerVersion("@firebase/firestore-compat","0.3.34");Zo("firebase","10.12.5","app");const lw=function(e,t){const n="string"==typeof e?e:t||"(default)",r=zo("object"==typeof e?e:Yo(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=ls("firestore");e&&Hy(r,...e)}return r}(Qo({apiKey:"AIzaSyAqlum2oqN-CuJOXee4kuZs_J74lkW_wbA",authDomain:"dasfasf-9a525.firebaseapp.com",databaseURL:"https://dasfasf-9a525-default-rtdb.firebaseio.com",projectId:"dasfasf-9a525",storageBucket:"dasfasf-9a525.appspot.com",messagingSenderId:"107145633908",appId:"1:107145633908:web:69c96c862ca415fc2ff121",measurementId:"G-N2PFKS6B1Q"}));const cw=new class{constructor(){var e,t,n;this.markers=[],this.currentId=0,this.addMarker=(e,t)=>{this.currentId+=1;const n={id:this.currentId,lat:e,lng:t,time:this.getCurrentTimeString()};this.markers.push(n),this.addDataToFirestore(n)},this.removeMarker=async e=>{this.markers=this.markers.filter((t=>t.id!==e));try{const t=Wv(Jy(lw,"markers"),Jv("id","==",e));(await vb(t)).forEach((async e=>{const t=Xy(lw,"markers",e.id);await Sb(t),this.calculateCurrentId(this.markers)}))}catch(t){console.error("Error removing document: ",t)}},this.removeAllMarkers=async()=>{this.markers=[];try{const t=await vb(Jy(lw,"markers")),n=(sv(e=qy(e=lw,iv)),new Ab(e,(t=>xb(e,t))));t.forEach((e=>{const t=Xy(lw,"markers",e.id);n.delete(t),this.calculateCurrentId(this.markers)})),await n.commit()}catch(t){console.error("Error removing all documents: ",t)}var e},this.calculateCurrentId=e=>{this.currentId=e.reduce(((e,t)=>t.id>e?t.id:e),0)},this.getCurrentTimeString=()=>{const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`},this.fetchDataFromFirestore=async()=>{const e=await vb(Jy(lw,"markers")),t=[];e.forEach((e=>{t.push({id:Number(e.id),...e.data()})})),this.markers=t,this.calculateCurrentId(t)},this.addDataToFirestore=async e=>{try{await Eb(Jy(lw,"markers"),{...e})}catch(t){console.error(t)}},E(e=this)?Zt(e,e,t,n):hr((function(){var r=Kn(e,n)[W];if(!e[_n]){var i=Object.getPrototypeOf(e),s=new Set([].concat(N(e),N(i)));s.delete("constructor"),s.delete(W),I(i,_n,s)}e[_n].forEach((function(e){return r.make_(e,!t||!(e in t)||t[e])}))})),this.fetchDataFromFirestore()}get getMarkers(){return this.markers.slice()}},hw=cw,dw=Lr((()=>{const e=pi(),t=(0,i.useRef)(null),n=(0,i.useRef)({});return(0,i.useEffect)((()=>{if(!e)return;t.current?t.current.clearMarkers():t.current=new es({map:e});const r=hw.getMarkers.map((t=>{const r=new google.maps.Marker({position:t,label:t.id.toString(),map:e});return r.addListener("rightclick",(()=>{hw.removeMarker(t.id)})),n.current[t.id]=r,r}));return t.current&&t.current.addMarkers(r),()=>{r.forEach((e=>e.setMap(null)))}}),[e,hw.getMarkers]),null})),fw=dw;var pw=n(579);const gw=Lr((()=>(0,pw.jsx)("div",{style:{height:"70vh",width:"50%"},children:(0,pw.jsxs)(Hr,{apiKey:"AIzaSyCeKpbajvmrb-U8tPObrFOzNs-xJ7Oa7cI",children:[(0,pw.jsx)(hi,{mapId:"15f640d1a496947c",onClick:e=>{const t=e.detail.latLng;t&&hw.addMarker(t.lat,t.lng)},children:(0,pw.jsx)(fw,{})}),(0,pw.jsx)("div",{children:"Deleting mark - right click"}),(0,pw.jsx)("button",{onClick:hw.removeAllMarkers,children:"Delete all markers"})]})})));const mw=function(){return(0,pw.jsx)("div",{children:(0,pw.jsx)(gw,{})})},yw=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};s.createRoot(document.getElementById("root")).render((0,pw.jsx)(i.StrictMode,{children:(0,pw.jsx)(mw,{})})),yw()})();
//# sourceMappingURL=main.b407aaec.js.map